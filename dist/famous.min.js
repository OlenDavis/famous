/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * Owner: mark@famo.us
 * @license MPL 2.0
 * @copyright Famous Industries, Inc. 2014
 */

this.famous={core:{},events:{},inputs:{},math:{},modifiers:{},physics:{bodies:{},constraints:{},forces:{},integrators:{}},surfaces:{},transitions:{},utilities:{},views:{},widgets:{}},define("famous/core/Entity.js",["require","exports","module"],function(a,b,c){function d(a){return h[a]}function e(a,b){h[a]=b}function f(a){var b=h.length;return e(b,a),b}function g(a){e(a,null)}var h=[];c.exports=famous.core.Entity={register:f,unregister:g,get:d,set:e}}),define("famous/core/Transform.js",["require","exports","module"],function(a,b,c){function d(a){return 2===a.length?a[0]*a[0]+a[1]*a[1]:a[0]*a[0]+a[1]*a[1]+a[2]*a[2]}function e(a){return Math.sqrt(d(a))}function f(a){return 0>a?-1:1}var g={};g.precision=1e-6,g.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],g.multiply4x4=function(a,b){return[a[0]*b[0]+a[4]*b[1]+a[8]*b[2]+a[12]*b[3],a[1]*b[0]+a[5]*b[1]+a[9]*b[2]+a[13]*b[3],a[2]*b[0]+a[6]*b[1]+a[10]*b[2]+a[14]*b[3],a[3]*b[0]+a[7]*b[1]+a[11]*b[2]+a[15]*b[3],a[0]*b[4]+a[4]*b[5]+a[8]*b[6]+a[12]*b[7],a[1]*b[4]+a[5]*b[5]+a[9]*b[6]+a[13]*b[7],a[2]*b[4]+a[6]*b[5]+a[10]*b[6]+a[14]*b[7],a[3]*b[4]+a[7]*b[5]+a[11]*b[6]+a[15]*b[7],a[0]*b[8]+a[4]*b[9]+a[8]*b[10]+a[12]*b[11],a[1]*b[8]+a[5]*b[9]+a[9]*b[10]+a[13]*b[11],a[2]*b[8]+a[6]*b[9]+a[10]*b[10]+a[14]*b[11],a[3]*b[8]+a[7]*b[9]+a[11]*b[10]+a[15]*b[11],a[0]*b[12]+a[4]*b[13]+a[8]*b[14]+a[12]*b[15],a[1]*b[12]+a[5]*b[13]+a[9]*b[14]+a[13]*b[15],a[2]*b[12]+a[6]*b[13]+a[10]*b[14]+a[14]*b[15],a[3]*b[12]+a[7]*b[13]+a[11]*b[14]+a[15]*b[15]]},g.multiply=function(a,b){return[a[0]*b[0]+a[4]*b[1]+a[8]*b[2],a[1]*b[0]+a[5]*b[1]+a[9]*b[2],a[2]*b[0]+a[6]*b[1]+a[10]*b[2],0,a[0]*b[4]+a[4]*b[5]+a[8]*b[6],a[1]*b[4]+a[5]*b[5]+a[9]*b[6],a[2]*b[4]+a[6]*b[5]+a[10]*b[6],0,a[0]*b[8]+a[4]*b[9]+a[8]*b[10],a[1]*b[8]+a[5]*b[9]+a[9]*b[10],a[2]*b[8]+a[6]*b[9]+a[10]*b[10],0,a[0]*b[12]+a[4]*b[13]+a[8]*b[14]+a[12],a[1]*b[12]+a[5]*b[13]+a[9]*b[14]+a[13],a[2]*b[12]+a[6]*b[13]+a[10]*b[14]+a[14],1]},g.thenMove=function(a,b){return b[2]||(b[2]=0),[a[0],a[1],a[2],0,a[4],a[5],a[6],0,a[8],a[9],a[10],0,a[12]+b[0],a[13]+b[1],a[14]+b[2],1]},g.moveThen=function(a,b){a[2]||(a[2]=0);var c=a[0]*b[0]+a[1]*b[4]+a[2]*b[8],d=a[0]*b[1]+a[1]*b[5]+a[2]*b[9],e=a[0]*b[2]+a[1]*b[6]+a[2]*b[10];return g.thenMove(b,[c,d,e])},g.translate=function(a,b,c){return void 0===c&&(c=0),[1,0,0,0,0,1,0,0,0,0,1,0,a,b,c,1]},g.thenScale=function(a,b){return[b[0]*a[0],b[1]*a[1],b[2]*a[2],0,b[0]*a[4],b[1]*a[5],b[2]*a[6],0,b[0]*a[8],b[1]*a[9],b[2]*a[10],0,b[0]*a[12],b[1]*a[13],b[2]*a[14],1]},g.scale=function(a,b,c){return void 0===c&&(c=1),void 0===b&&(b=a),[a,0,0,0,0,b,0,0,0,0,c,0,0,0,0,1]},g.rotateX=function(a){var b=Math.cos(a),c=Math.sin(a);return[1,0,0,0,0,b,c,0,0,-c,b,0,0,0,0,1]},g.rotateY=function(a){var b=Math.cos(a),c=Math.sin(a);return[b,0,-c,0,0,1,0,0,c,0,b,0,0,0,0,1]},g.rotateZ=function(a){var b=Math.cos(a),c=Math.sin(a);return[b,c,0,0,-c,b,0,0,0,0,1,0,0,0,0,1]},g.rotate=function(a,b,c){var d=Math.cos(a),e=Math.sin(a),f=Math.cos(b),g=Math.sin(b),h=Math.cos(c),i=Math.sin(c),j=[f*h,d*i+e*g*h,e*i-d*g*h,0,-f*i,d*h-e*g*i,e*h+d*g*i,0,g,-e*f,d*f,0,0,0,0,1];return j},g.rotateAxis=function(a,b){var c=Math.sin(b),d=Math.cos(b),e=1-d,f=a[0]*a[0]*e,g=a[0]*a[1]*e,h=a[0]*a[2]*e,i=a[1]*a[1]*e,j=a[1]*a[2]*e,k=a[2]*a[2]*e,l=a[0]*c,m=a[1]*c,n=a[2]*c,o=[f+d,g+n,h-m,0,g-n,i+d,j+l,0,h+m,j-l,k+d,0,0,0,0,1];return o},g.aboutOrigin=function(a,b){var c=a[0]-(a[0]*b[0]+a[1]*b[4]+a[2]*b[8]),d=a[1]-(a[0]*b[1]+a[1]*b[5]+a[2]*b[9]),e=a[2]-(a[0]*b[2]+a[1]*b[6]+a[2]*b[10]);return g.thenMove(b,[c,d,e])},g.skew=function(a,b,c){return[1,Math.tan(b),0,0,Math.tan(c),1,0,0,0,Math.tan(a),1,0,0,0,0,1]},g.skewX=function(a){return[1,0,0,0,Math.tan(a),1,0,0,0,0,1,0,0,0,0,1]},g.skewY=function(a){return[1,Math.tan(a),0,0,0,1,0,0,0,0,1,0,0,0,0,1]},g.perspective=function(a){return[1,0,0,0,0,1,0,0,0,0,1,-1/a,0,0,0,1]},g.getTranslate=function(a){return[a[12],a[13],a[14]]},g.inverse=function(a){var b=a[5]*a[10]-a[6]*a[9],c=a[4]*a[10]-a[6]*a[8],d=a[4]*a[9]-a[5]*a[8],e=a[1]*a[10]-a[2]*a[9],f=a[0]*a[10]-a[2]*a[8],g=a[0]*a[9]-a[1]*a[8],h=a[1]*a[6]-a[2]*a[5],i=a[0]*a[6]-a[2]*a[4],j=a[0]*a[5]-a[1]*a[4],k=a[0]*b-a[1]*c+a[2]*d,l=1/k,m=[l*b,-l*e,l*h,0,-l*c,l*f,-l*i,0,l*d,-l*g,l*j,0,0,0,0,1];return m[12]=-a[12]*m[0]-a[13]*m[4]-a[14]*m[8],m[13]=-a[12]*m[1]-a[13]*m[5]-a[14]*m[9],m[14]=-a[12]*m[2]-a[13]*m[6]-a[14]*m[10],m},g.transpose=function(a){return[a[0],a[4],a[8],a[12],a[1],a[5],a[9],a[13],a[2],a[6],a[10],a[14],a[3],a[7],a[11],a[15]]},g.interpret=function(a){var b=[a[0],a[1],a[2]],c=f(b[0]),h=e(b),i=[b[0]+c*h,b[1],b[2]],j=2/d(i);if(j>=1/0)return{translate:g.getTranslate(a),rotate:[0,0,0],scale:[0,0,0],skew:[0,0,0]};var k=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];k[0]=1-j*i[0]*i[0],k[5]=1-j*i[1]*i[1],k[10]=1-j*i[2]*i[2],k[1]=-j*i[0]*i[1],k[2]=-j*i[0]*i[2],k[6]=-j*i[1]*i[2],k[4]=k[1],k[8]=k[2],k[9]=k[6];var l=g.multiply(k,a),m=[l[5],l[6]],n=f(m[0]),o=e(m),p=[m[0]+n*o,m[1]],q=2/d(p),r=[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];r[5]=1-q*p[0]*p[0],r[10]=1-q*p[1]*p[1],r[6]=-q*p[0]*p[1],r[9]=r[6];var s=g.multiply(r,k),t=g.multiply(s,a),u=g.scale(t[0]<0?-1:1,t[5]<0?-1:1,t[10]<0?-1:1);t=g.multiply(t,u),s=g.multiply(u,s);var v={};return v.translate=g.getTranslate(a),v.rotate=[Math.atan2(-s[6],s[10]),Math.asin(s[2]),Math.atan2(-s[1],s[0])],v.rotate[0]||(v.rotate[0]=0,v.rotate[2]=Math.atan2(s[4],s[5])),v.scale=[t[0],t[5],t[10]],v.skew=[Math.atan2(t[9],v.scale[2]),Math.atan2(t[8],v.scale[2]),Math.atan2(t[4],v.scale[0])],Math.abs(v.rotate[0])+Math.abs(v.rotate[2])>1.5*Math.PI&&(v.rotate[1]=Math.PI-v.rotate[1],v.rotate[1]>Math.PI&&(v.rotate[1]-=2*Math.PI),v.rotate[1]<-Math.PI&&(v.rotate[1]+=2*Math.PI),v.rotate[0]<0?v.rotate[0]+=Math.PI:v.rotate[0]-=Math.PI,v.rotate[2]<0?v.rotate[2]+=Math.PI:v.rotate[2]-=Math.PI),v},g.average=function(a,b,c){c=void 0===c?.5:c;for(var d=g.interpret(a),e=g.interpret(b),f={translate:[0,0,0],rotate:[0,0,0],scale:[0,0,0],skew:[0,0,0]},h=0;3>h;h++)f.translate[h]=(1-c)*d.translate[h]+c*e.translate[h],f.rotate[h]=(1-c)*d.rotate[h]+c*e.rotate[h],f.scale[h]=(1-c)*d.scale[h]+c*e.scale[h],f.skew[h]=(1-c)*d.skew[h]+c*e.skew[h];return g.build(f)},g.build=function(a){var b=g.scale(a.scale[0],a.scale[1],a.scale[2]),c=g.skew(a.skew[0],a.skew[1],a.skew[2]),d=g.rotate(a.rotate[0],a.rotate[1],a.rotate[2]);return g.thenMove(g.multiply(g.multiply(d,c),b),a.translate)},g.equals=function(a,b){return!g.notEquals(a,b)},g.notEquals=function(a,b){return a===b?!1:!(a&&b)||a[12]!==b[12]||a[13]!==b[13]||a[14]!==b[14]||a[0]!==b[0]||a[1]!==b[1]||a[2]!==b[2]||a[4]!==b[4]||a[5]!==b[5]||a[6]!==b[6]||a[8]!==b[8]||a[9]!==b[9]||a[10]!==b[10]},g.normalizeRotation=function(a){var b=a.slice(0);for((b[0]===.5*Math.PI||b[0]===.5*-Math.PI)&&(b[0]=-b[0],b[1]=Math.PI-b[1],b[2]-=Math.PI),b[0]>.5*Math.PI&&(b[0]=b[0]-Math.PI,b[1]=Math.PI-b[1],b[2]-=Math.PI),b[0]<.5*-Math.PI&&(b[0]=b[0]+Math.PI,b[1]=-Math.PI-b[1],b[2]-=Math.PI);b[1]<-Math.PI;)b[1]+=2*Math.PI;for(;b[1]>=Math.PI;)b[1]-=2*Math.PI;for(;b[2]<-Math.PI;)b[2]+=2*Math.PI;for(;b[2]>=Math.PI;)b[2]-=2*Math.PI;return b},g.inFront=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,.001,1],g.behind=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,-.001,1],c.exports=famous.core.Transform=g}),define("famous/core/SpecParser.js",["require","exports","module","./Transform"],function(a,b,c){function d(){this.result={}}function e(a,b){return[a[0]*b[0]+a[1]*b[4]+a[2]*b[8],a[0]*b[1]+a[1]*b[5]+a[2]*b[9],a[0]*b[2]+a[1]*b[6]+a[2]*b[10]]}var f=a("./Transform");d._instance=new d,d.parse=function(a,b){return d._instance.parse(a,b)},d.prototype.parse=function(a,b){return this.reset(),this._parseSpec(a,b,f.identity),this.result},d.prototype.reset=function(){this.result={}};var g=[0,0];d.prototype._parseSpec=function(a,b,c){var d,h,i,j,k,l,m;if("number"==typeof a){if(d=a,i=b.transform,l=b.align||b.origin,b.size&&l&&(l[0]||l[1])){var n=[l[0]*b.size[0],l[1]*b.size[1],0];i=f.thenMove(i,e(n,c))}this.result[d]={transform:i,opacity:b.opacity,origin:b.origin||g,align:b.align||b.origin||g,size:b.size}}else{if(!a)return;if(a instanceof Array)for(var o=0;o<a.length;o++)this._parseSpec(a[o],b,c);else{h=a.target,i=b.transform,j=b.opacity,k=b.origin,l=b.align,m=b.size;var p=c;if(void 0!==a.opacity&&(j=b.opacity*a.opacity),a.transform&&(i=f.multiply(b.transform,a.transform)),a.origin&&(k=a.origin,p=b.transform),a.align&&(l=a.align),a.size){var q=b.size;m=[void 0!==a.size[0]?a.size[0]:q[0],void 0!==a.size[1]?a.size[1]:q[1]],q&&(l||(l=k),l&&(l[0]||l[1])&&(i=f.thenMove(i,e([l[0]*q[0],l[1]*q[1],0],c))),k&&(k[0]||k[1])&&(i=f.moveThen([-k[0]*m[0],-k[1]*m[1],0],i))),p=b.transform,k=null,l=null}this._parseSpec(h,{transform:i,opacity:j,origin:k,align:l,size:m},p)}}},c.exports=famous.core.SpecParser=d}),define("famous/core/RenderNode.js",["require","exports","module","./Entity","./SpecParser"],function(a,b,c){function d(a){this._object=null,this._child=null,this._hasMultipleChildren=!1,this._isRenderable=!1,this._isModifier=!1,this._resultCache={},this._prevResults={},this._childResult=null,a&&this.set(a)}function e(a,b,c){for(var d=g.parse(a,b),h=Object.keys(d),i=0;i<h.length;i++){var j=h[i],k=f.get(j),l=d[j];l.allocator=b.allocator;var m=k.commit(l);m?e(m,b,c):c[j]=l}}var f=a("./Entity"),g=a("./SpecParser");d.prototype.add=function(a){var b=a instanceof d?a:new d(a);return this._child instanceof Array?this._child.push(b):this._child?(this._child=[this._child,b],this._hasMultipleChildren=!0,this._childResult=[]):this._child=b,b},d.prototype.get=function(){return this._object||(this._hasMultipleChildren?null:this._child?this._child.get():null)},d.prototype.set=function(a){return this._childResult=null,this._hasMultipleChildren=!1,this._isRenderable=a.render?!0:!1,this._isModifier=a.modify?!0:!1,this._object=a,this._child=null,a instanceof d?a:this},d.prototype.getSize=function(){var a=null,b=this.get();return b&&b.getSize&&(a=b.getSize()),!a&&this._child&&this._child.getSize&&(a=this._child.getSize()),a},d.prototype.commit=function(a){for(var b=Object.keys(this._prevResults),c=0;c<b.length;c++){var d=b[c];if(void 0===this._resultCache[d]){var g=f.get(d);g.cleanup&&g.cleanup(a.allocator)}}this._prevResults=this._resultCache,this._resultCache={},e(this.render(),a,this._resultCache)},d.prototype.render=function(){if(this._isRenderable)return this._object.render();var a=null;if(this._hasMultipleChildren){a=this._childResult;for(var b=this._child,c=0;c<b.length;c++)a[c]=b[c].render()}else this._child&&(a=this._child.render());return this._isModifier?this._object.modify(a):a},c.exports=famous.core.RenderNode=d}),define("famous/core/EventEmitter.js",["require","exports","module"],function(a,b,c){function d(){this.listeners={},this._owner=this}d.prototype.emit=function(a,b){var c=this.listeners[a];if(c)for(var d=0;d<c.length;d++)c[d].call(this._owner,b);return this},d.prototype.on=function(a,b){a in this.listeners||(this.listeners[a]=[]);var c=this.listeners[a].indexOf(b);return 0>c&&this.listeners[a].push(b),this},d.prototype.addListener=d.prototype.on,d.prototype.removeListener=function(a,b){var c=this.listeners[a];if(void 0!==c){var d=c.indexOf(b);d>=0&&c.splice(d,1)}return this},d.prototype.bindThis=function(a){this._owner=a},c.exports=famous.core.EventEmitter=d}),define("famous/core/EventHandler.js",["require","exports","module","./EventEmitter"],function(a,b,c){function d(){e.apply(this,arguments),this.downstream=[],this.downstreamFn=[],this.upstream=[],this.upstreamListeners={}}var e=a("./EventEmitter");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.setInputHandler=function(a,b){a.trigger=b.trigger.bind(b),b.subscribe&&b.unsubscribe&&(a.subscribe=b.subscribe.bind(b),a.unsubscribe=b.unsubscribe.bind(b))},d.setOutputHandler=function(a,b){b instanceof d&&b.bindThis(a),a.pipe=b.pipe.bind(b),a.unpipe=b.unpipe.bind(b),a.on=b.on.bind(b),a.addListener=a.on,a.removeListener=b.removeListener.bind(b)},d.prototype.emit=function(a,b){e.prototype.emit.apply(this,arguments);var c=0;for(c=0;c<this.downstream.length;c++)this.downstream[c].trigger&&this.downstream[c].trigger(a,b);for(c=0;c<this.downstreamFn.length;c++)this.downstreamFn[c](a,b);return this},d.prototype.trigger=d.prototype.emit,d.prototype.pipe=function(a){if(a.subscribe instanceof Function)return a.subscribe(this);var b=a instanceof Function?this.downstreamFn:this.downstream,c=b.indexOf(a);return 0>c&&b.push(a),a instanceof Function?a("pipe",null):a.trigger&&a.trigger("pipe",null),a},d.prototype.unpipe=function(a){if(a.unsubscribe instanceof Function)return a.unsubscribe(this);var b=a instanceof Function?this.downstreamFn:this.downstream,c=b.indexOf(a);return c>=0?(b.splice(c,1),a instanceof Function?a("unpipe",null):a.trigger&&a.trigger("unpipe",null),a):!1},d.prototype.on=function(a){if(e.prototype.on.apply(this,arguments),!(a in this.upstreamListeners)){var b=this.trigger.bind(this,a);this.upstreamListeners[a]=b;for(var c=0;c<this.upstream.length;c++)this.upstream[c].on(a,b)}return this},d.prototype.addListener=d.prototype.on,d.prototype.subscribe=function(a){var b=this.upstream.indexOf(a);if(0>b){this.upstream.push(a);for(var c in this.upstreamListeners)a.on(c,this.upstreamListeners[c])}return this},d.prototype.unsubscribe=function(a){var b=this.upstream.indexOf(a);if(b>=0){this.upstream.splice(b,1);for(var c in this.upstreamListeners)a.removeListener(c,this.upstreamListeners[c])}return this},c.exports=famous.core.EventHandler=d}),define("famous/core/ElementAllocator.js",["require","exports","module"],function(a,b,c){function d(a){a||(a=document.createDocumentFragment()),this.container=a,this.detachedNodes={},this.nodeCount=0}d.prototype.migrate=function(a){var b=this.container;if(a!==b){if(b instanceof DocumentFragment)a.appendChild(b);else for(;b.hasChildNodes();)a.appendChild(b.removeChild(b.firstChild));this.container=a}},d.prototype.allocate=function(a){a=a.toLowerCase(),a in this.detachedNodes||(this.detachedNodes[a]=[]);var b,c=this.detachedNodes[a];return c.length>0?b=c.pop():(b=document.createElement(a),this.container.appendChild(b)),this.nodeCount++,b},d.prototype.deallocate=function(a){var b=a.nodeName.toLowerCase(),c=this.detachedNodes[b];c.push(a),this.nodeCount--},d.prototype.getNodeCount=function(){return this.nodeCount},c.exports=famous.core.ElementAllocator=d}),define("famous/utilities/Utility.js",["require","exports","module"],function(a,b,c){var d={};d.Direction={X:0,Y:1,Z:2},d.after=function(a,b){var c=a;return function(){c--,0===c&&b.apply(this,arguments)}},d.loadURL=function(a,b){var c=new XMLHttpRequest;c.onreadystatechange=function(){4===this.readyState&&b&&b(this.responseText)},c.open("GET",a),c.send()},d.createDocumentFragmentFromHTML=function(a){var b=document.createElement("div");b.innerHTML=a;for(var c=document.createDocumentFragment();b.hasChildNodes();)c.appendChild(b.firstChild);return c},d.clone=function(a){var b;if("object"==typeof a){b={};for(var c in a)if("object"==typeof a[c]&&null!==a[c])if(a[c]instanceof Array){b[c]=new Array(a[c].length);for(var e=0;e<a[c].length;e++)b[c][e]=d.clone(a[c][e])}else b[c]=d.clone(a[c]);else b[c]=a[c]}else b=a;return b},c.exports=famous.utilities.Utility=d}),define("famous/transitions/MultipleTransition.js",["require","exports","module","famous/utilities/Utility"],function(a,b,c){function d(a){this.method=a,this._instances=[],this.state=[]}var e=a("famous/utilities/Utility");d.SUPPORTS_MULTIPLE=!0,d.prototype.get=function(){for(var a=0;a<this._instances.length;a++)this.state[a]=this._instances[a].get();return this.state},d.prototype.set=function(a,b,c){for(var d=e.after(a.length,c),f=0;f<a.length;f++)this._instances[f]||(this._instances[f]=new this.method),this._instances[f].set(a[f],b,d)},d.prototype.reset=function(a){for(var b=0;b<a.length;b++)this._instances[b]||(this._instances[b]=new this.method),this._instances[b].reset(a[b])},c.exports=famous.transitions.MultipleTransition=d}),define("famous/transitions/TweenTransition.js",["require","exports","module"],function(a,b,c){function d(a){this.options=Object.create(d.DEFAULT_OPTIONS),a&&this.setOptions(a),this._startTime=0,this._startValue=0,this._updateTime=0,this._endValue=0,this._curve=void 0,this._duration=0,this._active=!1,this._callback=void 0,this.state=0,this.velocity=void 0}function e(a,b,c){return(1-c)*a+c*b}function f(a){return a instanceof Object?a instanceof Array?a.slice(0):Object.create(a):a}function g(a,b){var c={curve:b.curve};return b.duration&&(c.duration=b.duration),b.speed&&(c.speed=b.speed),a instanceof Object&&(void 0!==a.duration&&(c.duration=a.duration),a.curve&&(c.curve=a.curve),a.speed&&(c.speed=a.speed)),"string"==typeof c.curve&&(c.curve=d.getCurve(c.curve)),c}function h(a,b,c,d,e){var f,g=1e-7,h=(c(e)-c(e-g))/g;if(a instanceof Array){f=[];for(var i=0;i<a.length;i++)f[i]="number"==typeof a[i]?h*(a[i]-b[i])/d:0}else f=h*(a-b)/d;return f}function i(a,b,c){var d;if(a instanceof Array){d=[];for(var f=0;f<a.length;f++)d[f]="number"==typeof a[f]?e(a[f],b[f],c):a[f]}else d=e(a,b,c);return d}d.Curves={linear:function(a){return a},easeIn:function(a){return a*a},easeOut:function(a){return a*(2-a)},easeInOut:function(a){return.5>=a?2*a*a:-2*a*a+4*a-1},easeOutBounce:function(a){return a*(3-2*a)},spring:function(a){return(1-a)*Math.sin(6*Math.PI*a)+a}},d.SUPPORTS_MULTIPLE=!0,d.DEFAULT_OPTIONS={curve:d.Curves.linear,duration:500,speed:0};var j={};d.registerCurve=function(a,b){return j[a]?!1:(j[a]=b,!0)},d.unregisterCurve=function(a){return j[a]?(delete j[a],!0):!1},d.getCurve=function(a){var b=j[a];if(void 0!==b)return b;throw new Error("curve not registered")},d.getCurves=function(){return j},d.prototype.setOptions=function(a){void 0!==a.curve&&(this.options.curve=a.curve),void 0!==a.duration&&(this.options.duration=a.duration),void 0!==a.speed&&(this.options.speed=a.speed)},d.prototype.set=function(a,b,c){if(!b)return this.reset(a),void(c&&c());if(this._startValue=f(this.get()),b=g(b,this.options),b.speed){var d=this._startValue;if(d instanceof Object){var e=0;for(var h in d)e+=(a[h]-d[h])*(a[h]-d[h]);b.duration=Math.sqrt(e)/b.speed}else b.duration=Math.abs(a-d)/b.speed}this._startTime=Date.now(),this._endValue=f(a),this._startVelocity=f(b.velocity),this._duration=b.duration,this._curve=b.curve,this._active=!0,this._callback=c},d.prototype.reset=function(a,b){if(this._callback){var c=this._callback;this._callback=void 0,c()}this.state=f(a),this.velocity=f(b),this._startTime=0,this._duration=0,this._updateTime=0,this._startValue=this.state,this._startVelocity=this.velocity,this._endValue=this.state,this._active=!1},d.prototype.getVelocity=function(){return this.velocity},d.prototype.get=function(a){return this.update(a),this.state},d.prototype.update=function(a){if(this._active){if(a||(a=Date.now()),!(this._updateTime>=a)){this._updateTime=a;var b=a-this._startTime;if(b>=this._duration)this.state=this._endValue,this.velocity=h(this.state,this._startValue,this._curve,this._duration,1),this._active=!1;else if(0>b)this.state=this._startValue,this.velocity=this._startVelocity;else{var c=b/this._duration;this.state=i(this._startValue,this._endValue,this._curve(c)),this.velocity=h(this.state,this._startValue,this._curve,this._duration,c)}}}else if(this._callback){var d=this._callback;this._callback=void 0,d()}},d.prototype.isActive=function(){return this._active},d.prototype.halt=function(){this.reset(this.get())},d.registerCurve("linear",d.Curves.linear),d.registerCurve("easeIn",d.Curves.easeIn),d.registerCurve("easeOut",d.Curves.easeOut),d.registerCurve("easeInOut",d.Curves.easeInOut),d.registerCurve("easeOutBounce",d.Curves.easeOutBounce),d.registerCurve("spring",d.Curves.spring),d.customCurve=function(a,b){return a=a||0,b=b||0,function(c){return a*c+(-2*a-b+3)*c*c+(a+b-2)*c*c*c}},c.exports=famous.transitions.TweenTransition=d}),define("famous/transitions/Transitionable.js",["require","exports","module","./MultipleTransition","./TweenTransition"],function(a,b,c){function d(a){this.currentAction=null,this.actionQueue=[],this.callbackQueue=[],this.state=0,this.velocity=void 0,this._callback=void 0,this._engineInstance=null,this._currentMethod=null,this.set(a)}function e(){if(this._callback){var a=this._callback;this._callback=void 0,a()}if(this.actionQueue.length<=0)return void this.set(this.get());this.currentAction=this.actionQueue.shift(),this._callback=this.callbackQueue.shift();var b=null,c=this.currentAction[0],d=this.currentAction[1];d instanceof Object&&d.method?(b=d.method,"string"==typeof b&&(b=h[b])):b=g,this._currentMethod!==b&&(this._engineInstance=!(c instanceof Object)||b.SUPPORTS_MULTIPLE===!0||c.length<=b.SUPPORTS_MULTIPLE?new b:new f(b),this._currentMethod=b),this._engineInstance.reset(this.state,this.velocity),void 0!==this.velocity&&(d.velocity=this.velocity),this._engineInstance.set(c,d,e.bind(this))}var f=a("./MultipleTransition"),g=a("./TweenTransition"),h={};d.registerMethod=function(a,b){return a in h?!1:(h[a]=b,!0)},d.unregisterMethod=function(a){return a in h?(delete h[a],!0):!1},d.prototype.set=function(a,b,c){if(!b)return this.reset(a),c&&c(),this;var d=[a,b];return this.actionQueue.push(d),this.callbackQueue.push(c),this.currentAction||e.call(this),this},d.prototype.reset=function(a,b){this._currentMethod=null,this._engineInstance=null,this._callback=void 0,this.state=a,this.velocity=b,this.currentAction=null,this.actionQueue=[],this.callbackQueue=[]},d.prototype.delay=function(a,b){this.set(this.get(),{duration:a,curve:function(){return 0}},b)},d.prototype.get=function(a){return this._engineInstance&&(this._engineInstance.getVelocity&&(this.velocity=this._engineInstance.getVelocity()),this.state=this._engineInstance.get(a)),this.state},d.prototype.isActive=function(){return!!this.currentAction},d.prototype.halt=function(){return this.set(this.get())},c.exports=famous.transitions.Transitionable=d}),define("famous/core/Context",["require","exports","module","./RenderNode","./EventHandler","./ElementAllocator","./Transform","famous/transitions/Transitionable"],function(a,b,c){function d(a){return[a.clientWidth,a.clientHeight]}function e(a){this.container=a,this._allocator=new h(a),this._node=new f,this._eventOutput=new g,this._size=d(this.container),this._perspectiveState=new j(0),this._perspective=void 0,this._nodeContext={allocator:this._allocator,transform:i.identity,opacity:1,origin:k,align:null,size:this._size},this._eventOutput.on("resize",function(){this.setSize(d(this.container))}.bind(this))}var f=a("./RenderNode"),g=a("./EventHandler"),h=a("./ElementAllocator"),i=a("./Transform"),j=a("famous/transitions/Transitionable"),k=[0,0];e.prototype.getAllocator=function(){return this._allocator},e.prototype.add=function(a){return this._node.add(a)},e.prototype.migrate=function(a){a!==this.container&&(this.container=a,this._allocator.migrate(a))},e.prototype.getSize=function(){return this._size},e.prototype.setSize=function(a){a||(a=d(this.container)),this._size[0]=a[0],this._size[1]=a[1]},e.prototype.update=function(a){a&&(a.transform&&(this._nodeContext.transform=a.transform),a.opacity&&(this._nodeContext.opacity=a.opacity),a.origin&&(this._nodeContext.origin=a.origin),a.align&&(this._nodeContext.align=a.align),a.size&&(this._nodeContext.size=a.size));var b=this._perspectiveState.get();b!==this._perspective&&(this.container.style.perspective=b?b.toFixed()+"px":"",this.container.style.webkitPerspective=b?b.toFixed():"",this._perspective=b),this._node.commit(this._nodeContext)},e.prototype.getPerspective=function(){return this._perspectiveState.get()},e.prototype.setPerspective=function(a,b,c){return this._perspectiveState.set(a,b,c)},e.prototype.emit=function(a,b){return this._eventOutput.emit(a,b)},e.prototype.on=function(a,b){return this._eventOutput.on(a,b)},e.prototype.removeListener=function(a,b){return this._eventOutput.removeListener(a,b)},e.prototype.pipe=function(a){return this._eventOutput.pipe(a)},e.prototype.unpipe=function(a){return this._eventOutput.unpipe(a)},c.exports=famous.core.Context=e}),define("famous/core/OptionsManager.js",["require","exports","module","./EventHandler"],function(a,b,c){function d(a){this._value=a,this.eventOutput=null}function e(){this.eventOutput=new f,this.eventOutput.bindThis(this),f.setOutputHandler(this,this.eventOutput)}var f=a("./EventHandler");d.patch=function(a){for(var b=new d(a),c=1;c<arguments.length;c++)b.patch(arguments[c]);return a},d.prototype.patch=function(){for(var a=this._value,b=0;b<arguments.length;b++){var c=arguments[b];for(var d in c)d in a&&c[d]&&c[d].constructor===Object&&a[d]&&a[d].constructor===Object?(a.hasOwnProperty(d)||(a[d]=Object.create(a[d])),this.key(d).patch(c[d]),this.eventOutput&&this.eventOutput.emit("change",{id:d,value:this.key(d).value()})):this.set(d,c[d])}return this},d.prototype.setOptions=d.prototype.patch,d.prototype.key=function(a){var b=new d(this._value[a]);return(!(b._value instanceof Object)||b._value instanceof Array)&&(b._value={}),b},d.prototype.get=function(a){return this._value[a]},d.prototype.getOptions=d.prototype.get,d.prototype.set=function(a,b){var c=this.get(a);return this._value[a]=b,this.eventOutput&&b!==c&&this.eventOutput.emit("change",{id:a,value:b}),this},d.prototype.value=function(){return this._value},d.prototype.on=function(){return e.call(this),this.on.apply(this,arguments)},d.prototype.removeListener=function(){return e.call(this),this.removeListener.apply(this,arguments)},d.prototype.pipe=function(){return e.call(this),this.pipe.apply(this,arguments)},d.prototype.unpipe=function(){return e.call(this),this.unpipe.apply(this,arguments)},c.exports=famous.core.OptionsManager=d}),define("famous/core/Engine",["require","exports","module","./Context","./EventHandler","./OptionsManager"],function(a,b,c){function d(){t.runLoop?(l.step(),window.requestAnimationFrame(d)):q=!1}function e(){for(var a=0;a<m.length;a++)m[a].emit("resize");s.emit("resize")}function f(){window.addEventListener("touchmove",function(a){a.preventDefault()},!0),document.body.classList.add("famous-root"),document.documentElement.classList.add("famous-root")}var g,h,i=a("./Context"),j=a("./EventHandler"),k=a("./OptionsManager"),l={},m=[],n=[],o=[],p=Date.now(),q=!0,r={},s=new j,t={containerType:"div",containerClass:"famous-container",fpsCap:void 0,runLoop:!0,appMode:!0},u=new k(t),v=10;l.step=function(){var a=Date.now();if(!(h&&h>a-p)){var b=0;for(g=a-p,p=a,s.emit("prerender"),b=0;b<n.length;b++)n[b].call(this);for(n.splice(0);o.length&&Date.now()-a<v;)o.shift().call(this);for(b=0;b<m.length;b++)m[b].update();s.emit("postrender")}},window.requestAnimationFrame(d),window.addEventListener("resize",e,!1),e();var w=!1;l.pipe=function(a){return a.subscribe instanceof Function?a.subscribe(l):s.pipe(a)},l.unpipe=function(a){return a.unsubscribe instanceof Function?a.unsubscribe(l):s.unpipe(a)},l.on=function(a,b){return a in r||(r[a]=s.emit.bind(s,a),document.body?document.body.addEventListener(a,r[a]):l.nextTick(function(a,b){document.body.addEventListener(a,b)}.bind(this,a,r[a]))),s.on(a,b)},l.emit=function(a,b){return s.emit(a,b)},l.removeListener=function(a,b){return s.removeListener(a,b)},l.getFPS=function(){return 1e3/g},l.setFPSCap=function(a){h=Math.floor(1e3/a)},l.getOptions=function(){return u.getOptions.apply(u,arguments)},l.setOptions=function(){return u.setOptions.apply(u,arguments)},l.createContext=function(a){!w&&t.appMode&&f();var b=!1;a||(a=document.createElement(t.containerType),a.classList.add(t.containerClass),b=!0);var c=new i(a);return l.registerContext(c),b&&l.nextTick(function(a,b){document.body.appendChild(b),a.emit("resize")}.bind(this,c,a)),c},l.registerContext=function(a){return m.push(a),a},l.getContexts=function(){return m},l.deregisterContext=function(a){var b=m.indexOf(a);b>=0&&m.splice(b,1)},l.nextTick=function(a){n.push(a)},l.defer=function(a){o.push(a)},u.on("change",function(a){"fpsCap"===a.id?l.setFPSCap(a.value):"runLoop"===a.id&&!q&&a.value&&(q=!0,window.requestAnimationFrame(d))}),c.exports=famous.core.Engine=l}),define("famous/core/ElementOutput",["require","exports","module","./Entity","./EventHandler","./Transform"],function(a,b,c){function d(a){this._matrix=null,this._opacity=1,this._origin=null,this._size=null,this._eventOutput=new k,this._eventOutput.bindThis(this),this.eventForwarder=function(a){this._eventOutput.emit(a.type,a)}.bind(this),this.id=j.register(this),this._element=null,this._sizeDirty=!1,this._originDirty=!1,this._transformDirty=!1,this._invisible=!1,a&&this.attach(a)}function e(a){for(var b in this._eventOutput.listeners)a.addEventListener(b,this.eventForwarder)}function f(a){for(var b in this._eventOutput.listeners)a.removeEventListener(b,this.eventForwarder)}function g(a){a[12]=Math.round(a[12]*n)/n,a[13]=Math.round(a[13]*n)/n;for(var b="matrix3d(",c=0;15>c;c++)b+=a[c]<1e-6&&a[c]>-1e-6?"0,":a[c]+",";return b+=a[15]+")"}function h(a){return 100*a[0]+"% "+100*a[1]+"%"}function i(a,b){return a&&b?a[0]!==b[0]||a[1]!==b[1]:a!==b}var j=a("./Entity"),k=a("./EventHandler"),l=a("./Transform"),m=void 0!==document.body.style.webkitTransform,n=window.devicePixelRatio||1;d.prototype.on=function(a,b){this._element&&this._element.addEventListener(a,this.eventForwarder),this._eventOutput.on(a,b)},d.prototype.removeListener=function(a,b){this._eventOutput.removeListener(a,b)},d.prototype.emit=function(a,b){b&&!b.origin&&(b.origin=this);var c=this._eventOutput.emit(a,b);return c&&b&&b.stopPropagation&&b.stopPropagation(),c},d.prototype.pipe=function(a){return this._eventOutput.pipe(a)},d.prototype.unpipe=function(a){return this._eventOutput.unpipe(a)},d.prototype.render=function(){return this.id};var o;o=navigator.userAgent.toLowerCase().indexOf("firefox")>-1?function(a,b){a.style.zIndex=1e6*b[14]|0,a.style.transform=g(b)}:m?function(a,b){a.style.webkitTransform=g(b)}:function(a,b){a.style.transform=g(b)};var p=m?function(a,b){a.style.webkitTransformOrigin=h(b)}:function(a,b){a.style.transformOrigin=h(b)},q=m?function(a){a.style.webkitTransform="scale3d(0.0001,0.0001,0.0001)",a.style.opacity=0}:function(a){a.style.transform="scale3d(0.0001,0.0001,0.0001)",a.style.opacity=0};d.prototype.commit=function(a){var b=this._element;if(b){var c=a.transform,d=a.opacity,e=a.origin,f=a.size;if(!c&&this._matrix)return this._matrix=null,this._opacity=0,void q(b);if(i(this._origin,e)&&(this._originDirty=!0),i(this._size,f)&&(this._sizeDirty=!0),l.notEquals(this._matrix,c)&&(this._transformDirty=!0),this._invisible&&(this._invisible=!1,this._element.style.display=""),this._opacity!==d&&(this._opacity=d,b.style.opacity=d>=1?"0.999999":d),this._transformDirty||this._originDirty||this._sizeDirty){this._sizeDirty&&(this._size||(this._size=[0,0]),this._size[0]=f[0],this._size[1]=f[1],this._sizeDirty=!1),this._originDirty&&(e?(this._origin||(this._origin=[0,0]),this._origin[0]=e[0],this._origin[1]=e[1]):this._origin=null,p(b,this._origin),this._originDirty=!1),c||(c=l.identity),this._matrix=c;var g=this._size?l.thenMove(c,[-this._size[0]*e[0],-this._size[1]*e[1],0]):c;o(b,g),this._transformDirty=!1}}},d.prototype.cleanup=function(){this._element&&(this._invisible=!0,this._element.style.display="none")},d.prototype.attach=function(a){this._element=a,e.call(this,a)},d.prototype.detach=function(){var a=this._element;return a&&(f.call(this,a),this._invisible&&(this._invisible=!1,this._element.style.display="")),this._element=null,a},c.exports=famous.core.ElementOutput=d}),define("famous/core/Surface.js",["require","exports","module","./ElementOutput"],function(a,b,c){function d(a){i.call(this),this.options={},this.properties={},this.content="",this.classList=[],this.size=null,this._classesDirty=!0,this._stylesDirty=!0,this._sizeDirty=!0,this._contentDirty=!0,this._dirtyClasses=[],a&&this.setOptions(a),this._currentTarget=null}function e(a){for(var b=0;b<this._dirtyClasses.length;b++)a.classList.remove(this._dirtyClasses[b]);this._dirtyClasses=[]}function f(a){for(var b in this.properties)a.style[b]=this.properties[b]}function g(a){for(var b in this.properties)a.style[b]=""}function h(a,b){return a&&b?a[0]!==b[0]||a[1]!==b[1]:a!==b}var i=a("./ElementOutput");d.prototype=Object.create(i.prototype),d.prototype.constructor=d,d.prototype.elementType="div",d.prototype.elementClass="famous-surface",d.prototype.setProperties=function(a){for(var b in a)this.properties[b]=a[b];
this._stylesDirty=!0},d.prototype.getProperties=function(){return this.properties},d.prototype.addClass=function(a){this.classList.indexOf(a)<0&&(this.classList.push(a),this._classesDirty=!0)},d.prototype.removeClass=function(a){var b=this.classList.indexOf(a);b>=0&&(this._dirtyClasses.push(this.classList.splice(b,1)[0]),this._classesDirty=!0)},d.prototype.toggleClass=function(a){var b=this.classList.indexOf(a);b>=0?this.removeClass(a):this.addClass(a)},d.prototype.setClasses=function(a){var b=0,c=[];for(b=0;b<this.classList.length;b++)a.indexOf(this.classList[b])<0&&c.push(this.classList[b]);for(b=0;b<c.length;b++)this.removeClass(c[b]);for(b=0;b<a.length;b++)this.addClass(a[b])},d.prototype.getClassList=function(){return this.classList},d.prototype.setContent=function(a){this.content!==a&&(this.content=a,this._contentDirty=!0)},d.prototype.getContent=function(){return this.content},d.prototype.setOptions=function(a){a.size&&this.setSize(a.size),a.classes&&this.setClasses(a.classes),a.properties&&this.setProperties(a.properties),a.content&&this.setContent(a.content)},d.prototype.setup=function(a){var b=a.allocate(this.elementType);if(this.elementClass)if(this.elementClass instanceof Array)for(var c=0;c<this.elementClass.length;c++)b.classList.add(this.elementClass[c]);else b.classList.add(this.elementClass);b.style.display="",this.attach(b),this._currentTarget=b,this._stylesDirty=!0,this._classesDirty=!0,this._sizeDirty=!0,this._contentDirty=!0,this._transformDirty=!0},d.prototype.commit=function(a){this._currentTarget||this.setup(a.allocator);var b=this._currentTarget,c=a.size;if(this._classesDirty){e.call(this,b);for(var d=this.getClassList(),g=0;g<d.length;g++)b.classList.add(d[g]);this._classesDirty=!1}if(this._stylesDirty&&(f.call(this,b),this._stylesDirty=!1),this.size){var j=a.size;c=[this.size[0],this.size[1]],void 0===c[0]?c[0]=j[0]:c[0]===!0&&(c[0]=b.clientWidth),void 0===c[1]?c[1]=j[1]:c[1]===!0&&(c[1]=b.clientHeight)}h(this._size,c)&&(this._size||(this._size=[0,0]),this._size[0]=c[0],this._size[1]=c[1],this._sizeDirty=!0),this._sizeDirty&&(this._size&&(b.style.width=this.size&&this.size[0]===!0?"":this._size[0]+"px",b.style.height=this.size&&this.size[1]===!0?"":this._size[1]+"px"),this._sizeDirty=!1),this._contentDirty&&(this.deploy(b),this._eventOutput.emit("deploy"),this._contentDirty=!1),i.prototype.commit.call(this,a)},d.prototype.cleanup=function(a){var b=0,c=this._currentTarget;this._eventOutput.emit("recall"),this.recall(c),c.style.display="none",c.style.width="",c.style.height="",this._size=null,g.call(this,c);var d=this.getClassList();for(e.call(this,c),b=0;b<d.length;b++)c.classList.remove(d[b]);if(this.elementClass)if(this.elementClass instanceof Array)for(b=0;b<this.elementClass.length;b++)c.classList.remove(this.elementClass[b]);else c.classList.remove(this.elementClass);this.detach(c),this._currentTarget=null,a.deallocate(c)},d.prototype.deploy=function(a){var b=this.getContent();if(b instanceof Node){for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(b)}else a.innerHTML=b},d.prototype.recall=function(a){for(var b=document.createDocumentFragment();a.hasChildNodes();)b.appendChild(a.firstChild);this.setContent(b)},d.prototype.getSize=function(){return this._size},d.prototype.setSize=function(a){this.size=a?[a[0],a[1]]:null,this._sizeDirty=!0},c.exports=famous.core.Surface=d}),define("famous/core/Group",["require","exports","module","./Context","./Transform","./Surface"],function(a,b,c){function d(a){g.call(this,a),this._shouldRecalculateSize=!1,this._container=document.createDocumentFragment(),this.context=new e(this._container),this.setContent(this._container),this._groupSize=[void 0,void 0]}var e=a("./Context"),f=a("./Transform"),g=a("./Surface");d.SIZE_ZERO=[0,0],d.prototype=Object.create(g.prototype),d.prototype.elementType="div",d.prototype.elementClass="famous-group",d.prototype.add=function(){return this.context.add.apply(this.context,arguments)},d.prototype.render=function(){return g.prototype.render.call(this)},d.prototype.deploy=function(a){this.context.migrate(a)},d.prototype.recall=function(){this._container=document.createDocumentFragment(),this.context.migrate(this._container)},d.prototype.commit=function(a){var b=a.transform,c=a.origin,e=a.opacity,h=a.size,i=g.prototype.commit.call(this,{allocator:a.allocator,transform:f.thenMove(b,[-c[0]*h[0],-c[1]*h[1],0]),opacity:e,origin:c,size:d.SIZE_ZERO});return(h[0]!==this._groupSize[0]||h[1]!==this._groupSize[1])&&(this._groupSize[0]=h[0],this._groupSize[1]=h[1],this.context.setSize(h)),this.context.update({transform:f.translate(-c[0]*h[0],-c[1]*h[1],0),origin:c,size:h}),i},c.exports=famous.core.Group=d}),define("famous/transitions/TransitionableTransform.js",["require","exports","module","./Transitionable","famous/core/Transform","famous/utilities/Utility"],function(a,b,c){function d(a){this._final=g.identity.slice(),this.translate=new f([0,0,0]),this.rotate=new f([0,0,0]),this.skew=new f([0,0,0]),this.scale=new f([1,1,1]),a&&this.set(a)}function e(){return g.build({translate:this.translate.get(),rotate:this.rotate.get(),skew:this.skew.get(),scale:this.scale.get()})}var f=a("./Transitionable"),g=a("famous/core/Transform"),h=a("famous/utilities/Utility");d.prototype.setTranslate=function(a,b,c){return this.translate.set(a,b,c),this._final=this._final.slice(),this._final[12]=a[0],this._final[13]=a[1],void 0!==a[2]&&(this._final[14]=a[2]),this},d.prototype.setScale=function(a,b,c){return this.scale.set(a,b,c),this._final=this._final.slice(),this._final[0]=a[0],this._final[5]=a[1],void 0!==a[2]&&(this._final[10]=a[2]),this},d.prototype.setRotate=function(a,b,c){return this.rotate.set(a,b,c),this._final=e.call(this),this._final=g.build({translate:this.translate.get(),rotate:a,scale:this.scale.get(),skew:this.skew.get()}),this},d.prototype.setSkew=function(a,b,c){return this.skew.set(a,b,c),this._final=g.build({translate:this.translate.get(),rotate:this.rotate.get(),scale:this.scale.get(),skew:a}),this},d.prototype.set=function(a,b,c){this._final=a;var d=g.interpret(a),e=c?h.after(4,c):null;return this.translate.set(d.translate,b,e),this.rotate.set(d.rotate,b,e),this.skew.set(d.skew,b,e),this.scale.set(d.scale,b,e),this},d.prototype.setDefaultTransition=function(a){this.translate.setDefault(a),this.rotate.setDefault(a),this.skew.setDefault(a),this.scale.setDefault(a)},d.prototype.get=function(){return this.isActive()?e.call(this):this._final},d.prototype.getFinal=function(){return this._final},d.prototype.isActive=function(){return this.translate.isActive()||this.rotate.isActive()||this.scale.isActive()||this.skew.isActive()},d.prototype.halt=function(){this._final=this.get(),this.translate.halt(),this.rotate.halt(),this.skew.halt(),this.scale.halt()},c.exports=famous.transitions.TransitionableTransform=d}),define("famous/core/Modifier",["require","exports","module","./Transform","famous/transitions/Transitionable","famous/transitions/TransitionableTransform"],function(a,b,c){function d(a){this._transformGetter=null,this._opacityGetter=null,this._originGetter=null,this._alignGetter=null,this._sizeGetter=null,this._legacyStates={},this._output={transform:f.identity,opacity:1,origin:null,align:null,size:null,target:null},a&&(a.transform&&this.transformFrom(a.transform),void 0!==a.opacity&&this.opacityFrom(a.opacity),a.origin&&this.originFrom(a.origin),a.align&&this.alignFrom(a.align),a.size&&this.sizeFrom(a.size))}function e(){this._transformGetter&&(this._output.transform=this._transformGetter()),this._opacityGetter&&(this._output.opacity=this._opacityGetter()),this._originGetter&&(this._output.origin=this._originGetter()),this._alignGetter&&(this._output.align=this._alignGetter()),this._sizeGetter&&(this._output.size=this._sizeGetter())}var f=a("./Transform"),g=a("famous/transitions/Transitionable"),h=a("famous/transitions/TransitionableTransform");d.prototype.transformFrom=function(a){return a instanceof Function?this._transformGetter=a:a instanceof Object&&a.get?this._transformGetter=a.get.bind(a):(this._transformGetter=null,this._output.transform=a),this},d.prototype.opacityFrom=function(a){return a instanceof Function?this._opacityGetter=a:a instanceof Object&&a.get?this._opacityGetter=a.get.bind(a):(this._opacityGetter=null,this._output.opacity=a),this},d.prototype.originFrom=function(a){return a instanceof Function?this._originGetter=a:a instanceof Object&&a.get?this._originGetter=a.get.bind(a):(this._originGetter=null,this._output.origin=a),this},d.prototype.alignFrom=function(a){return a instanceof Function?this._alignGetter=a:a instanceof Object&&a.get?this._alignGetter=a.get.bind(a):(this._alignGetter=null,this._output.align=a),this},d.prototype.sizeFrom=function(a){return a instanceof Function?this._sizeGetter=a:a instanceof Object&&a.get?this._sizeGetter=a.get.bind(a):(this._sizeGetter=null,this._output.size=a),this},d.prototype.setTransform=function(a,b,c){return b||this._legacyStates.transform?(this._legacyStates.transform||(this._legacyStates.transform=new h(this._output.transform)),this._transformGetter||this.transformFrom(this._legacyStates.transform),this._legacyStates.transform.set(a,b,c),this):this.transformFrom(a)},d.prototype.setOpacity=function(a,b,c){return b||this._legacyStates.opacity?(this._legacyStates.opacity||(this._legacyStates.opacity=new g(this._output.opacity)),this._opacityGetter||this.opacityFrom(this._legacyStates.opacity),this._legacyStates.opacity.set(a,b,c)):this.opacityFrom(a)},d.prototype.setOrigin=function(a,b,c){return b||this._legacyStates.origin?(this._legacyStates.origin||(this._legacyStates.origin=new g(this._output.origin||[0,0])),this._originGetter||this.originFrom(this._legacyStates.origin),this._legacyStates.origin.set(a,b,c),this):this.originFrom(a)},d.prototype.setAlign=function(a,b,c){return b||this._legacyStates.align?(this._legacyStates.align||(this._legacyStates.align=new g(this._output.align||[0,0])),this._alignGetter||this.alignFrom(this._legacyStates.align),this._legacyStates.align.set(a,b,c),this):this.alignFrom(a)},d.prototype.setSize=function(a,b,c){return a&&(b||this._legacyStates.size)?(this._legacyStates.size||(this._legacyStates.size=new g(this._output.size||[0,0])),this._sizeGetter||this.sizeFrom(this._legacyStates.size),this._legacyStates.size.set(a,b,c),this):this.sizeFrom(a)},d.prototype.halt=function(){this._legacyStates.transform&&this._legacyStates.transform.halt(),this._legacyStates.opacity&&this._legacyStates.opacity.halt(),this._legacyStates.origin&&this._legacyStates.origin.halt(),this._legacyStates.align&&this._legacyStates.align.halt(),this._legacyStates.size&&this._legacyStates.size.halt(),this._transformGetter=null,this._opacityGetter=null,this._originGetter=null,this._alignGetter=null,this._sizeGetter=null},d.prototype.getTransform=function(){return this._transformGetter()},d.prototype.getFinalTransform=function(){return this._legacyStates.transform?this._legacyStates.transform.getFinal():this._output.transform},d.prototype.getOpacity=function(){return this._opacityGetter()},d.prototype.getOrigin=function(){return this._originGetter()},d.prototype.getAlign=function(){return this._alignGetter()},d.prototype.getSize=function(){return this._sizeGetter?this._sizeGetter():this._output.size},d.prototype.modify=function(a){return e.call(this),this._output.target=a,this._output},c.exports=famous.core.Modifier=d}),define("famous/core/Scene",["require","exports","module","./Transform","./Modifier","./RenderNode"],function(a,b,c){function d(a){this.id=null,this._objects=null,this.node=new k,this._definition=null,a&&this.load(a)}function e(a){for(var b in l)if(b in a){var c=a[b];return c instanceof Array||(c=[c]),l[b].apply(this,c)}}function f(a){var b=a.transform,c=a.opacity,d=a.origin,f=a.align,g=a.size,h=i.identity;if(b instanceof Array)if(16===b.length&&"number"==typeof b[0])h=b;else for(var k=0;k<b.length;k++)h=i.multiply(h,e(b[k]));else b instanceof Function?h=b:b instanceof Object&&(h=e(b));var l=new j({transform:h,opacity:c,origin:d,align:f,size:g});return l}function g(a){for(var b=new k,c=0;c<a.length;c++){var d=h.call(this,a[c]);d&&b.add(d)}return b}function h(a){var b,c;if(a instanceof Array)b=g.call(this,a);else if(c=this._objects.length,a.render&&a.render instanceof Function)b=a;else if(a.target){var d=h.call(this,a.target),e=f.call(this,a);b=new k(e),b.add(d),a.id&&(this.id[a.id]=e)}else a.id&&(b=new k,this.id[a.id]=b);return this._objects[c]=b,b}var i=a("./Transform"),j=a("./Modifier"),k=a("./RenderNode"),l={translate:i.translate,rotate:i.rotate,rotateX:i.rotateX,rotateY:i.rotateY,rotateZ:i.rotateZ,rotateAxis:i.rotateAxis,scale:i.scale,skew:i.skew,matrix3d:function(){return arguments}};d.prototype.create=function(){return new d(this._definition)},d.prototype.load=function(a){this._definition=a,this.id={},this._objects=[],this.node.set(h.call(this,a))},d.prototype.add=function(){return this.node.add.apply(this.node,arguments)},d.prototype.render=function(){return this.node.render.apply(this.node,arguments)},c.exports=famous.core.Scene=d}),define("famous/core/View",["require","exports","module","./EventHandler","./OptionsManager","./RenderNode","famous/utilities/Utility"],function(a,b,c){function d(a){this._node=new g,this._eventInput=new e,this._eventOutput=new e,e.setInputHandler(this,this._eventInput),e.setOutputHandler(this,this._eventOutput),this.options=h.clone(this.constructor.DEFAULT_OPTIONS||d.DEFAULT_OPTIONS),this._optionsManager=new f(this.options),a&&this.setOptions(a)}var e=a("./EventHandler"),f=a("./OptionsManager"),g=a("./RenderNode"),h=a("famous/utilities/Utility");d.DEFAULT_OPTIONS={},d.prototype.getOptions=function(){return this._optionsManager.value()},d.prototype.setOptions=function(a){this._optionsManager.patch(a)},d.prototype.add=function(){return this._node.add.apply(this._node,arguments)},d.prototype._add=d.prototype.add,d.prototype.render=function(){return this._node.render()},d.prototype.getSize=function(){return this._node&&this._node.getSize?this._node.getSize.apply(this._node,arguments)||this.options.size:this.options.size},c.exports=famous.core.View=d}),define("famous/core/ViewSequence",["require","exports","module"],function(a,b,c){function d(a){a||(a=[]),a instanceof Array&&(a={array:a}),this._=null,this.index=a.index||0,a.array?this._=new this.constructor.Backing(a.array):a._&&(this._=a._),this.index===this._.firstIndex&&(this._.firstNode=this),this.index===this._.firstIndex+this._.array.length-1&&(this._.lastNode=this),void 0!==a.loop&&(this._.loop=a.loop),this._previousNode=null,this._nextNode=null}d.Backing=function(a){this.array=a,this.firstIndex=0,this.loop=!1,this.firstNode=null,this.lastNode=null},d.Backing.prototype.getValue=function(a){var b=a-this.firstIndex;return 0>b||b>=this.array.length?null:this.array[b]},d.Backing.prototype.setValue=function(a,b){this.array[a-this.firstIndex]=b},d.Backing.prototype.reindex=function(a,b,c){if(this.array[0]){for(var d=0,e=this.firstIndex,f=c-b,g=this.firstNode;a-1>e;)g=g.getNext(),e++;var h=g;for(d=0;b>d;d++)g=g.getNext(),g&&(g._previousNode=h);var i=g?g.getNext():null;for(h._nextNode=null,g=h,d=0;c>d;d++)g=g.getNext();if(e+=c,g!==i&&(g._nextNode=i,i&&(i._previousNode=g)),i)for(g=i,e++;g&&e<this.array.length+this.firstIndex;)g._nextNode?g.index+=f:g.index=e,g=g.getNext(),e++}},d.prototype.getPrevious=function(){return this.index===this._.firstIndex?this._.loop?(this._previousNode=this._.lastNode||new this.constructor({_:this._,index:this._.firstIndex+this._.array.length-1}),this._previousNode._nextNode=this):this._previousNode=null:this._previousNode||(this._previousNode=new this.constructor({_:this._,index:this.index-1}),this._previousNode._nextNode=this),this._previousNode},d.prototype.getNext=function(){return this.index===this._.firstIndex+this._.array.length-1?this._.loop?(this._nextNode=this._.firstNode||new this.constructor({_:this._,index:this._.firstIndex}),this._nextNode._previousNode=this):this._nextNode=null:this._nextNode||(this._nextNode=new this.constructor({_:this._,index:this.index+1}),this._nextNode._previousNode=this),this._nextNode},d.prototype.getIndex=function(){return this.index},d.prototype.toString=function(){return""+this.index},d.prototype.unshift=function(){this._.array.unshift.apply(this._.array,arguments),this._.firstIndex-=arguments.length},d.prototype.push=function(){this._.array.push.apply(this._.array,arguments)},d.prototype.splice=function(a,b){var c=Array.prototype.slice.call(arguments,2);this._.array.splice.apply(this._.array,[a-this._.firstIndex,b].concat(c)),this._.reindex(a,b,c.length)},d.prototype.swap=function(a){var b=a.get(),c=this.get();this._.setValue(this.index,b),this._.setValue(a.index,c);var d=this._previousNode,e=this._nextNode,f=this.index,g=a._previousNode,h=a._nextNode,i=a.index;this.index=i,this._previousNode=g===this?a:g,this._previousNode&&(this._previousNode._nextNode=this),this._nextNode=h===this?a:h,this._nextNode&&(this._nextNode._previousNode=this),a.index=f,a._previousNode=d===a?this:d,a._previousNode&&(a._previousNode._nextNode=a),a._nextNode=e===a?this:e,a._nextNode&&(a._nextNode._previousNode=a),this.index===this._.firstIndex?this._.firstNode=this:this.index===this._.firstIndex+this._.array.length-1&&(this._.lastNode=this),a.index===this._.firstIndex?this._.firstNode=a:a.index===this._.firstIndex+this._.array.length-1&&(this._.lastNode=a)},d.prototype.get=function(){return this._.getValue(this.index)},d.prototype.getSize=function(){var a=this.get();return a?a.getSize():null},d.prototype.render=function(){var a=this.get();return a?a.render.apply(a,arguments):null},c.exports=famous.core.ViewSequence=d}),define("famous/events/EventArbiter.js",["require","exports","module","famous/core/EventHandler"],function(a,b,c){function d(a){this.dispatchers={},this.currMode=void 0,this.setMode(a)}var e=a("famous/core/EventHandler");d.prototype.setMode=function(a){if(a!==this.currMode){var b=this.currMode;this.dispatchers[this.currMode]&&this.dispatchers[this.currMode].trigger("unpipe"),this.currMode=a,this.dispatchers[a]&&this.dispatchers[a].emit("pipe"),this.emit("change",{from:b,to:a})}},d.prototype.forMode=function(a){return this.dispatchers[a]||(this.dispatchers[a]=new e),this.dispatchers[a]},d.prototype.emit=function(a,b){if(void 0===this.currMode)return!1;b||(b={});var c=this.dispatchers[this.currMode];return c?c.trigger(a,b):void 0},c.exports=famous.events.EventArbiter=d}),define("famous/events/EventFilter.js",["require","exports","module","famous/core/EventHandler"],function(a,b,c){function d(a){e.call(this),this._condition=a}var e=a("famous/core/EventHandler");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype.emit=function(a,b){return this._condition(a,b)?e.prototype.emit.apply(this,arguments):void 0},d.prototype.trigger=d.prototype.emit,c.exports=famous.events.EventFilter=d}),define("famous/events/EventMapper.js",["require","exports","module","famous/core/EventHandler"],function(a,b,c){function d(a){e.call(this),this._mappingFunction=a}var e=a("famous/core/EventHandler");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype.subscribe=null,d.prototype.unsubscribe=null,d.prototype.emit=function(a,b){var c=this._mappingFunction.apply(this,arguments);c&&c.emit instanceof Function&&c.emit(a,b)},d.prototype.trigger=d.prototype.emit,c.exports=famous.events.EventMapper=d}),define("famous/inputs/FastClick.js",["require","exports","module"],function(){if(window.CustomEvent){var a=300,b=500,c={},d={},e=Date.now;window.addEventListener("touchstart",function(a){for(var b=e(),d=0;d<a.changedTouches.length;d++){var f=a.changedTouches[d];c[f.identifier]=b}}),window.addEventListener("touchmove",function(a){for(var b=0;b<a.changedTouches.length;b++){var d=a.changedTouches[b];delete c[d.identifier]}}),window.addEventListener("touchend",function(b){for(var f=e(),g=0;g<b.changedTouches.length;g++){var h=b.changedTouches[g],i=c[h.identifier];if(i&&a>f-i){var j=new window.CustomEvent("click",{bubbles:!0,detail:h});d[f]=b,b.target.dispatchEvent(j)}delete c[h.identifier]}}),window.addEventListener("click",function(a){var c=e();for(var f in d){var g=d[f];b>c-f?a instanceof window.MouseEvent&&a.target===g.target&&a.stopPropagation():delete d[f]}},!0)}}),define("famous/inputs/GenericSync",["require","exports","module","famous/core/EventHandler"],function(a,b,c){function d(a,b){this._eventInput=new f,this._eventOutput=new f,f.setInputHandler(this,this._eventInput),f.setOutputHandler(this,this._eventOutput),this._syncs={},a&&this.addSync(a),b&&this.setOptions(b)}function e(a,b){g[a]&&(this._syncs[a]=new g[a](b),this.pipeSync(a))}var f=a("famous/core/EventHandler");d.DIRECTION_X=0,d.DIRECTION_Y=1,d.DIRECTION_Z=2;var g={};d.register=function(a){for(var b in a){if(g[b]){if(g[b]===a[b])return;throw new Error("this key is registered to a different sync class")}g[b]=a[b]}},d.prototype.setOptions=function(a){for(var b in this._syncs)this._syncs[b].setOptions(a)},d.prototype.pipeSync=function(a){var b=this._syncs[a];this._eventInput.pipe(b),b.pipe(this._eventOutput)},d.prototype.unpipeSync=function(a){var b=this._syncs[a];this._eventInput.unpipe(b),b.unpipe(this._eventOutput)},d.prototype.addSync=function(a){if(a instanceof Array)for(var b=0;b<a.length;b++)e.call(this,a[b]);else if(a instanceof Object)for(var c in a)e.call(this,c,a[c])},c.exports=famous.inputs.GenericSync=d}),define("famous/inputs/MouseSync",["require","exports","module","famous/core/EventHandler"],function(a,b,c){function d(a){this.options=Object.create(d.DEFAULT_OPTIONS),a&&this.setOptions(a),this._eventInput=new i,this._eventOutput=new i,i.setInputHandler(this,this._eventInput),i.setOutputHandler(this,this._eventOutput),this._eventInput.on("mousedown",e.bind(this)),this._eventInput.on("mousemove",f.bind(this)),this._eventInput.on("mouseup",g.bind(this)),this.options.propogate?this._eventInput.on("mouseleave",h.bind(this)):this._eventInput.on("mouseleave",g.bind(this)),this._payload={delta:null,position:null,velocity:null,clientX:0,clientY:0,offsetX:0,offsetY:0},this._position=null,this._prevCoord=void 0,this._prevTime=void 0,this._down=!1,this._moved=!1}function e(a){var b,c;a.preventDefault();var d=a.clientX,e=a.clientY;this._prevCoord=[d,e],this._prevTime=k(),this._down=!0,this._move=!1,void 0!==this.options.direction?(this._position=0,b=0,c=0):(this._position=[0,0],b=[0,0],c=[0,0]);var f=this._payload;f.delta=b,f.position=this._position,f.velocity=c,f.clientX=d,f.clientY=e,f.offsetX=a.offsetX,f.offsetY=a.offsetY,this._eventOutput.emit("start",f)}function f(a){if(this._prevCoord){var b=this._prevCoord,c=this._prevTime,e=a.clientX,f=a.clientY,g=k(),h=e-b[0],i=f-b[1];this.options.rails&&(Math.abs(h)>Math.abs(i)?i=0:h=0);var l,m,n=Math.max(g-c,j),o=h/n,p=i/n,q=this.options.scale;this.options.direction===d.DIRECTION_X?(m=q*h,l=q*o,this._position+=m):this.options.direction===d.DIRECTION_Y?(m=q*i,l=q*p,this._position+=m):(m=[q*h,q*i],l=[q*o,q*p],this._position[0]+=m[0],this._position[1]+=m[1]);var r=this._payload;r.delta=m,r.position=this._position,r.velocity=l,r.clientX=e,r.clientY=f,r.offsetX=a.offsetX,r.offsetY=a.offsetY,this._eventOutput.emit("update",r),this._prevCoord=[e,f],this._prevTime=g,this._move=!0}}function g(){this._down&&(this._eventOutput.emit("end",this._payload),this._prevCoord=void 0,this._prevTime=void 0,this._down=!1,this._move=!1)}function h(a){if(this._down&&this._move){var b=f.bind(this),c=function(a){g.call(this,a),document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",c)}.bind(this,a);document.addEventListener("mousemove",b),document.addEventListener("mouseup",c)}}var i=a("famous/core/EventHandler");d.DEFAULT_OPTIONS={direction:void 0,rails:!1,scale:1,propogate:!0},d.DIRECTION_X=0,d.DIRECTION_Y=1;var j=8,k=Date.now;d.prototype.getOptions=function(){return this.options},d.prototype.setOptions=function(a){void 0!==a.direction&&(this.options.direction=a.direction),void 0!==a.rails&&(this.options.rails=a.rails),void 0!==a.scale&&(this.options.scale=a.scale),void 0!==a.propogate&&(this.options.propogate=a.propogate)},c.exports=famous.inputs.MouseSync=d}),define("famous/inputs/TwoFingerSync.js",["require","exports","module","famous/core/EventHandler"],function(a,b,c){function d(){this._eventInput=new e,this._eventOutput=new e,e.setInputHandler(this,this._eventInput),e.setOutputHandler(this,this._eventOutput),this.touchAEnabled=!1,this.touchAId=0,this.posA=null,this.timestampA=0,this.touchBEnabled=!1,this.touchBId=0,this.posB=null,this.timestampB=0,this._eventInput.on("touchstart",this.handleStart.bind(this)),this._eventInput.on("touchmove",this.handleMove.bind(this)),this._eventInput.on("touchend",this.handleEnd.bind(this)),this._eventInput.on("touchcancel",this.handleEnd.bind(this))}var e=a("famous/core/EventHandler");d.calculateAngle=function(a,b){var c=b[0]-a[0],d=b[1]-a[1];return Math.atan2(d,c)},d.calculateDistance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1];return Math.sqrt(c*c+d*d)},d.calculateCenter=function(a,b){return[(a[0]+b[0])/2,(a[1]+b[1])/2]};var f=Date.now;d.prototype.handleStart=function(a){for(var b=0;b<a.changedTouches.length;b++){var c=a.changedTouches[b];this.touchAEnabled?this.touchBEnabled||(this.touchBId=c.identifier,this.touchBEnabled=!0,this.posB=[c.pageX,c.pageY],this.timestampB=f(),this._startUpdate(a)):(this.touchAId=c.identifier,this.touchAEnabled=!0,this.posA=[c.pageX,c.pageY],this.timestampA=f())}},d.prototype.handleMove=function(a){if(this.touchAEnabled&&this.touchBEnabled){for(var b,c=this.timestampA,d=this.timestampB,e=0;e<a.changedTouches.length;e++){var g=a.changedTouches[e];g.identifier===this.touchAId?(this.posA=[g.pageX,g.pageY],this.timestampA=f(),b=this.timestampA-c):g.identifier===this.touchBId&&(this.posB=[g.pageX,g.pageY],this.timestampB=f(),b=this.timestampB-d)}b&&this._moveUpdate(b)}},d.prototype.handleEnd=function(a){for(var b=0;b<a.changedTouches.length;b++){var c=a.changedTouches[b];(c.identifier===this.touchAId||c.identifier===this.touchBId)&&(this.touchAEnabled&&this.touchBEnabled&&this._eventOutput.emit("end",{touches:[this.touchAId,this.touchBId],angle:this._angle}),this.touchAEnabled=!1,this.touchAId=0,this.touchBEnabled=!1,this.touchBId=0)}},c.exports=famous.inputs.TwoFingerSync=d}),define("famous/inputs/PinchSync.js",["require","exports","module","./TwoFingerSync"],function(a,b,c){function d(a){e.call(this),this.options=Object.create(d.DEFAULT_OPTIONS),a&&this.setOptions(a),this._displacement=0,this._previousDistance=0}var e=a("./TwoFingerSync");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.DEFAULT_OPTIONS={scale:1},d.prototype._startUpdate=function(a){this._previousDistance=e.calculateDistance(this.posA,this.posB),this._displacement=0,this._eventOutput.emit("start",{count:a.touches.length,touches:[this.touchAId,this.touchBId],distance:this._dist,center:e.calculateCenter(this.posA,this.posB)})},d.prototype._moveUpdate=function(a){var b=e.calculateDistance(this.posA,this.posB),c=e.calculateCenter(this.posA,this.posB),d=this.options.scale,f=d*(b-this._previousDistance),g=f/a;this._previousDistance=b,this._displacement+=f,this._eventOutput.emit("update",{delta:f,velocity:g,distance:b,displacement:this._displacement,center:c,touches:[this.touchAId,this.touchBId]})},d.prototype.getOptions=function(){return this.options},d.prototype.setOptions=function(a){void 0!==a.scale&&(this.options.scale=a.scale)},c.exports=famous.inputs.PinchSync=d}),define("famous/inputs/RotateSync.js",["require","exports","module","./TwoFingerSync"],function(a,b,c){function d(a){e.call(this),this.options=Object.create(d.DEFAULT_OPTIONS),a&&this.setOptions(a),this._angle=0,this._previousAngle=0}var e=a("./TwoFingerSync");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.DEFAULT_OPTIONS={scale:1},d.prototype._startUpdate=function(a){this._angle=0,this._previousAngle=e.calculateAngle(this.posA,this.posB);var b=e.calculateCenter(this.posA,this.posB);this._eventOutput.emit("start",{count:a.touches.length,angle:this._angle,center:b,touches:[this.touchAId,this.touchBId]})},d.prototype._moveUpdate=function(a){var b=this.options.scale,c=e.calculateAngle(this.posA,this.posB),d=e.calculateCenter(this.posA,this.posB),f=b*(c-this._previousAngle),g=f/a;this._angle+=f,this._eventOutput.emit("update",{delta:f,velocity:g,angle:this._angle,center:d,touches:[this.touchAId,this.touchBId]}),this._previousAngle=c},d.prototype.getOptions=function(){return this.options},d.prototype.setOptions=function(a){void 0!==a.scale&&(this.options.scale=a.scale)},c.exports=famous.inputs.RotateSync=d}),define("famous/inputs/ScaleSync.js",["require","exports","module","./TwoFingerSync"],function(a,b,c){function d(a){f.call(this),this.options=Object.create(d.DEFAULT_OPTIONS),a&&this.setOptions(a),this._scaleFactor=1,this._startDist=0,this._eventInput.on("pipe",e.bind(this))}function e(){this.touchAId=void 0,this.touchBId=void 0}var f=a("./TwoFingerSync");d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.DEFAULT_OPTIONS={scale:1},d.prototype._startUpdate=function(a){this._scaleFactor=1,this._startDist=f.calculateDistance(this.posA,this.posB),this._eventOutput.emit("start",{count:a.touches.length,touches:[this.touchAId,this.touchBId],distance:this._startDist,center:f.calculateCenter(this.posA,this.posB)})},d.prototype._moveUpdate=function(a){var b=this.options.scale,c=f.calculateDistance(this.posA,this.posB),d=f.calculateCenter(this.posA,this.posB),e=(c-this._startDist)/this._startDist,g=Math.max(1+b*e,0),h=(g-this._scaleFactor)/a;this._eventOutput.emit("update",{delta:e,scale:g,velocity:h,distance:c,center:d,touches:[this.touchAId,this.touchBId]}),this._scaleFactor=g},d.prototype.getOptions=function(){return this.options},d.prototype.setOptions=function(a){void 0!==a.scale&&(this.options.scale=a.scale)},c.exports=famous.inputs.ScaleSync=d}),define("famous/inputs/ScrollSync",["require","exports","module","famous/core/EventHandler","famous/core/Engine"],function(a,b,c){function d(a){this.options=Object.create(d.DEFAULT_OPTIONS),a&&this.setOptions(a),this._payload={delta:null,position:null,velocity:null,slip:!0},this._eventInput=new g,this._eventOutput=new g,g.setInputHandler(this,this._eventInput),g.setOutputHandler(this,this._eventOutput),this._position=void 0===this.options.direction?[0,0]:0,this._prevTime=void 0,this._prevVel=void 0,this._eventInput.on("mousewheel",f.bind(this)),this._eventInput.on("wheel",f.bind(this)),this._inProgress=!1,this._loopBound=!1}function e(){if(this._inProgress&&j()-this._prevTime>this.options.stallTime){this._inProgress=!1;var a=Math.abs(this._prevVel)>=this.options.minimumEndSpeed?this._prevVel:0,b=this._payload;b.position=this._position,b.velocity=a,b.slip=!0,this._eventOutput.emit("end",b)}}function f(a){a.preventDefault(),this._inProgress||(this._inProgress=!0,this._position=void 0===this.options.direction?[0,0]:0,q=this._payload,q.slip=!0,q.position=this._position,q.clientX=a.clientX,q.clientY=a.clientY,q.offsetX=a.offsetX,q.offsetY=a.offsetY,this._eventOutput.emit("start",q),this._loopBound||(h.on("prerender",e.bind(this)),this._loopBound=!0));var b=j(),c=this._prevTime||b,f=void 0!==a.wheelDeltaX?a.wheelDeltaX:-a.deltaX,g=void 0!==a.wheelDeltaY?a.wheelDeltaY:-a.deltaY;1===a.deltaMode&&(f*=this.options.lineHeight,g*=this.options.lineHeight),this.options.rails&&(Math.abs(f)>Math.abs(g)?g=0:f=0);var k,l,m=Math.max(b-c,i),n=f/m,o=g/m,p=this.options.scale;this.options.direction===d.DIRECTION_X?(l=p*f,k=p*n,this._position+=l):this.options.direction===d.DIRECTION_Y?(l=p*g,k=p*o,this._position+=l):(l=[p*f,p*g],k=[p*n,p*o],this._position[0]+=l[0],this._position[1]+=l[1]);var q=this._payload;q.delta=l,q.velocity=k,q.position=this._position,q.slip=!0,this._eventOutput.emit("update",q),this._prevTime=b,this._prevVel=k}var g=a("famous/core/EventHandler"),h=a("famous/core/Engine");d.DEFAULT_OPTIONS={direction:void 0,minimumEndSpeed:1/0,rails:!1,scale:1,stallTime:50,lineHeight:40},d.DIRECTION_X=0,d.DIRECTION_Y=1;
var i=8,j=Date.now;d.prototype.getOptions=function(){return this.options},d.prototype.setOptions=function(a){void 0!==a.direction&&(this.options.direction=a.direction),void 0!==a.minimumEndSpeed&&(this.options.minimumEndSpeed=a.minimumEndSpeed),void 0!==a.rails&&(this.options.rails=a.rails),void 0!==a.scale&&(this.options.scale=a.scale),void 0!==a.stallTime&&(this.options.stallTime=a.stallTime)},c.exports=famous.inputs.ScrollSync=d}),define("famous/inputs/TouchTracker.js",["require","exports","module","famous/core/EventHandler"],function(a,b,c){function d(a,b,c){return{x:a.clientX,y:a.clientY,identifier:a.identifier,origin:b.origin,timestamp:k(),count:b.touches.length,history:c}}function e(a){for(var b=0;b<a.changedTouches.length;b++){var c=a.changedTouches[b],e=d(c,a,null);this.eventOutput.emit("trackstart",e),this.selective||this.touchHistory[c.identifier]||this.track(e)}}function f(a){for(var b=0;b<a.changedTouches.length;b++){var c=a.changedTouches[b],e=this.touchHistory[c.identifier];if(e){var f=d(c,a,e);this.touchHistory[c.identifier].push(f),this.eventOutput.emit("trackmove",f)}}}function g(a){for(var b=0;b<a.changedTouches.length;b++){var c=a.changedTouches[b],e=this.touchHistory[c.identifier];if(e){var f=d(c,a,e);this.eventOutput.emit("trackend",f),delete this.touchHistory[c.identifier]}}}function h(){for(var a in this.touchHistory){var b=this.touchHistory[a];this.eventOutput.emit("trackend",{touch:b[b.length-1].touch,timestamp:Date.now(),count:0,history:b}),delete this.touchHistory[a]}}function i(a){this.selective=a,this.touchHistory={},this.eventInput=new j,this.eventOutput=new j,j.setInputHandler(this,this.eventInput),j.setOutputHandler(this,this.eventOutput),this.eventInput.on("touchstart",e.bind(this)),this.eventInput.on("touchmove",f.bind(this)),this.eventInput.on("touchend",g.bind(this)),this.eventInput.on("touchcancel",g.bind(this)),this.eventInput.on("unpipe",h.bind(this))}var j=a("famous/core/EventHandler"),k=Date.now;i.prototype.track=function(a){this.touchHistory[a.identifier]=[a]},c.exports=famous.inputs.TouchTracker=i}),define("famous/inputs/TouchSync",["require","exports","module","./TouchTracker","famous/core/EventHandler"],function(a,b,c){function d(a){this.options=Object.create(d.DEFAULT_OPTIONS),a&&this.setOptions(a),this._eventOutput=new i,this._touchTracker=new h,i.setOutputHandler(this,this._eventOutput),i.setInputHandler(this,this._touchTracker),this._touchTracker.on("trackstart",e.bind(this)),this._touchTracker.on("trackmove",f.bind(this)),this._touchTracker.on("trackend",g.bind(this)),this._payload={delta:null,position:null,velocity:null,clientX:void 0,clientY:void 0,count:0,touch:void 0},this._position=null}function e(a){var b,c;void 0!==this.options.direction?(this._position=0,b=0,c=0):(this._position=[0,0],b=[0,0],c=[0,0]);var d=this._payload;d.delta=c,d.position=this._position,d.velocity=b,d.clientX=a.x,d.clientY=a.y,d.count=a.count,d.touch=a.identifier,this._eventOutput.emit("start",d)}function f(a){var b=a.history,c=b[b.length-1],e=b[b.length-2],f=e.timestamp,g=c.timestamp,h=c.x-e.x,i=c.y-e.y;this.options.rails&&(Math.abs(h)>Math.abs(i)?i=0:h=0);var k,l,m=Math.max(g-f,j),n=h/m,o=i/m,p=this.options.scale;this.options.direction===d.DIRECTION_X?(l=p*h,k=p*n,this._position+=l):this.options.direction===d.DIRECTION_Y?(l=p*i,k=p*o,this._position+=l):(l=[p*h,p*i],k=[p*n,p*o],this._position[0]+=l[0],this._position[1]+=l[1]);var q=this._payload;q.delta=l,q.velocity=k,q.position=this._position,q.clientX=a.x,q.clientY=a.y,q.count=a.count,q.touch=a.identifier,this._eventOutput.emit("update",q)}function g(a){this._payload.count=a.count,this._eventOutput.emit("end",this._payload)}var h=a("./TouchTracker"),i=a("famous/core/EventHandler");d.DEFAULT_OPTIONS={direction:void 0,rails:!1,scale:1},d.DIRECTION_X=0,d.DIRECTION_Y=1;var j=8;d.prototype.setOptions=function(a){void 0!==a.direction&&(this.options.direction=a.direction),void 0!==a.rails&&(this.options.rails=a.rails),void 0!==a.scale&&(this.options.scale=a.scale)},d.prototype.getOptions=function(){return this.options},c.exports=famous.inputs.TouchSync=d}),define("famous/math/Vector.js",["require","exports","module"],function(a,b,c){function d(a,b,c){return 1===arguments.length&&void 0!==a?this.set(a):(this.x=a||0,this.y=b||0,this.z=c||0),this}function e(a,b,c){return this.x=a,this.y=b,this.z=c,this}function f(a){return e.call(this,a[0],a[1],a[2]||0)}function g(a){return e.call(this,a.x,a.y,a.z)}function h(a){return e.call(this,a,0,0)}var i=new d(0,0,0);d.prototype.add=function(a){return e.call(i,this.x+a.x,this.y+a.y,this.z+a.z)},d.prototype.sub=function(a){return e.call(i,this.x-a.x,this.y-a.y,this.z-a.z)},d.prototype.mult=function(a){return e.call(i,a*this.x,a*this.y,a*this.z)},d.prototype.div=function(a){return this.mult(1/a)},d.prototype.cross=function(a){var b=this.x,c=this.y,d=this.z,f=a.x,g=a.y,h=a.z;return e.call(i,d*g-c*h,b*h-d*f,c*f-b*g)},d.prototype.equals=function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z},d.prototype.rotateX=function(a){var b=this.x,c=this.y,d=this.z,f=Math.cos(a),g=Math.sin(a);return e.call(i,b,c*f-d*g,c*g+d*f)},d.prototype.rotateY=function(a){var b=this.x,c=this.y,d=this.z,f=Math.cos(a),g=Math.sin(a);return e.call(i,d*g+b*f,c,d*f-b*g)},d.prototype.rotateZ=function(a){var b=this.x,c=this.y,d=this.z,f=Math.cos(a),g=Math.sin(a);return e.call(i,b*f-c*g,b*g+c*f,d)},d.prototype.dot=function(a){return this.x*a.x+this.y*a.y+this.z*a.z},d.prototype.normSquared=function(){return this.dot(this)},d.prototype.norm=function(){return Math.sqrt(this.normSquared())},d.prototype.normalize=function(a){0===arguments.length&&(a=1);var b=this.norm();return b>1e-7?g.call(i,this.mult(a/b)):e.call(i,a,0,0)},d.prototype.clone=function(){return new d(this)},d.prototype.isZero=function(){return!(this.x||this.y||this.z)},d.prototype.set=function(a){return a instanceof Array?f.call(this,a):"number"==typeof a?h.call(this,a):g.call(this,a)},d.prototype.setXYZ=function(){return e.apply(this,arguments)},d.prototype.set1D=function(a){return h.call(this,a)},d.prototype.put=function(a){this===i?g.call(a,i):g.call(a,this)},d.prototype.clear=function(){return e.call(this,0,0,0)},d.prototype.cap=function j(j){if(1/0===j)return g.call(i,this);var a=this.norm();return a>j?g.call(i,this.mult(j/a)):g.call(i,this)},d.prototype.project=function(a){return a.mult(this.dot(a))},d.prototype.reflectAcross=function(a){return a.normalize().put(a),g(i,this.sub(this.project(a).mult(2)))},d.prototype.get=function(){return[this.x,this.y,this.z]},d.prototype.get1D=function(){return this.x},c.exports=famous.math.Vector=d}),define("famous/math/Matrix",["require","exports","module","./Vector"],function(a,b,c){function d(a){return this.values=a||[[1,0,0],[0,1,0],[0,0,1]],this}var e=a("./Vector"),f=new d,g=new e;d.prototype.get=function(){return this.values},d.prototype.set=function(a){this.values=a},d.prototype.vectorMultiply=function(a){var b=this.get(),c=a.x,d=a.y,e=a.z,f=b[0],h=b[1],i=b[2],j=f[0],k=f[1],l=f[2],m=h[0],n=h[1],o=h[2],p=i[0],q=i[1],r=i[2];return g.setXYZ(j*c+k*d+l*e,m*c+n*d+o*e,p*c+q*d+r*e)},d.prototype.multiply=function(a){for(var b=this.get(),c=[[]],d=0;3>d;d++){c[d]=[];for(var e=0;3>e;e++){for(var g=0,h=0;3>h;h++)g+=b[d][h]*a[h][e];c[d][e]=g}}return f.set(c)},d.prototype.transpose=function(){for(var a=[],b=this.get(),c=0;3>c;c++)for(var d=0;3>d;d++)a[c][d]=b[d][c];return f.set(a)},d.prototype.clone=function(){for(var a=this.get(),b=[],c=0;3>c;c++)b[c]=a[c].slice();return new d(b)},c.exports=famous.math.Matrix=d}),define("famous/math/Quaternion",["require","exports","module","./Matrix"],function(a,b,c){function d(a,b,c,d){return 1===arguments.length?this.set(a):(this.w=void 0!==a?a:1,this.x=void 0!==b?b:0,this.y=void 0!==c?c:0,this.z=void 0!==d?d:0),this}var e=a("./Matrix"),f=new d(1,0,0,0);d.prototype.add=function(a){return f.setWXYZ(this.w+a.w,this.x+a.x,this.y+a.y,this.z+a.z)},d.prototype.sub=function(a){return f.setWXYZ(this.w-a.w,this.x-a.x,this.y-a.y,this.z-a.z)},d.prototype.scalarDivide=function(a){return this.scalarMultiply(1/a)},d.prototype.scalarMultiply=function(a){return f.setWXYZ(this.w*a,this.x*a,this.y*a,this.z*a)},d.prototype.multiply=function(a){var b=this.x,c=this.y,d=this.z,e=this.w,g=a.x,h=a.y,i=a.z,j=a.w||0;return f.setWXYZ(e*j-b*g-c*h-d*i,b*j+g*e+h*d-c*i,c*j+h*e+b*i-g*d,d*j+i*e+g*c-b*h)};var g=new d(1,0,0,0);d.prototype.rotateVector=function(a){return g.set(this.conj()),f.set(this.multiply(a).multiply(g))},d.prototype.inverse=function(){return f.set(this.conj().scalarDivide(this.normSquared()))},d.prototype.negate=function(){return this.scalarMultiply(-1)},d.prototype.conj=function(){return f.setWXYZ(this.w,-this.x,-this.y,-this.z)},d.prototype.normalize=function(a){return a=void 0===a?1:a,this.scalarDivide(a*this.norm())},d.prototype.makeFromAngleAndAxis=function(a,b){var c=b.normalize(),d=.5*a,e=-Math.sin(d);return this.x=e*c.x,this.y=e*c.y,this.z=e*c.z,this.w=Math.cos(d),this},d.prototype.setWXYZ=function(a,b,c,d){return f.clear(),this.w=a,this.x=b,this.y=c,this.z=d,this},d.prototype.set=function(a){return a instanceof Array?(this.w=0,this.x=a[0],this.y=a[1],this.z=a[2]):(this.w=a.w,this.x=a.x,this.y=a.y,this.z=a.z),this!==f&&f.clear(),this},d.prototype.put=function(a){a.set(f)},d.prototype.clone=function(){return new d(this)},d.prototype.clear=function(){return this.w=1,this.x=0,this.y=0,this.z=0,this},d.prototype.isEqual=function(a){return a.w===this.w&&a.x===this.x&&a.y===this.y&&a.z===this.z},d.prototype.dot=function(a){return this.w*a.w+this.x*a.x+this.y*a.y+this.z*a.z},d.prototype.normSquared=function(){return this.dot(this)},d.prototype.norm=function(){return Math.sqrt(this.normSquared())},d.prototype.isZero=function(){return!(this.x||this.y||this.z)},d.prototype.getTransform=function(){var a=this.normalize(1),b=a.x,c=a.y,d=a.z,e=a.w;return[1-2*c*c-2*d*d,2*b*c-2*d*e,2*b*d+2*c*e,0,2*b*c+2*d*e,1-2*b*b-2*d*d,2*c*d-2*b*e,0,2*b*d-2*c*e,2*c*d+2*b*e,1-2*b*b-2*c*c,0,0,0,0,1]};var h=new e;d.prototype.getMatrix=function(){var a=this.normalize(1),b=a.x,c=a.y,d=a.z,e=a.w;return h.set([[1-2*c*c-2*d*d,2*b*c+2*d*e,2*b*d-2*c*e],[2*b*c-2*d*e,1-2*b*b-2*d*d,2*c*d+2*b*e],[2*b*d+2*c*e,2*c*d-2*b*e,1-2*b*b-2*c*c]])};var i=1e-5;d.prototype.slerp=function(a,b){var c,d,e,g,h;return d=this.dot(a),1-d>i?(c=Math.acos(d),e=Math.sin(c),g=Math.sin((1-b)*c)/e,h=Math.sin(b*c)/e):(g=1-b,h=b),f.set(this.scalarMultiply(g/h).add(a).multiply(h))},c.exports=famous.math.Quaternion=d}),define("famous/math/Random.js",["require","exports","module"],function(a,b,c){function d(a,b){return a+f()*(b-a)}function e(a,b){return a+f()*(b-a+1)>>0}var f=Math.random,g={};g.integer=function(a,b,c){if(a=void 0!==a?a:0,b=void 0!==b?b:1,void 0!==c){for(var d=[],f=0;c>f;f++)d.push(e(a,b));return d}return e(a,b)},g.range=function(a,b,c){if(a=void 0!==a?a:0,b=void 0!==b?b:1,void 0!==c){for(var e=[],f=0;c>f;f++)e.push(d(a,b));return e}return d(a,b)},g.sign=function(a){return a=void 0!==a?a:.5,f()<a?1:-1},g.bool=function(a){return a=void 0!==a?a:.5,f()<a},c.exports=famous.math.Random=g}),define("famous/math/Utilities",["require","exports","module"],function(a,b,c){var d={};d.clamp=function(a,b){return Math.max(Math.min(a,b[1]),b[0])},d.length=function(a){for(var b=0,c=0;c<a.length;c++)b+=a[c]*a[c];return Math.sqrt(b)},c.exports=famous.math.Utilities=d}),define("famous/modifiers/Draggable.js",["require","exports","module","famous/core/Transform","famous/transitions/Transitionable","famous/core/EventHandler","famous/math/Utilities","famous/inputs/GenericSync","famous/inputs/MouseSync","famous/inputs/TouchSync"],function(a,b,c){function d(a){this.options=Object.create(d.DEFAULT_OPTIONS),a&&this.setOptions(a),this._positionState=new k([0,0]),this._differential=[0,0],this._active=!0,this.sync=new n(["mouse","touch"],{scale:this.options.scale}),this.eventOutput=new l,l.setInputHandler(this,this.sync),l.setOutputHandler(this,this.eventOutput),i.call(this)}function e(a){var b=this.options,c=b.projection,d=b.snapX,e=b.snapY,f=c&q.x?a[0]:0,g=c&q.y?a[1]:0;return d>0&&(f-=f%d),e>0&&(g-=g%e),[f,g]}function f(){this._active&&(this._positionState.isActive()&&this._positionState.halt(),this.eventOutput.emit("start",{position:this.getPosition()}))}function g(a){if(this._active){var b=this.options;this._differential=a.position;var c=e.call(this,this._differential);this._differential[0]-=c[0],this._differential[1]-=c[1];var d=this.getPosition();if(d[0]+=c[0],d[1]+=c[1],b.xRange){var f=[b.xRange[0]+.5*b.snapX,b.xRange[1]-.5*b.snapX];d[0]=r(d[0],f)}if(b.yRange){var g=[b.yRange[0]+.5*b.snapY,b.yRange[1]-.5*b.snapY];d[1]=r(d[1],g)}this.eventOutput.emit("update",{position:d})}}function h(){this._active&&this.eventOutput.emit("end",{position:this.getPosition()})}function i(){this.sync.on("start",f.bind(this)),this.sync.on("update",g.bind(this)),this.sync.on("end",h.bind(this))}var j=a("famous/core/Transform"),k=a("famous/transitions/Transitionable"),l=a("famous/core/EventHandler"),m=a("famous/math/Utilities"),n=a("famous/inputs/GenericSync"),o=a("famous/inputs/MouseSync"),p=a("famous/inputs/TouchSync");n.register({mouse:o,touch:p});var q={x:1,y:2};d.DIRECTION_X=q.x,d.DIRECTION_Y=q.y;var r=m.clamp;d.DEFAULT_OPTIONS={projection:q.x|q.y,scale:1,xRange:null,yRange:null,snapX:0,snapY:0,transition:{duration:0}},d.prototype.setOptions=function(a){var b=this.options;if(void 0!==a.projection){var c=a.projection;this.options.projection=0,["x","y"].forEach(function(a){-1!==c.indexOf(a)&&(b.projection|=q[a])})}void 0!==a.scale&&(b.scale=a.scale,this.sync.setOptions({scale:a.scale})),void 0!==a.xRange&&(b.xRange=a.xRange),void 0!==a.yRange&&(b.yRange=a.yRange),void 0!==a.snapX&&(b.snapX=a.snapX),void 0!==a.snapY&&(b.snapY=a.snapY)},d.prototype.getPosition=function(){return this._positionState.get()},d.prototype.setRelativePosition=function(a,b,c){var d=this.getPosition(),e=[d[0]+a[0],d[1]+a[1]];this.setPosition(e,b,c)},d.prototype.setPosition=function(a,b,c){this._positionState.isActive()&&this._positionState.halt(),this._positionState.set(a,b,c)},d.prototype.activate=function(){this._active=!0},d.prototype.deactivate=function(){this._active=!1},d.prototype.toggle=function(){this._active=!this._active},d.prototype.modify=function(a){var b=this.getPosition();return{transform:j.translate(b[0],b[1]),target:a}},c.exports=famous.modifiers.Draggable=d}),define("famous/modifiers/Fader.js",["require","exports","module","famous/transitions/Transitionable","famous/core/OptionsManager"],function(a,b,c){function d(a,b){this.options=Object.create(d.DEFAULT_OPTIONS),this._optionsManager=new f(this.options),a&&this.setOptions(a),b||(b=0),this.transitionHelper=new e(b)}var e=a("famous/transitions/Transitionable"),f=a("famous/core/OptionsManager");d.DEFAULT_OPTIONS={cull:!1,transition:!0,pulseInTransition:!0,pulseOutTransition:!0},d.prototype.setOptions=function(a){return this._optionsManager.setOptions(a)},d.prototype.show=function(a,b){a=a||this.options.transition,this.set(1,a,b)},d.prototype.hide=function(a,b){a=a||this.options.transition,this.set(0,a,b)},d.prototype.set=function(a,b,c){this.halt(),this.transitionHelper.set(a,b,c)},d.prototype.halt=function(){this.transitionHelper.halt()},d.prototype.isVisible=function(){return this.transitionHelper.get()>0},d.prototype.modify=function(a){var b=this.transitionHelper.get();return this.options.cull&&!b?void 0:{opacity:b,target:a}},c.exports=famous.modifiers.Fader=d}),define("famous/modifiers/ModifierChain.js",["require","exports","module"],function(a,b,c){function d(){this._chain=[],arguments.length&&this.addModifier.apply(this,arguments)}d.prototype.addModifier=function(){Array.prototype.push.apply(this._chain,arguments)},d.prototype.removeModifier=function(a){var b=this._chain.indexOf(a);0>b||this._chain.splice(b,1)},d.prototype.modify=function(a){for(var b=this._chain,c=a,d=0;d<b.length;d++)c=b[d].modify(c);return c},c.exports=famous.modifiers.ModifierChain=d}),define("famous/modifiers/StateModifier.js",["require","exports","module","famous/core/Modifier","famous/core/Transform","famous/transitions/Transitionable","famous/transitions/TransitionableTransform"],function(a,b,c){function d(a){this._transformState=new h(f.identity),this._opacityState=new g(1),this._originState=new g([0,0]),this._alignState=new g([0,0]),this._sizeState=new g([0,0]),this._modifier=new e({transform:this._transformState,opacity:this._opacityState,origin:null,align:null,size:null}),this._hasOrigin=!1,this._hasAlign=!1,this._hasSize=!1,a&&(a.transform&&this.setTransform(a.transform),void 0!==a.opacity&&this.setOpacity(a.opacity),a.origin&&this.setOrigin(a.origin),a.align&&this.setAlign(a.align),a.size&&this.setSize(a.size))}var e=a("famous/core/Modifier"),f=a("famous/core/Transform"),g=a("famous/transitions/Transitionable"),h=a("famous/transitions/TransitionableTransform");d.prototype.setTransform=function(a,b,c){return this._transformState.set(a,b,c),this},d.prototype.setOpacity=function(a,b,c){return this._opacityState.set(a,b,c),this},d.prototype.setOrigin=function(a,b,c){return null===a?(this._hasOrigin&&(this._modifier.originFrom(null),this._hasOrigin=!1),this):(this._hasOrigin||(this._hasOrigin=!0,this._modifier.originFrom(this._originState)),this._originState.set(a,b,c),this)},d.prototype.setAlign=function(a,b,c){return null===a?(this._hasAlign&&(this._modifier.alignFrom(null),this._hasAlign=!1),this):(this._hasAlign||(this._hasAlign=!0,this._modifier.alignFrom(this._alignState)),this._alignState.set(a,b,c),this)},d.prototype.setSize=function(a,b,c){return null===a?(this._hasSize&&(this._modifier.sizeFrom(null),this._hasSize=!1),this):(this._hasSize||(this._hasSize=!0,this._modifier.sizeFrom(this._sizeState)),this._sizeState.set(a,b,c),this)},d.prototype.halt=function(){this._transformState.halt(),this._opacityState.halt(),this._originState.halt(),this._alignState.halt(),this._sizeState.halt()},d.prototype.getTransform=function(){return this._transformState.get()},d.prototype.getFinalTransform=function(){return this._transformState.getFinal()},d.prototype.getOpacity=function(){return this._opacityState.get()},d.prototype.getOrigin=function(){return this._hasOrigin?this._originState.get():null},d.prototype.getAlign=function(){return this._hasAlign?this._alignState.get():null},d.prototype.getSize=function(){return this._hasSize?this._sizeState.get():null},d.prototype.modify=function(a){return this._modifier.modify(a)},c.exports=famous.modifiers.StateModifier=d}),define("famous/physics/integrators/SymplecticEuler.js",["require","exports","module","famous/core/OptionsManager"],function(a,b,c){function d(a){this.options=Object.create(d.DEFAULT_OPTIONS),this._optionsManager=new e(this.options),a&&this.setOptions(a)}var e=a("famous/core/OptionsManager");d.DEFAULT_OPTIONS={velocityCap:void 0,angularVelocityCap:void 0},d.prototype.setOptions=function(a){this._optionsManager.patch(a)},d.prototype.getOptions=function(){return this._optionsManager.value()},d.prototype.integrateVelocity=function(a,b){var c=a.velocity,d=a.inverseMass,e=a.force;e.isZero()||(c.add(e.mult(b*d)).put(c),e.clear())},d.prototype.integratePosition=function(a,b){var c=a.position,d=a.velocity;this.options.velocityCap&&d.cap(this.options.velocityCap).put(d),c.add(d.mult(b)).put(c)},d.prototype.integrateAngularMomentum=function(a,b){var c=a.angularMomentum,d=a.torque;d.isZero()||(this.options.angularVelocityCap&&d.cap(this.options.angularVelocityCap).put(d),c.add(d.mult(b)).put(c),d.clear())},d.prototype.integrateOrientation=function(a,b){var c=a.orientation,d=a.angularVelocity;d.isZero()||c.add(c.multiply(d).scalarMultiply(.5*b)).put(c)},c.exports=famous.physics.integrators.SymplecticEuler=d}),define("famous/physics/bodies/Particle.js",["require","exports","module","famous/math/Vector","famous/core/Transform","famous/core/EventHandler","../integrators/SymplecticEuler"],function(a,b,c){function d(a){a=a||{},this.position=new f,this.velocity=new f,this.force=new f;var b=d.DEFAULT_OPTIONS;this.setPosition(a.position||b.position),this.setVelocity(a.velocity||b.velocity),this.force.set(a.force||[0,0,0]),this.mass=void 0!==a.mass?a.mass:b.mass,this.axis=void 0!==a.axis?a.axis:b.axis,this.inverseMass=1/this.mass,this._isSleeping=!1,this._engine=null,this._eventOutput=null,this._positionGetter=null,this.transform=g.identity.slice(),this._spec={transform:this.transform,target:null}}function e(){this._eventOutput=new h,this._eventOutput.bindThis(this),h.setOutputHandler(this,this._eventOutput)}var f=a("famous/math/Vector"),g=a("famous/core/Transform"),h=a("famous/core/EventHandler"),i=a("../integrators/SymplecticEuler");d.DEFAULT_OPTIONS={position:[0,0,0],velocity:[0,0,0],mass:1,axis:void 0},d.SLEEP_TOLERANCE=1e-7,d.AXES={X:0,Y:1,Z:2},d.INTEGRATOR=new i;var j={start:"start",update:"update",end:"end"},k=function(){return Date.now}();d.prototype.sleep=function(){this._isSleeping||(this.emit(j.end,this),this._isSleeping=!0)},d.prototype.wake=function(){this._isSleeping&&(this.emit(j.start,this),this._isSleeping=!1,this._prevTime=k())},d.prototype.isBody=!1,d.prototype.setPosition=function(a){this.position.set(a)},d.prototype.setPosition1D=function(a){this.position.x=a},d.prototype.getPosition=function(){return this._positionGetter instanceof Function&&this.setPosition(this._positionGetter()),this._engine.step(),this.position.get()},d.prototype.getPosition1D=function(){return this._engine.step(),this.position.x},d.prototype.positionFrom=function(a){this._positionGetter=a},d.prototype.setVelocity=function(a){this.velocity.set(a),this.wake()},d.prototype.setVelocity1D=function(a){this.velocity.x=a,this.wake()},d.prototype.getVelocity=function(){return this.velocity.get()},d.prototype.getVelocity1D=function(){return this.velocity.x},d.prototype.setMass=function(a){this.mass=a,this.inverseMass=1/a},d.prototype.getMass=function(){return this.mass},d.prototype.reset=function(a,b){this.setPosition(a||[0,0,0]),this.setVelocity(b||[0,0,0])},d.prototype.applyForce=function(a){a.isZero()||(this.force.add(a).put(this.force),this.wake())},d.prototype.applyImpulse=function(a){if(!a.isZero()){var b=this.velocity;b.add(a.mult(this.inverseMass)).put(b)}},d.prototype.integrateVelocity=function(a){d.INTEGRATOR.integrateVelocity(this,a)},d.prototype.integratePosition=function(a){d.INTEGRATOR.integratePosition(this,a)},d.prototype._integrate=function(a){this.integrateVelocity(a),this.integratePosition(a)},d.prototype.getEnergy=function(){return.5*this.mass*this.velocity.normSquared()},d.prototype.getTransform=function(){this._engine.step();var a=this.position,b=this.axis,c=this.transform;return void 0!==b&&(b&~d.AXES.X&&(a.x=0),b&~d.AXES.Y&&(a.y=0),b&~d.AXES.Z&&(a.z=0)),c[12]=a.x,c[13]=a.y,c[14]=a.z,c},d.prototype.modify=function(a){var b=this._spec;return b.transform=this.getTransform(),b.target=a,b},d.prototype.emit=function(a,b){this._eventOutput&&this._eventOutput.emit(a,b)},d.prototype.on=function(){return e.call(this),this.on.apply(this,arguments)},d.prototype.removeListener=function(){return e.call(this),this.removeListener.apply(this,arguments)},d.prototype.pipe=function(){return e.call(this),this.pipe.apply(this,arguments)},d.prototype.unpipe=function(){return e.call(this),this.unpipe.apply(this,arguments)},c.exports=famous.physics.bodies.Particle=d}),define("famous/physics/bodies/Body",["require","exports","module","./Particle","famous/core/Transform","famous/math/Vector","famous/math/Quaternion","famous/math/Matrix"],function(a,b,c){function d(a){e.call(this,a),a=a||{},this.orientation=new h,this.angularVelocity=new g,this.angularMomentum=new g,this.torque=new g,a.orientation&&this.orientation.set(a.orientation),a.angularVelocity&&this.angularVelocity.set(a.angularVelocity),a.angularMomentum&&this.angularMomentum.set(a.angularMomentum),a.torque&&this.torque.set(a.torque),this.setMomentsOfInertia(),this.angularVelocity.w=0,this.pWorld=new g}var e=a("./Particle"),f=a("famous/core/Transform"),g=a("famous/math/Vector"),h=a("famous/math/Quaternion"),i=a("famous/math/Matrix");d.DEFAULT_OPTIONS=e.DEFAULT_OPTIONS,d.DEFAULT_OPTIONS.orientation=[0,0,0,1],d.DEFAULT_OPTIONS.angularVelocity=[0,0,0],d.AXES=e.AXES,d.SLEEP_TOLERANCE=e.SLEEP_TOLERANCE,d.INTEGRATOR=e.INTEGRATOR,d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype.isBody=!0,d.prototype.setMass=function(){e.prototype.setMass.apply(this,arguments),this.setMomentsOfInertia()},d.prototype.setMomentsOfInertia=function(){this.inertia=new i,this.inverseInertia=new i},d.prototype.updateAngularVelocity=function(){this.angularVelocity.set(this.inverseInertia.vectorMultiply(this.angularMomentum))},d.prototype.toWorldCoordinates=function(a){return this.pWorld.set(this.orientation.rotateVector(a))},d.prototype.getEnergy=function(){return e.prototype.getEnergy.call(this)+.5*this.inertia.vectorMultiply(this.angularVelocity).dot(this.angularVelocity)},d.prototype.reset=function(a,b,c,d){e.prototype.reset.call(this,a,b),this.angularVelocity.clear(),this.setOrientation(c||[1,0,0,0]),this.setAngularMomentum(d||[0,0,0])},d.prototype.setOrientation=function(a){this.orientation.set(a)},d.prototype.setAngularVelocity=function(a){this.wake(),this.angularVelocity.set(a)},d.prototype.setAngularMomentum=function(a){this.wake(),this.angularMomentum.set(a)},d.prototype.applyForce=function(a,b){e.prototype.applyForce.call(this,a),void 0!==b&&this.applyTorque(b.cross(a))},d.prototype.applyTorque=function(a){this.wake(),this.torque.set(this.torque.add(a))},d.prototype.getTransform=function(){return f.thenMove(this.orientation.getTransform(),f.getTranslate(e.prototype.getTransform.call(this)))},d.prototype._integrate=function(a){e.prototype._integrate.call(this,a),this.integrateAngularMomentum(a),this.updateAngularVelocity(a),this.integrateOrientation(a)},d.prototype.integrateAngularMomentum=function(a){d.INTEGRATOR.integrateAngularMomentum(this,a)},d.prototype.integrateOrientation=function(a){d.INTEGRATOR.integrateOrientation(this,a)},c.exports=famous.physics.bodies.Body=d}),define("famous/physics/bodies/Circle.js",["require","exports","module","./Body","famous/math/Matrix"],function(a,b,c){function d(a){a=a||{},this.setRadius(a.radius||0),e.call(this,a)}var e=a("./Body"),f=a("famous/math/Matrix");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype.setRadius=function(a){this.radius=a,this.size=[2*this.radius,2*this.radius],this.setMomentsOfInertia()},d.prototype.setMomentsOfInertia=function(){var a=this.mass,b=this.radius;this.inertia=new f([[.25*a*b*b,0,0],[0,.25*a*b*b,0],[0,0,.5*a*b*b]]),this.inverseInertia=new f([[4/(a*b*b),0,0],[0,4/(a*b*b),0],[0,0,2/(a*b*b)]])},c.exports=famous.physics.bodies.Circle=d}),define("famous/physics/bodies/Rectangle.js",["require","exports","module","./Body","famous/math/Matrix"],function(a,b,c){function d(a){a=a||{},this.size=a.size||[0,0],e.call(this,a)}var e=a("./Body"),f=a("famous/math/Matrix");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype.setSize=function(a){this.size=a,this.setMomentsOfInertia()},d.prototype.setMomentsOfInertia=function(){var a=this.mass,b=this.size[0],c=this.size[1];this.inertia=new f([[a*c*c/12,0,0],[0,a*b*b/12,0],[0,0,a*(b*b+c*c)/12]]),this.inverseInertia=new f([[12/(a*c*c),0,0],[0,12/(a*b*b),0],[0,0,12/(a*(b*b+c*c))]])},c.exports=famous.physics.bodies.Rectangle=d}),define("famous/physics/constraints/Constraint.js",["require","exports","module","famous/core/EventHandler"],function(a,b,c){function d(){this.options=this.options||{},this._energy=0,this._eventOutput=null}function e(){this._eventOutput=new f,this._eventOutput.bindThis(this),f.setOutputHandler(this,this._eventOutput)}var f=a("famous/core/EventHandler");d.prototype.setOptions=function(a){for(var b in a)this.options[b]=a[b]},d.prototype.applyConstraint=function(){},d.prototype.getEnergy=function(){return this._energy},d.prototype.setEnergy=function(a){this._energy=a},d.prototype.on=function(){return e.call(this),this.on.apply(this,arguments)},d.prototype.addListener=function(){return e.call(this),this.addListener.apply(this,arguments)},d.prototype.pipe=function(){return e.call(this),this.pipe.apply(this,arguments)},d.prototype.removeListener=function(){return this.removeListener.apply(this,arguments)},d.prototype.unpipe=function(){return this.unpipe.apply(this,arguments)},c.exports=famous.physics.constraints.Constraint=d}),define("famous/physics/constraints/Collision.js",["require","exports","module","./Constraint","famous/math/Vector"],function(a,b,c){function d(a){this.options=Object.create(d.DEFAULT_OPTIONS),a&&this.setOptions(a),this.normal=new f,this.pDiff=new f,this.vDiff=new f,this.impulse1=new f,this.impulse2=new f,e.call(this)}var e=a("./Constraint"),f=a("famous/math/Vector");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.DEFAULT_OPTIONS={restitution:.5,drift:.5,slop:0},d.prototype.setOptions=function(a){for(var b in a)this.options[b]=a[b]},d.prototype.applyConstraint=function(a,b,c){if(void 0!==b)for(var d=b.velocity,e=b.position,f=b.inverseMass,g=b.radius,h=this.options,i=h.drift,j=-h.slop,k=h.restitution,l=this.normal,m=this.pDiff,n=this.vDiff,o=this.impulse1,p=this.impulse2,q=0;q<a.length;q++){var r=a[q];if(r!==b){var s=r.velocity,t=r.position,u=r.inverseMass,v=r.radius;m.set(t.sub(e)),n.set(s.sub(d));var w=m.norm(),x=w-(g+v),y=1/(f+u),z=0;if(0>x){if(l.set(m.normalize()),this._eventOutput){var A={target:r,source:b,overlap:x,normal:l};this._eventOutput.emit("preCollision",A),this._eventOutput.emit("collision",A)}var B=j>=x?((1+k)*l.dot(n)+i/c*(x-j))/(z+c/y):(1+k)*l.dot(n)/(z+c/y);l.mult(c*B).put(o),o.mult(-1).put(p),b.applyImpulse(o),r.applyImpulse(p),this._eventOutput&&this._eventOutput.emit("postCollision",A)}}}},c.exports=famous.physics.constraints.Collision=d}),define("famous/physics/constraints/Curve.js",["require","exports","module","./Constraint","famous/math/Vector"],function(a,b,c){function d(a){this.options=Object.create(d.DEFAULT_OPTIONS),a&&this.setOptions(a),this.J=new f,this.impulse=new f,e.call(this)}var e=a("./Constraint"),f=a("famous/math/Vector");d.prototype=Object.create(e.prototype),d.prototype.constructor=d;var g=1e-7,h=Math.PI;d.DEFAULT_OPTIONS={equation:function(){return 0},plane:function(a,b,c){return c},period:0,dampingRatio:0},d.prototype.setOptions=function(a){for(var b in a)this.options[b]=a[b]},d.prototype.applyConstraint=function(a,b,c){for(var d=this.options,e=this.impulse,f=this.J,i=d.equation,j=d.plane,k=d.dampingRatio,l=d.period,m=0;m<a.length;m++){var n,o,p=a[m],q=p.velocity,r=p.position,s=p.mass;if(0===l)n=0,o=1;else{var t=4*s*h*k/l,u=4*s*h*h/(l*l);n=1/(t+c*u),o=c*u/(t+c*u)}var v=r.x,w=r.y,x=r.z,y=i(v,w,x),z=(i(v+g,r,r)-y)/g,A=(i(v,w+g,r)-y)/g,B=(i(v,w,r+g)-y)/g,C=j(v,w,x),D=(j(v+g,w,x)-C)/g,E=(j(v,w+g,x)-C)/g,F=(j(v,w,x+g)-C)/g;f.setXYZ(z+D,A+E,B+F);var G=o/c*(y+C),H=-(f.dot(q)+G)/(n+c*f.normSquared()/s);e.set(f.mult(c*H)),p.applyImpulse(e)}},c.exports=famous.physics.constraints.Curve=d}),define("famous/physics/constraints/Distance.js",["require","exports","module","./Constraint","famous/math/Vector"],function(a,b,c){function d(a){this.options=Object.create(this.constructor.DEFAULT_OPTIONS),a&&this.setOptions(a),this.impulse=new f,this.normal=new f,this.diffP=new f,this.diffV=new f,e.call(this)}var e=a("./Constraint"),f=a("famous/math/Vector");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.DEFAULT_OPTIONS={anchor:null,length:0,minLength:0,period:0,dampingRatio:0};var g=Math.PI;d.prototype.setOptions=function(a){a.anchor&&(a.anchor.position instanceof f&&(this.options.anchor=a.anchor.position),a.anchor instanceof f&&(this.options.anchor=a.anchor),a.anchor instanceof Array&&(this.options.anchor=new f(a.anchor))),void 0!==a.length&&(this.options.length=a.length),void 0!==a.dampingRatio&&(this.options.dampingRatio=a.dampingRatio),void 0!==a.period&&(this.options.period=a.period),void 0!==a.minLength&&(this.options.minLength=a.minLength)},d.prototype.setAnchor=function(a){this.options.anchor||(this.options.anchor=new f),this.options.anchor.set(a)
},d.prototype.applyConstraint=function(a,b,c){var d,e,f=this.normal,h=this.diffP,i=this.diffV,j=this.impulse,k=this.options,l=k.dampingRatio,m=k.period,n=k.minLength;if(b){var o=b.velocity;d=b.position,e=b.inverseMass}else d=this.options.anchor,e=0;for(var p=this.options.length,q=0;q<a.length;q++){var r=a[q],s=r.velocity,t=r.position,u=r.inverseMass;h.set(t.sub(d)),f.set(h.normalize());var v=h.norm()-p;if(Math.abs(v)<n)return;i.set(b?s.sub(o):s);var w,x,y=1/(u+e);if(0===m)w=0,x=1;else{var z=4*y*g*l/m,A=4*y*g*g/(m*m);w=1/(z+c*A),x=c*A/(z+c*A)}var B=x/c*v,C=-(f.dot(i)+B)/(w+c/y);j.set(f.mult(c*C)),r.applyImpulse(j),b&&b.applyImpulse(j.mult(-1))}},c.exports=famous.physics.constraints.Distance=d}),define("famous/physics/constraints/Snap",["require","exports","module","./Constraint","famous/math/Vector"],function(a,b,c){function d(a){this.options=Object.create(this.constructor.DEFAULT_OPTIONS),a&&this.setOptions(a),this.pDiff=new g,this.vDiff=new g,this.impulse1=new g,this.impulse2=new g,f.call(this)}function e(a,b,c){return Math.abs(a.dot(b)/c)}var f=a("./Constraint"),g=a("famous/math/Vector");d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.DEFAULT_OPTIONS={period:300,dampingRatio:.1,length:0,anchor:void 0};var h=Math.PI;d.prototype.setOptions=function(a){void 0!==a.anchor&&(a.anchor instanceof g&&(this.options.anchor=a.anchor),a.anchor.position instanceof g&&(this.options.anchor=a.anchor.position),a.anchor instanceof Array&&(this.options.anchor=new g(a.anchor))),void 0!==a.length&&(this.options.length=a.length),void 0!==a.dampingRatio&&(this.options.dampingRatio=a.dampingRatio),void 0!==a.period&&(this.options.period=a.period)},d.prototype.setAnchor=function(a){void 0!==this.options.anchor&&(this.options.anchor=new g),this.options.anchor.set(a)},d.prototype.getEnergy=function(a,b){var c=this.options,d=c.length,e=c.anchor||b.position,f=Math.pow(2*h/c.period,2),g=e.sub(a.position).norm()-d;return.5*f*g*g},d.prototype.applyConstraint=function(a,b,c){for(var d=this.options,f=this.pDiff,g=this.vDiff,i=this.impulse1,j=this.impulse2,k=d.length,l=d.anchor||b.position,m=d.period,n=d.dampingRatio,o=0;o<a.length;o++){var p=a[o],q=p.position,r=p.velocity,s=p.mass,t=p.inverseMass;f.set(q.sub(l));var u,v=f.norm()-k;if(b){var w=b.inverseMass,x=b.velocity;g.set(r.sub(x)),u=1/(t+w)}else g.set(r),u=s;var y,z;if(0===this.options.period)y=0,z=1;else{var A=4*u*h*h/(m*m),B=4*u*h*n/m;z=c*A/(B+c*A),y=1/(B+c*A)}var C=z/c*v;f.normalize(-C).sub(g).mult(c/(y+c/u)).put(i),p.applyImpulse(i),b&&(i.mult(-1).put(j),b.applyImpulse(j)),this.setEnergy(e(i,f,c))}},c.exports=famous.physics.constraints.Snap=d}),define("famous/physics/constraints/Surface.js",["require","exports","module","./Constraint","famous/math/Vector"],function(a,b,c){function d(a){this.options=Object.create(d.DEFAULT_OPTIONS),a&&this.setOptions(a),this.J=new f,this.impulse=new f,e.call(this)}var e=a("./Constraint"),f=a("famous/math/Vector");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.DEFAULT_OPTIONS={equation:void 0,period:0,dampingRatio:0};var g=1e-7,h=Math.PI;d.prototype.setOptions=function(a){for(var b in a)this.options[b]=a[b]},d.prototype.applyConstraint=function(a,b,c){for(var d=this.impulse,e=this.J,f=this.options,i=f.equation,j=f.dampingRatio,k=f.period,l=0;l<a.length;l++){var m,n,o=a[l],p=o.velocity,q=o.position,r=o.mass;if(0===k)m=0,n=1;else{var s=4*r*h*j/k,t=4*r*h*h/(k*k);m=1/(s+c*t),n=c*t/(s+c*t)}var u=q.x,v=q.y,w=q.z,x=i(u,v,w),y=(i(u+g,q,q)-x)/g,z=(i(u,v+g,q)-x)/g,A=(i(u,v,q+g)-x)/g;e.setXYZ(y,z,A);var B=n/c*x,C=-(e.dot(p)+B)/(m+c*e.normSquared()/r);d.set(e.mult(c*C)),o.applyImpulse(d)}},c.exports=famous.physics.constraints.Surface=d}),define("famous/physics/constraints/Wall",["require","exports","module","./Constraint","famous/math/Vector"],function(a,b,c){function d(a){this.options=Object.create(d.DEFAULT_OPTIONS),a&&this.setOptions(a),this.diff=new j,this.impulse=new j,i.call(this)}function e(a,b){return b.dot(a)}function f(a){var b=this.options.normal,c=this.options.distance;return a.dot(b)+c}function g(a,b,c){var e=a.position,f=a.velocity,g=a.mass,h=this.options.normal,i=this.options.onContact,j=this.options.restitution,k=this.impulse,l=this.options.drift,m=-this.options.slop,n=0;if(this._eventOutput){var o={particle:a,wall:this,overlap:b,normal:h};this._eventOutput.emit("preCollision",o),this._eventOutput.emit("collision",o)}switch(i){case d.ON_CONTACT.REFLECT:var p=m>b?-((1+j)*h.dot(f)+l/c*(b-m))/(g*c+n):-((1+j)*h.dot(f))/(g*c+n);k.set(h.mult(c*p)),a.applyImpulse(k),a.setPosition(e.add(h.mult(-b)))}this._eventOutput&&this._eventOutput.emit("postCollision",o)}function h(a,b){var c=this.options.onContact,e=a.position,f=this.options.normal;c===d.ON_CONTACT.REFLECT&&a.setPosition(e.add(f.mult(-b)))}var i=a("./Constraint"),j=a("famous/math/Vector");d.prototype=Object.create(i.prototype),d.prototype.constructor=d,d.ON_CONTACT={REFLECT:0,SILENT:1},d.DEFAULT_OPTIONS={restitution:.5,drift:.5,slop:0,normal:[1,0,0],distance:0,onContact:d.ON_CONTACT.REFLECT},d.prototype.setOptions=function(a){void 0!==a.normal&&(a.normal instanceof j&&(this.options.normal=a.normal.clone()),a.normal instanceof Array&&(this.options.normal=new j(a.normal))),void 0!==a.restitution&&(this.options.restitution=a.restitution),void 0!==a.drift&&(this.options.drift=a.drift),void 0!==a.slop&&(this.options.slop=a.slop),void 0!==a.distance&&(this.options.distance=a.distance),void 0!==a.onContact&&(this.options.onContact=a.onContact)},d.prototype.applyConstraint=function(a,b,c){for(var d=this.options.normal,i=0;i<a.length;i++){var j=a[i],k=j.position,l=j.velocity,m=j.radius||0,n=f.call(this,k.add(d.mult(-m))),o=e.call(this,d,l);0>=n&&(0>o?g.call(this,j,n,c):h.call(this,j,n,c))}},c.exports=famous.physics.constraints.Wall=d}),define("famous/physics/constraints/Walls.js",["require","exports","module","./Constraint","./Wall","famous/math/Vector"],function(a,b,c){function d(a){this.options=Object.create(d.DEFAULT_OPTIONS),a&&this.setOptions(a),f.call(this,a.sides||this.options.sides),h.call(this)}function e(a,b,c){var e,f=d.SIDES;switch(parseInt(a)){case f.LEFT:e=b[0]*c[0];break;case f.TOP:e=b[1]*c[1];break;case f.FRONT:e=b[2]*c[2];break;case f.RIGHT:e=b[0]*(1-c[0]);break;case f.BOTTOM:e=b[1]*(1-c[1]);break;case f.BACK:e=b[2]*(1-c[2])}return e}function f(a){this.components={};for(var b=this.components,c=0;c<a.length;c++){var d=a[c];b[c]=new i({normal:k[d].clone(),distance:e(d,this.options.size,this.options.origin)})}}function g(a){this.forEach(function(b){b.setOptions(a)});for(var b in a)this.options[b]=a[b]}var h=a("./Constraint"),i=a("./Wall"),j=a("famous/math/Vector");d.prototype=Object.create(h.prototype),d.prototype.constructor=d,d.ON_CONTACT=i.ON_CONTACT,d.SIDES={LEFT:0,RIGHT:1,TOP:2,BOTTOM:3,FRONT:4,BACK:5,TWO_DIMENSIONAL:[0,1,2,3],THREE_DIMENSIONAL:[0,1,2,3,4,5]},d.DEFAULT_OPTIONS={sides:d.SIDES.TWO_DIMENSIONAL,size:[window.innerWidth,window.innerHeight,0],origin:[.5,.5,.5],drift:.5,slop:0,restitution:.5,onContact:d.ON_CONTACT.REFLECT};var k={0:new j(1,0,0),1:new j(-1,0,0),2:new j(0,1,0),3:new j(0,-1,0),4:new j(0,0,1),5:new j(0,0,-1)};d.prototype.setOptions=function(a){var b=!1;void 0!==a.restitution&&g.call(this,{restitution:a.restitution}),void 0!==a.drift&&g.call(this,{drift:a.drift}),void 0!==a.slop&&g.call(this,{slop:a.slop}),void 0!==a.onContact&&g.call(this,{onContact:a.onContact}),void 0!==a.size&&(b=!0),void 0!==a.sides&&(this.options.sides=a.sides),void 0!==a.origin&&(b=!0),b&&this.setSize(a.size,a.origin)},d.prototype.setSize=function(a,b){b=b||this.options.origin,b.length<3&&(b[2]=.5),this.forEach(function(c,d){var f=e(d,a,b);c.setOptions({distance:f})}),this.options.size=a,this.options.origin=b},d.prototype.applyConstraint=function(a,b,c){this.forEach(function(d){d.applyConstraint(a,b,c)})},d.prototype.forEach=function(a){var b=this.options.sides;for(var c in this.sides)a(b[c],c)},d.prototype.rotateZ=function(a){this.forEach(function(b){var c=b.options.normal;c.rotateZ(a).put(c)})},d.prototype.rotateX=function(a){this.forEach(function(b){var c=b.options.normal;c.rotateX(a).put(c)})},d.prototype.rotateY=function(a){this.forEach(function(b){var c=b.options.normal;c.rotateY(a).put(c)})},c.exports=famous.physics.constraints.Walls=d}),define("famous/physics/forces/Force.js",["require","exports","module","famous/math/Vector","famous/core/EventHandler"],function(a,b,c){function d(a){this.force=new f(a),this._energy=0,this._eventOutput=null}function e(){this._eventOutput=new g,this._eventOutput.bindThis(this),g.setOutputHandler(this,this._eventOutput)}var f=a("famous/math/Vector"),g=a("famous/core/EventHandler");d.prototype.setOptions=function(a){for(var b in a)this.options[b]=a[b]},d.prototype.applyForce=function(a){a.applyForce(this.force)},d.prototype.getEnergy=function(){return this._energy},d.prototype.setEnergy=function(a){this._energy=a},d.prototype.on=function(){return e.call(this),this.on.apply(this,arguments)},d.prototype.addListener=function(){return e.call(this),this.addListener.apply(this,arguments)},d.prototype.pipe=function(){return e.call(this),this.pipe.apply(this,arguments)},d.prototype.removeListener=function(){return this.removeListener.apply(this,arguments)},d.prototype.unpipe=function(){return this.unpipe.apply(this,arguments)},c.exports=famous.physics.forces.Force=d}),define("famous/physics/forces/Drag",["require","exports","module","./Force"],function(a,b,c){function d(a){this.options=Object.create(this.constructor.DEFAULT_OPTIONS),a&&this.setOptions(a),e.call(this)}var e=a("./Force");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.FORCE_FUNCTIONS={LINEAR:function(a){return a},QUADRATIC:function(a){return a.mult(a.norm())}},d.DEFAULT_OPTIONS={strength:.01,forceFunction:d.FORCE_FUNCTIONS.LINEAR},d.prototype.applyForce=function(a){for(var b=this.options.strength,c=this.options.forceFunction,d=this.force,e=0;e<a.length;e++){var f=a[e];c(f.velocity).mult(-b).put(d),f.applyForce(d)}},d.prototype.setOptions=function(a){for(var b in a)this.options[b]=a[b]},c.exports=famous.physics.forces.Drag=d}),define("famous/physics/forces/Repulsion.js",["require","exports","module","./Force","famous/math/Vector"],function(a,b,c){function d(a){this.options=Object.create(d.DEFAULT_OPTIONS),a&&this.setOptions(a),this.disp=new f,e.call(this)}var e=a("./Force"),f=a("famous/math/Vector");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.DECAY_FUNCTIONS={LINEAR:function(a,b){return Math.max(1-1/b*a,0)},MORSE:function(a,b){var c=0===b?100:b,d=a+c*(1-Math.log(2));return Math.max(1-Math.pow(1-Math.exp(d/c-1),2),0)},INVERSE:function(a,b){return 1/(1-b+a)},GRAVITY:function(a,b){return 1/(1-b+a*a)}},d.DEFAULT_OPTIONS={strength:1,anchor:void 0,range:[0,1/0],cutoff:0,cap:1/0,decayFunction:d.DECAY_FUNCTIONS.GRAVITY},d.prototype.setOptions=function(a){void 0!==a.anchor&&(a.anchor.position instanceof f&&(this.options.anchor=a.anchor.position),a.anchor instanceof Array&&(this.options.anchor=new f(a.anchor)),delete a.anchor);for(var b in a)this.options[b]=a[b]},d.prototype.applyForce=function(a,b){var c=this.options,d=this.force,e=this.disp,f=c.strength,g=c.anchor||b.position,h=c.cap,i=c.cutoff,j=c.range[0],k=c.range[1],l=c.decayFunction;if(0!==f)for(var m in a){var n=a[m];if(n!==b){var o=n.mass,p=n.position;e.set(p.sub(g));var q=e.norm();k>q&&q>j&&(d.set(e.normalize(f*o*l(q,i)).cap(h)),n.applyForce(d))}}},c.exports=famous.physics.forces.Repulsion=d}),define("famous/physics/forces/RotationalDrag.js",["require","exports","module","./Drag"],function(a,b,c){function d(a){e.call(this,a)}var e=a("./Drag");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.DEFAULT_OPTIONS=e.DEFAULT_OPTIONS,d.FORCE_FUNCTIONS=e.FORCE_FUNCTIONS,d.FORCE_FUNCTIONS={LINEAR:function(a){return a},QUADRATIC:function(a){return a.mult(a.norm())}},d.prototype.applyForce=function(a){for(var b=this.options.strength,c=this.options.forceFunction,d=this.force,e=0;e<a.length;e++){var f=a[e];c(f.angularVelocity).mult(-100*b).put(d),f.applyTorque(d)}},d.prototype.setOptions=function(a){for(var b in a)this.options[b]=a[b]},c.exports=famous.physics.forces.RotationalDrag=d}),define("famous/physics/forces/Spring.js",["require","exports","module","./Force","famous/math/Vector"],function(a,b,c){function d(a){this.options=Object.create(this.constructor.DEFAULT_OPTIONS),a&&this.setOptions(a),this.disp=new k(0,0,0),i.call(this),j.call(this)}function e(a){this.forceFunction=a}function f(){var a=this.options;a.stiffness=Math.pow(2*l/a.period,2)}function g(){var a=this.options;a.damping=4*l*a.dampingRatio/a.period}function h(a,b){return.5*a*b*b}function i(){e.call(this,this.options.forceFunction),f.call(this),g.call(this)}var j=a("./Force"),k=a("famous/math/Vector");d.prototype=Object.create(j.prototype),d.prototype.constructor=d;var l=Math.PI;d.FORCE_FUNCTIONS={FENE:function(a,b){var c=.99*b,d=Math.max(Math.min(a,c),-c);return d/(1-d*d/(b*b))},HOOK:function(a){return a}},d.DEFAULT_OPTIONS={period:300,dampingRatio:.1,length:0,maxLength:1/0,anchor:void 0,forceFunction:d.FORCE_FUNCTIONS.HOOK},d.prototype.setOptions=function(a){void 0!==a.anchor&&(a.anchor.position instanceof k&&(this.options.anchor=a.anchor.position),a.anchor instanceof k&&(this.options.anchor=a.anchor),a.anchor instanceof Array&&(this.options.anchor=new k(a.anchor))),void 0!==a.period&&(this.options.period=a.period),void 0!==a.dampingRatio&&(this.options.dampingRatio=a.dampingRatio),void 0!==a.length&&(this.options.length=a.length),void 0!==a.forceFunction&&(this.options.forceFunction=a.forceFunction),void 0!==a.maxLength&&(this.options.maxLength=a.maxLength),i.call(this)},d.prototype.applyForce=function(a,b){for(var c=this.force,d=this.disp,e=this.options,f=e.stiffness,g=e.damping,i=e.length,j=e.maxLength,k=e.anchor||b.position,l=0;l<a.length;l++){var m=a[l],n=m.position,o=m.velocity;k.sub(n).put(d);var p=d.norm()-i;if(0===p)return;var q=m.mass;f*=q,g*=q,d.normalize(f*this.forceFunction(p,j)).put(c),g&&(b?c.add(o.sub(b.velocity).mult(-g)).put(c):c.add(o.mult(-g)).put(c)),m.applyForce(c),b&&b.applyForce(c.mult(-1)),this.setEnergy(h(f,p))}},d.prototype.getEnergy=function(a){var b=this.options,c=b.length,d=b.anchor,e=b.stiffness,f=d.sub(a.position).norm()-c;return.5*e*f*f},d.prototype.setAnchor=function(a){this.options.anchor||(this.options.anchor=new k),this.options.anchor.set(a)},c.exports=famous.physics.forces.Spring=d}),define("famous/physics/forces/RotationalSpring.js",["require","exports","module","./Spring"],function(a,b,c){function d(a){e.call(this,a)}var e=a("./Spring");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.DEFAULT_OPTIONS=e.DEFAULT_OPTIONS,d.FORCE_FUNCTIONS=e.FORCE_FUNCTIONS,d.prototype.applyForce=function(a){for(var b=this.force,c=this.options,d=this.disp,e=c.stiffness,f=c.damping,g=c.length,h=c.anchor,i=0;i<a.length;i++){var j=a[i];d.set(h.sub(j.orientation));var k=d.norm()-g;if(0===k)return;var l=j.mass;e*=l,f*=l,b.set(d.normalize(e*this.forceFunction(k,this.options.lMax))),f&&b.set(b.add(j.angularVelocity.mult(-f))),j.applyTorque(b)}},d.prototype.getEnergy=function(a){var b=this.options,c=b.length,d=b.anchor,e=b.stiffness,f=d.sub(a.orientation).norm()-c;return.5*e*f*f},c.exports=famous.physics.forces.RotationalSpring=d}),define("famous/physics/forces/VectorField.js",["require","exports","module","./Force","famous/math/Vector"],function(a,b,c){function d(a){this.options=Object.create(d.DEFAULT_OPTIONS),a&&this.setOptions(a),e.call(this,this.options.field),g.call(this),this.evaluation=new h(0,0,0)}function e(a){var b=d.FIELDS;switch(a){case b.CONSTANT:this.options.direction||(this.options.direction=new h(0,1,0));break;case b.POINT_ATTRACTOR:this.options.position||(this.options.position=new h(0,0,0));break;case b.SPHERE_ATTRACTOR:this.options.radius||(this.options.radius=1)}}function f(a){var b=this.evaluation,c=this.options.field;return b.set(a),c(b,this.options)}var g=a("./Force"),h=a("famous/math/Vector");d.prototype=Object.create(g.prototype),d.prototype.constructor=d,d.FIELDS={CONSTANT:function(a,b){return a.set(b.direction)},LINEAR:function(a){return a},RADIAL:function(a){return a.set(a.mult(-1,a))},SPHERE_ATTRACTOR:function(a,b){return a.set(a.mult((b.radius-a.norm())/a.norm()))},POINT_ATTRACTOR:function(a,b){return a.set(b.position.sub(a))}},d.DEFAULT_OPTIONS={strength:1,field:d.FIELDS.CONSTANT},d.prototype.setOptions=function(a){for(var b in a)this.options[b]=a[b]},d.prototype.applyForce=function(a){for(var b=this.force,c=0;c<a.length;c++){var d=a[c];b.set(f.call(this,d.position).mult(d.mass*this.options.strength)),d.applyForce(b)}},c.exports=famous.physics.forces.VectorField=d}),define("famous/physics/PhysicsEngine",["require","exports","module","famous/core/EventHandler"],function(a,b,c){function d(a){this.options=Object.create(d.DEFAULT_OPTIONS),a&&this.setOptions(a),this._particles=[],this._bodies=[],this._agents={},this._forces=[],this._constraints=[],this._buffer=0,this._prevTime=x(),this._isSleeping=!1,this._eventHandler=null,this._currAgentId=0,this._hasBodies=!1}function e(a){return a.applyForce?this._forces:a.applyConstraint?this._constraints:void 0}function f(a,b,c){return void 0===b&&(b=this.getParticlesAndBodies()),b instanceof Array||(b=[b]),this._agents[this._currAgentId]={agent:a,targets:b,source:c},e.call(this,a).push(this._currAgentId),this._currAgentId++}function g(a){return this._agents[a]}function h(a){var b=g.call(this,this._forces[a]);b.agent.applyForce(b.targets,b.source)}function i(){for(var a=this._forces.length-1;a>-1;a--)h.call(this,a)}function j(a,b){var c=this._agents[this._constraints[a]];return c.agent.applyConstraint(c.targets,c.source,b)}function k(a){for(var b=0;b<this.options.constraintSteps;){for(var c=this._constraints.length-1;c>-1;c--)j.call(this,c,a);b++}}function l(a,b){a.integrateVelocity(b)}function m(a,b){a.integrateAngularMomentum(b),a.updateAngularVelocity()}function n(a,b){a.integrateOrientation(b)}function o(a,b){a.integratePosition(b),a.emit("update",a)}function p(a){i.call(this,a),this.forEach(l,a),this.forEachBody(m,a),k.call(this,a),this.forEachBody(n,a),this.forEach(o,a)}function q(){var a=0,b=0;return this.forEach(function(c){b=c.getEnergy(),a+=b,b<c.sleepTolerance&&c.sleep()}),a}function r(){for(var a=0,b=this._forces.length-1;b>-1;b--)a+=this._forces[b].getEnergy()||0;return a}function s(){for(var a=0,b=this._constraints.length-1;b>-1;b--)a+=this._constraints[b].getEnergy()||0;return a}var t=a("famous/core/EventHandler"),u=17,v=1e3/120,w=17;d.DEFAULT_OPTIONS={constraintSteps:1,sleepTolerance:1e-7};var x=function(){return Date.now}();d.prototype.setOptions=function(a){for(var b in a)this.options[b]&&(this.options[b]=a[b])},d.prototype.addBody=function(a){return a._engine=this,a.isBody?(this._bodies.push(a),this._hasBodies=!0):this._particles.push(a),a},d.prototype.removeBody=function(a){var b=a.isBody?this._bodies:this._particles,c=b.indexOf(a);if(c>-1){for(var d=0;d<Object.keys(this._agents).length;d++)this.detachFrom(d,a);b.splice(c,1)}0===this.getBodies().length&&(this._hasBodies=!1)},d.prototype.attach=function(a,b,c){if(a instanceof Array){for(var d=[],e=0;e<a.length;e++)d[e]=f.call(this,a[e],b,c);return d}return f.call(this,a,b,c)},d.prototype.attachTo=function(a,b){g.call(this,a).targets.push(b)},d.prototype.detach=function(a){var b=this.getAgent(a),c=e.call(this,b),d=c.indexOf(a);c.splice(d,1),delete this._agents[a]},d.prototype.detachFrom=function(a,b){var c=g.call(this,a);if(c.source===b)this.detach(a);else{var d=c.targets,e=d.indexOf(b);e>-1&&d.splice(e,1)}},d.prototype.detachAll=function(){this._agents={},this._forces=[],this._constraints=[],this._currAgentId=0},d.prototype.getAgent=function(a){return g.call(this,a).agent},d.prototype.getParticles=function(){return this._particles},d.prototype.getBodies=function(){return this._bodies},d.prototype.getParticlesAndBodies=function(){return this.getParticles().concat(this.getBodies())},d.prototype.forEachParticle=function(a,b){for(var c=this.getParticles(),d=0,e=c.length;e>d;d++)a.call(this,c[d],b)},d.prototype.forEachBody=function(a,b){if(this._hasBodies)for(var c=this.getBodies(),d=0,e=c.length;e>d;d++)a.call(this,c[d],b)},d.prototype.forEach=function(a,b){this.forEachParticle(a,b),this.forEachBody(a,b)},d.prototype.getEnergy=function(){return q.call(this)+r.call(this)+s.call(this)},d.prototype.step=function(){var a=x(),b=a-this._prevTime;this._prevTime=a,v>b||(b>w&&(b=w),p.call(this,u))},d.prototype.isSleeping=function(){return this._isSleeping},d.prototype.sleep=function(){this.emit("end",this),this._isSleeping=!0},d.prototype.wake=function(){this._prevTime=x(),this.emit("start",this),this._isSleeping=!1},d.prototype.emit=function(a,b){null!==this._eventHandler&&this._eventHandler.emit(a,b)},d.prototype.on=function(a,b){null===this._eventHandler&&(this._eventHandler=new t),this._eventHandler.on(a,b)},c.exports=famous.physics.PhysicsEngine=d}),define("famous/surfaces/CanvasSurface",["require","exports","module","famous/core/Surface"],function(a,b,c){function d(a){a&&a.canvasSize&&(this._canvasSize=a.canvasSize),e.apply(this,arguments),this._canvasSize||(this._canvasSize=this.getSize()),this._backBuffer=document.createElement("canvas"),this._canvasSize&&(this._backBuffer.width=this._canvasSize[0],this._backBuffer.height=this._canvasSize[1]),this._contextId=void 0}var e=a("famous/core/Surface");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype.elementType="canvas",d.prototype.elementClass="famous-surface",d.prototype.setContent=function(){},d.prototype.deploy=function(a){this._canvasSize&&(a.width=this._canvasSize[0],a.height=this._canvasSize[1]),"2d"===this._contextId&&(a.getContext(this._contextId).drawImage(this._backBuffer,0,0),this._backBuffer.width=0,this._backBuffer.height=0)},d.prototype.recall=function(a){this.getSize();this._backBuffer.width=a.width,this._backBuffer.height=a.height,"2d"===this._contextId&&(this._backBuffer.getContext(this._contextId).drawImage(a,0,0),a.width=0,a.height=0)},d.prototype.getContext=function(a){return this._contextId=a,this._currTarget?this._currTarget.getContext(a):this._backBuffer.getContext(a)},d.prototype.setSize=function(a,b){e.prototype.setSize.apply(this,arguments),b&&(this._canvasSize=[b[0],b[1]]),this._currTarget&&(this._currTarget.width=this._canvasSize[0],this._currTarget.height=this._canvasSize[1])},c.exports=famous.surfaces.CanvasSurface=d}),define("famous/surfaces/ContainerSurface",["require","exports","module","famous/core/Surface","famous/core/Context"],function(a,b,c){function d(a){e.call(this,a),this._container=document.createElement("div"),this._container.classList.add("famous-group"),this._container.classList.add("famous-container-group"),this._shouldRecalculateSize=!1,this.context=new f(this._container),this.setContent(this._container)}var e=a("famous/core/Surface"),f=a("famous/core/Context");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype.elementType="div",d.prototype.elementClass="famous-surface",d.prototype.add=function(){return this.context.add.apply(this.context,arguments)},d.prototype.render=function(){return this._sizeDirty&&(this._shouldRecalculateSize=!0),e.prototype.render.apply(this,arguments)},d.prototype.deploy=function(){return this._shouldRecalculateSize=!0,e.prototype.deploy.apply(this,arguments)},d.prototype.commit=function(){var a=this._size?[this._size[0],this._size[1]]:null,b=e.prototype.commit.apply(this,arguments);return(this._shouldRecalculateSize||a&&(this._size[0]!==a[0]||this._size[1]!==a[1]))&&(this.context.setSize(),this._shouldRecalculateSize=!1),this.context.update(),b},c.exports=famous.surfaces.ContainerSurface=d}),define("famous/surfaces/FormContainerSurface.js",["require","exports","module","./ContainerSurface"],function(a,b,c){function d(a){a&&(this._method=a.method||""),e.apply(this,arguments)}var e=a("./ContainerSurface");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype.elementType="form",d.prototype.deploy=function(a){return this._method&&(a.method=this._method),e.prototype.deploy.apply(this,arguments)},c.exports=famous.surfaces.FormContainerSurface=d}),define("famous/surfaces/ImageSurface.js",["require","exports","module","famous/core/Surface"],function(a,b,c){function d(){this._imageUrl=void 0,e.apply(this,arguments)}var e=a("famous/core/Surface"),f=[],g=[],h=[],i=!0;d.enableCache=function(){i=!0},d.disableCache=function(){i=!1},d.clearCache=function(){f=[],g=[],h=[]},d.getCache=function(){return{urlCache:f,countCache:g,nodeCache:g}},d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype.elementType="img",d.prototype.elementClass="famous-surface",d.prototype.setContent=function(a){var b=f.indexOf(this._imageUrl);-1!==b&&(1===g[b]?(f.splice(b,1),g.splice(b,1),h.splice(b,1)):g[b]--),b=f.indexOf(a),-1===b?(f.push(a),g.push(1)):g[b]++,this._imageUrl=a,this._contentDirty=!0},d.prototype.deploy=function(a){var b=f.indexOf(this._imageUrl);if(void 0===h[b]&&i){var c=new Image;c.src=this._imageUrl||"",h[b]=c}a.src=this._imageUrl||""},d.prototype.recall=function(a){a.src=""},c.exports=famous.surfaces.ImageSurface=d}),define("famous/surfaces/InputSurface",["require","exports","module","famous/core/Surface"],function(a,b,c){function d(a){this._placeholder=a.placeholder||"",this._value=a.value||"",this._type=a.type||"text",this._name=a.name||"",e.apply(this,arguments),this.on("click",this.focus.bind(this)),window.addEventListener("click",function(a){a.target!==this._currTarget&&this.blur()}.bind(this))}var e=a("famous/core/Surface");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype.elementType="input",d.prototype.elementClass="famous-surface",d.prototype.setPlaceholder=function(a){return this._placeholder=a,this._contentDirty=!0,this},d.prototype.focus=function(){return this._currTarget&&this._currTarget.focus(),this},d.prototype.blur=function(){return this._currTarget&&this._currTarget.blur(),this},d.prototype.setValue=function(a){return this._value=a,this._contentDirty=!0,this},d.prototype.setType=function(a){return this._type=a,this._contentDirty=!0,this},d.prototype.getValue=function(){return this._currTarget?this._currTarget.value:this._value},d.prototype.setName=function(a){return this._name=a,this._contentDirty=!0,this},d.prototype.getName=function(){return this._name},d.prototype.deploy=function(a){""!==this._placeholder&&(a.placeholder=this._placeholder),a.value=this._value,a.type=this._type,a.name=this._name},c.exports=famous.surfaces.InputSurface=d}),define("famous/surfaces/SubmitInputSurface.js",["require","exports","module","./InputSurface"],function(a,b,c){function d(a){e.apply(this,arguments),this._type="submit",a&&a.onClick&&this.setOnClick(a.onClick)}var e=a("./InputSurface");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype.setOnClick=function(a){this.onClick=a},d.prototype.deploy=function(a){this.onclick&&(a.onClick=this.onClick),e.prototype.deploy.apply(this,arguments)},c.exports=famous.surfaces.SubmitInputSurface=d}),define("famous/surfaces/TextareaSurface.js",["require","exports","module","famous/core/Surface"],function(a,b,c){function d(a){this._placeholder=a.placeholder||"",this._value=a.value||"",this._name=a.name||"",this._wrap=a.wrap||"",this._cols=a.cols||"",this._rows=a.rows||"",e.apply(this,arguments),this.on("click",this.focus.bind(this))}var e=a("famous/core/Surface");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype.elementType="textarea",d.prototype.elementClass="famous-surface",d.prototype.setPlaceholder=function(a){return this._placeholder=a,this._contentDirty=!0,this},d.prototype.focus=function(){return this._currTarget&&this._currTarget.focus(),this},d.prototype.blur=function(){return this._currTarget&&this._currTarget.blur(),this},d.prototype.setValue=function(a){return this._value=a,this._contentDirty=!0,this},d.prototype.getValue=function(){return this._currTarget?this._currTarget.value:this._value},d.prototype.setName=function(a){return this._name=a,this._contentDirty=!0,this},d.prototype.getName=function(){return this._name},d.prototype.setWrap=function(a){return this._wrap=a,this._contentDirty=!0,this},d.prototype.setColumns=function(a){return this._cols=a,this._contentDirty=!0,this},d.prototype.setRows=function(a){return this._rows=a,this._contentDirty=!0,this},d.prototype.deploy=function(a){""!==this._placeholder&&(a.placeholder=this._placeholder),""!==this._value&&(a.value=this._value),""!==this._name&&(a.name=this._name),""!==this._wrap&&(a.wrap=this._wrap),""!==this._cols&&(a.cols=this._cols),""!==this._rows&&(a.rows=this._rows)},c.exports=famous.surfaces.TextareaSurface=d}),define("famous/surfaces/VideoSurface.js",["require","exports","module","famous/core/Surface"],function(a,b,c){function d(a){this._videoUrl=void 0,this.options=Object.create(d.DEFAULT_OPTIONS),a&&this.setOptions(a),e.apply(this,arguments)}var e=a("famous/core/Surface");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.DEFAULT_OPTIONS={autoplay:!1},d.prototype.elementType="video",d.prototype.elementClass="famous-surface",d.prototype.setOptions=function(a){for(var b in d.DEFAULT_OPTIONS)void 0!==a[b]&&(this.options[b]=a[b])},d.prototype.setContent=function(a){this._videoUrl=a,this._contentDirty=!0},d.prototype.deploy=function(a){a.src=this._videoUrl,a.autoplay=this.options.autoplay},d.prototype.recall=function(a){a.src=""},c.exports=famous.surfaces.VideoSurface=d}),define("famous/transitions/CachedMap",["require","exports","module"],function(a,b,c){function d(a){this._map=a||null,this._cachedOutput=null,this._cachedInput=Number.NaN}d.create=function(a){var b=new d(a);return b.get.bind(b)},d.prototype.get=function(a){return a!==this._cachedInput&&(this._cachedInput=a,this._cachedOutput=this._map(a)),this._cachedOutput},c.exports=famous.transitions.CachedMap=d}),define("famous/transitions/Easing.js",["require","exports","module"],function(a,b,c){var d={inQuad:function(a){return a*a},outQuad:function(a){return-(a-=1)*a+1},inOutQuad:function(a){return(a/=.5)<1?.5*a*a:-.5*(--a*(a-2)-1)},inCubic:function(a){return a*a*a},outCubic:function(a){return--a*a*a+1},inOutCubic:function(a){return(a/=.5)<1?.5*a*a*a:.5*((a-=2)*a*a+2)},inQuart:function(a){return a*a*a*a},outQuart:function(a){return-(--a*a*a*a-1)},inOutQuart:function(a){return(a/=.5)<1?.5*a*a*a*a:-.5*((a-=2)*a*a*a-2)},inQuint:function(a){return a*a*a*a*a},outQuint:function(a){return--a*a*a*a*a+1},inOutQuint:function(a){return(a/=.5)<1?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2)},inSine:function(a){return-1*Math.cos(a*(Math.PI/2))+1},outSine:function(a){return Math.sin(a*(Math.PI/2))},inOutSine:function(a){return-.5*(Math.cos(Math.PI*a)-1)},inExpo:function(a){return 0===a?0:Math.pow(2,10*(a-1))},outExpo:function(a){return 1===a?1:-Math.pow(2,-10*a)+1},inOutExpo:function(a){return 0===a?0:1===a?1:(a/=.5)<1?.5*Math.pow(2,10*(a-1)):.5*(-Math.pow(2,-10*--a)+2)},inCirc:function(a){return-(Math.sqrt(1-a*a)-1)},outCirc:function(a){return Math.sqrt(1- --a*a)},inOutCirc:function(a){return(a/=.5)<1?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)},inElastic:function(a){var b=1.70158,c=0,d=1;return 0===a?0:1===a?1:(c||(c=.3),b=c/(2*Math.PI)*Math.asin(1/d),-(d*Math.pow(2,10*(a-=1))*Math.sin(2*(a-b)*Math.PI/c)))},outElastic:function(a){var b=1.70158,c=0,d=1;return 0===a?0:1===a?1:(c||(c=.3),b=c/(2*Math.PI)*Math.asin(1/d),d*Math.pow(2,-10*a)*Math.sin(2*(a-b)*Math.PI/c)+1)},inOutElastic:function(a){var b=1.70158,c=0,d=1;return 0===a?0:2===(a/=.5)?1:(c||(c=.3*1.5),b=c/(2*Math.PI)*Math.asin(1/d),1>a?-.5*d*Math.pow(2,10*(a-=1))*Math.sin(2*(a-b)*Math.PI/c):d*Math.pow(2,-10*(a-=1))*Math.sin(2*(a-b)*Math.PI/c)*.5+1)},inBack:function(a,b){return void 0===b&&(b=1.70158),a*a*((b+1)*a-b)},outBack:function(a,b){return void 0===b&&(b=1.70158),--a*a*((b+1)*a+b)+1},inOutBack:function(a,b){return void 0===b&&(b=1.70158),(a/=.5)<1?.5*a*a*(((b*=1.525)+1)*a-b):.5*((a-=2)*a*(((b*=1.525)+1)*a+b)+2)},inBounce:function(a){return 1-d.outBounce(1-a)
},outBounce:function(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375},inOutBounce:function(a){return.5>a?.5*d.inBounce(2*a):.5*d.outBounce(2*a-1)+.5}};c.exports=famous.transitions.Easing=d}),define("famous/transitions/SnapTransition.js",["require","exports","module","famous/physics/PhysicsEngine","famous/physics/bodies/Particle","famous/physics/constraints/Snap","famous/math/Vector"],function(a,b,c){function d(a){a=a||0,this.endState=new t(a),this.initState=new t,this._dimensions=1,this._restTolerance=1e-10,this._absRestTolerance=this._restTolerance,this._callback=void 0,this.PE=new q,this.particle=new r,this.spring=new s({anchor:this.endState}),this.PE.addBody(this.particle),this.PE.attach(this.spring,this.particle)}function e(){return this.particle.getEnergy()+this.spring.getEnergy(this.particle)}function f(){var a=this.endState.sub(this.initState).normSquared();this._absRestTolerance=0===a?this._restTolerance:this._restTolerance*a}function g(a){this.endState.set(a),f.call(this)}function h(){this.PE.wake()}function i(){this.PE.sleep()}function j(a){this.particle.position.set(a)}function k(a){this.particle.velocity.set(a)}function l(){return 0===this._dimensions?this.particle.getPosition1D():this.particle.getPosition()}function m(){return 0===this._dimensions?this.particle.getVelocity1D():this.particle.getVelocity()}function n(a){this._callback=a}function o(a){var b=d.DEFAULT_OPTIONS;void 0===a.period&&(a.period=b.period),void 0===a.dampingRatio&&(a.dampingRatio=b.dampingRatio),void 0===a.velocity&&(a.velocity=b.velocity),this.spring.setOptions({period:a.period,dampingRatio:a.dampingRatio}),k.call(this,a.velocity)}function p(){if(this.PE.isSleeping()){if(this._callback){var a=this._callback;this._callback=void 0,a()}}else e.call(this)<this._absRestTolerance&&(j.call(this,this.endState),k.call(this,[0,0,0]),i.call(this))}var q=a("famous/physics/PhysicsEngine"),r=a("famous/physics/bodies/Particle"),s=a("famous/physics/constraints/Snap"),t=a("famous/math/Vector");d.SUPPORTS_MULTIPLE=3,d.DEFAULT_OPTIONS={period:100,dampingRatio:.2,velocity:0},d.prototype.reset=function(a,b){this._dimensions=a instanceof Array?a.length:0,this.initState.set(a),j.call(this,a),g.call(this,a),b&&k.call(this,b),n.call(this,void 0)},d.prototype.getVelocity=function(){return m.call(this)},d.prototype.setVelocity=function(a){this.call(this,k(a))},d.prototype.isActive=function(){return!this.PE.isSleeping()},d.prototype.halt=function(){this.set(this.get())},d.prototype.get=function(){return p.call(this),l.call(this)},d.prototype.set=function(a,b,c){return b?(this._dimensions=a instanceof Array?a.length:0,h.call(this),o.call(this,b),g.call(this,a),void n.call(this,c)):(this.reset(a),void(c&&c()))},c.exports=famous.transitions.SnapTransition=d}),define("famous/transitions/SpringTransition.js",["require","exports","module","famous/physics/PhysicsEngine","famous/physics/bodies/Particle","famous/physics/forces/Spring","famous/math/Vector"],function(a,b,c){function d(a){a=a||0,this.endState=new t(a),this.initState=new t,this._dimensions=void 0,this._restTolerance=1e-10,this._absRestTolerance=this._restTolerance,this._callback=void 0,this.PE=new q,this.spring=new s({anchor:this.endState}),this.particle=new r,this.PE.addBody(this.particle),this.PE.attach(this.spring,this.particle)}function e(){return this.particle.getEnergy()+this.spring.getEnergy(this.particle)}function f(a){this.particle.setPosition(a)}function g(a){this.particle.setVelocity(a)}function h(){return 0===this._dimensions?this.particle.getPosition1D():this.particle.getPosition()}function i(){return 0===this._dimensions?this.particle.getVelocity1D():this.particle.getVelocity()}function j(a){this._callback=a}function k(){this.PE.wake()}function l(){this.PE.sleep()}function m(){if(this.PE.isSleeping()){if(this._callback){var a=this._callback;this._callback=void 0,a()}}else e.call(this)<this._absRestTolerance&&(f.call(this,this.endState),g.call(this,[0,0,0]),l.call(this))}function n(a){var b=d.DEFAULT_OPTIONS;void 0===a.period&&(a.period=b.period),void 0===a.dampingRatio&&(a.dampingRatio=b.dampingRatio),void 0===a.velocity&&(a.velocity=b.velocity),a.period<150&&(a.period=150,console.warn("The period of a SpringTransition is capped at 150 ms. Use a SnapTransition for faster transitions")),this.spring.setOptions({period:a.period,dampingRatio:a.dampingRatio}),g.call(this,a.velocity)}function o(){var a=this.endState.sub(this.initState).normSquared();this._absRestTolerance=0===a?this._restTolerance:this._restTolerance*a}function p(a){this.endState.set(a),o.call(this)}var q=a("famous/physics/PhysicsEngine"),r=a("famous/physics/bodies/Particle"),s=a("famous/physics/forces/Spring"),t=a("famous/math/Vector");d.SUPPORTS_MULTIPLE=3,d.DEFAULT_OPTIONS={period:300,dampingRatio:.5,velocity:0},d.prototype.reset=function(a,b){this._dimensions=a instanceof Array?a.length:0,this.initState.set(a),f.call(this,a),p.call(this,a),b&&g.call(this,b),j.call(this,void 0)},d.prototype.getVelocity=function(){return i.call(this)},d.prototype.setVelocity=function(a){this.call(this,g(a))},d.prototype.isActive=function(){return!this.PE.isSleeping()},d.prototype.halt=function(){this.set(this.get())},d.prototype.get=function(){return m.call(this),h.call(this)},d.prototype.set=function(a,b,c){return b?(this._dimensions=a instanceof Array?a.length:0,k.call(this),n.call(this,b),p.call(this,a),void j.call(this,c)):(this.reset(a),void(c&&c()))},c.exports=famous.transitions.SpringTransition=d}),define("famous/transitions/WallTransition.js",["require","exports","module","famous/physics/PhysicsEngine","famous/physics/bodies/Particle","famous/physics/forces/Spring","famous/physics/constraints/Wall","famous/math/Vector"],function(a,b,c){function d(a){a=a||0,this.endState=new u(a),this.initState=new u,this.spring=new s({anchor:this.endState}),this.wall=new t,this._restTolerance=1e-10,this._dimensions=1,this._absRestTolerance=this._restTolerance,this._callback=void 0,this.PE=new q,this.particle=new r,this.PE.addBody(this.particle),this.PE.attach([this.wall,this.spring],this.particle)}function e(){return this.particle.getEnergy()+this.spring.getEnergy(this.particle)}function f(){var a=this.endState.sub(this.initState).normSquared();this._absRestTolerance=0===a?this._restTolerance:this._restTolerance*a}function g(){this.PE.wake()}function h(){this.PE.sleep()}function i(a){this.endState.set(a);var b=this.endState.sub(this.initState).norm();this.wall.setOptions({distance:this.endState.norm(),normal:0===b?this.particle.velocity.normalize(-1):this.endState.sub(this.initState).normalize(-1)}),f.call(this)}function j(a){this.particle.position.set(a)}function k(a){this.particle.velocity.set(a)}function l(){return 0===this._dimensions?this.particle.getPosition1D():this.particle.getPosition()}function m(){return 0===this._dimensions?this.particle.getVelocity1D():this.particle.getVelocity()}function n(a){this._callback=a}function o(){if(this.PE.isSleeping()){if(this._callback){var a=this._callback;this._callback=void 0,a()}}else{var b=e.call(this);b<this._absRestTolerance&&(h.call(this),j.call(this,this.endState),k.call(this,[0,0,0]))}}function p(a){var b=d.DEFAULT_OPTIONS;void 0===a.period&&(a.period=b.period),void 0===a.dampingRatio&&(a.dampingRatio=b.dampingRatio),void 0===a.velocity&&(a.velocity=b.velocity),void 0===a.restitution&&(a.restitution=b.restitution),this.spring.setOptions({period:a.period,dampingRatio:a.dampingRatio}),this.wall.setOptions({restitution:a.restitution}),k.call(this,a.velocity)}var q=a("famous/physics/PhysicsEngine"),r=a("famous/physics/bodies/Particle"),s=a("famous/physics/forces/Spring"),t=a("famous/physics/constraints/Wall"),u=a("famous/math/Vector");d.SUPPORTS_MULTIPLE=3,d.DEFAULT_OPTIONS={period:300,dampingRatio:.5,velocity:0,restitution:.5},d.prototype.reset=function(a,b){this._dimensions=a instanceof Array?a.length:0,this.initState.set(a),j.call(this,a),b&&k.call(this,b),i.call(this,a),n.call(this,void 0)},d.prototype.getVelocity=function(){return m.call(this)},d.prototype.setVelocity=function(a){this.call(this,k(a))},d.prototype.isActive=function(){return!this.PE.isSleeping()},d.prototype.halt=function(){this.set(this.get())},d.prototype.get=function(){return o.call(this),l.call(this)},d.prototype.set=function(a,b,c){return b?(this._dimensions=a instanceof Array?a.length:0,g.call(this),p.call(this,b),i.call(this,a),void n.call(this,c)):(this.reset(a),void(c&&c()))},c.exports=famous.transitions.WallTransition=d}),define("famous/utilities/KeyCodes.js",["require","exports","module"],function(a,b,c){var d={0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:97,b:98,c:99,d:100,e:101,f:102,g:103,h:104,i:105,j:106,k:107,l:108,m:109,n:110,o:111,p:112,q:113,r:114,s:115,t:116,u:117,v:118,w:119,x:120,y:121,z:122,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,ENTER:13,LEFT_ARROW:37,RIGHT_ARROW:39,UP_ARROW:38,DOWN_ARROW:40,SPACE:32,SHIFT:16,TAB:9};c.exports=famous.utilities.KeyCodes=d}),define("famous/utilities/Timer.js",["require","exports","module","famous/core/Engine"],function(a,b,c){function d(a){return k.on(l,a),a}function e(a,b){var c=m(),e=function(){var d=m();d-c>=b&&(a.apply(this,arguments),k.removeListener(l,e))};return d(e)}function f(a,b){var c=m(),e=function(){var d=m();d-c>=b&&(a.apply(this,arguments),c=m())};return d(e)}function g(a,b){if(void 0===b)return void 0;var c=function(){b--,0>=b&&(a.apply(this,arguments),i(c))};return d(c)}function h(a,b){b=b||1;var c=b,e=function(){b--,0>=b&&(a.apply(this,arguments),b=c)};return d(e)}function i(a){k.removeListener(l,a)}function j(a,b){var c,d,f,g,h;return function(){d=this,h=arguments,f=m();var j=function(){var i=m-f;b>i?c=e(j,b-i):(c=null,g=a.apply(d,h))};return i(c),c=e(j,b),g}}var k=a("famous/core/Engine"),l="prerender",m=window.performance&&window.performance.now?function(){return window.performance.now()}:function(){return Date.now()};c.exports=famous.utilities.Timer={setTimeout:e,setInterval:f,debounce:j,after:g,every:h,clear:i}}),define("famous/views/SequentialLayout.js",["require","exports","module","famous/core/OptionsManager","famous/core/Transform","famous/core/ViewSequence","famous/utilities/Utility"],function(a,b,c){function d(a){this._items=null,this._size=null,this._outputFunction=d.DEFAULT_OUTPUT_FUNCTION,this.options=Object.create(this.constructor.DEFAULT_OPTIONS),this.optionsManager=new e(this.options),this._itemsCache=[],this._outputCache={size:null,target:this._itemsCache},a&&this.setOptions(a)}var e=a("famous/core/OptionsManager"),f=a("famous/core/Transform"),g=a("famous/core/ViewSequence"),h=a("famous/utilities/Utility");d.DEFAULT_OPTIONS={direction:h.Direction.Y,itemSpacing:0,defaultItemSize:[50,50]},d.DEFAULT_OUTPUT_FUNCTION=function(a,b){var c=this.options.direction===h.Direction.X?f.translate(b,0):f.translate(0,b);return{transform:c,target:a.render()}},d.prototype.getSize=function(){return this._size||this.render(),this._size},d.prototype.sequenceFrom=function(a){return a instanceof Array&&(a=new g(a)),this._items=a,this},d.prototype.setOptions=function(){return this.optionsManager.setOptions.apply(this.optionsManager,arguments),this},d.prototype.setOutputFunction=function(a){return this._outputFunction=a,this},d.prototype.render=function(){for(var a=0,b=0,c=this.options.direction===h.Direction.X?0:1,d=this.options.direction===h.Direction.X?1:0,e=this._items,f=this._itemsCache,g=0;e;){var i=e.get();if(!i)break;var j;i&&i.getSize&&(j=i.getSize()),j||(j=this.options.defaultItemSize),j[d]!==!0&&(b=Math.max(b,j[d]));var k=this._outputFunction.call(this,i,a,g);f[g]=k,j[c]&&j[c]!==!0&&(a+=j[c]+this.options.itemSpacing),e=e.getNext(),g++}return this._itemsCache.splice(g),b||(b=void 0),this._size||(this._size=[0,0]),this._size[c]=a-this.options.itemSpacing,this._size[d]=b,this._outputCache.size=this.getSize(),this._outputCache},c.exports=famous.views.SequentialLayout=d}),define("famous/views/Deck.js",["require","exports","module","famous/core/Transform","famous/core/OptionsManager","famous/transitions/Transitionable","famous/utilities/Utility","./SequentialLayout"],function(a,b,c){function d(){k.apply(this,arguments),this.state=new i(0),this._isOpen=!1,this.setOutputFunction(function(a,b,c){var d=e.call(this),f=this.options.direction===j.Direction.X?g.translate(d*b,0,.001*(d-1)*b):g.translate(0,d*b,.001*(d-1)*b),h=a.render();if(this.options.stackRotation){var i=this.options.stackRotation*c*(1-d);h={transform:g.rotateZ(i),origin:[.5,.5],target:h}}return{transform:f,size:a.getSize(),target:h}})}function e(a){return a?this._isOpen?1:0:this.state.get()}function f(a,b,c){this.state.halt(),this.state.set(a,b,c)}var g=a("famous/core/Transform"),h=a("famous/core/OptionsManager"),i=a("famous/transitions/Transitionable"),j=a("famous/utilities/Utility"),k=a("./SequentialLayout");d.prototype=Object.create(k.prototype),d.prototype.constructor=d,d.DEFAULT_OPTIONS=h.patch(k.DEFAULT_OPTIONS,{transition:{curve:"easeOutBounce",duration:500},stackRotation:0}),d.prototype.getSize=function(){var a=k.prototype.getSize.apply(this,arguments),b=this._items?this._items.get().getSize():[0,0];b||(b=[0,0]);var c=e.call(this),d=1-c;return[b[0]*d+a[0]*c,b[1]*d+a[1]*c]},d.prototype.isOpen=function(){return this._isOpen},d.prototype.open=function(a){this._isOpen=!0,f.call(this,1,this.options.transition,a)},d.prototype.close=function(a){this._isOpen=!1,f.call(this,0,this.options.transition,a)},d.prototype.toggle=function(a){this._isOpen?this.close(a):this.open(a)},c.exports=famous.views.Deck=d}),define("famous/views/RenderController.js",["require","exports","module","famous/core/Modifier","famous/core/RenderNode","famous/core/Transform","famous/transitions/Transitionable","famous/core/View"],function(a,b,c){function d(){j.apply(this,arguments),this._showing=-1,this._outgoingRenderables=[],this._nextRenderable=null,this._renderables=[],this._nodes=[],this._modifiers=[],this._states=[],this.inTransformMap=d.DefaultMap.transform,this.inOpacityMap=d.DefaultMap.opacity,this.inOriginMap=d.DefaultMap.origin,this.outTransformMap=d.DefaultMap.transform,this.outOpacityMap=d.DefaultMap.opacity,this.outOriginMap=d.DefaultMap.origin,this._output=[]}function e(a,b){return a(b.get())}var f=a("famous/core/Modifier"),g=a("famous/core/RenderNode"),h=a("famous/core/Transform"),i=a("famous/transitions/Transitionable"),j=a("famous/core/View");d.prototype=Object.create(j.prototype),d.prototype.constructor=d,d.DEFAULT_OPTIONS={inTransition:!0,outTransition:!0,overlap:!0},d.DefaultMap={transform:function(){return h.identity},opacity:function(a){return a},origin:null},d.prototype.inTransformFrom=function(a){if(a instanceof Function)this.inTransformMap=a;else{if(!a||!a.get)throw new Error("inTransformFrom takes only function or getter object");this.inTransformMap=a.get.bind(a)}return this},d.prototype.inOpacityFrom=function(a){if(a instanceof Function)this.inOpacityMap=a;else{if(!a||!a.get)throw new Error("inOpacityFrom takes only function or getter object");this.inOpacityMap=a.get.bind(a)}return this},d.prototype.inOriginFrom=function(a){if(a instanceof Function)this.inOriginMap=a;else{if(!a||!a.get)throw new Error("inOriginFrom takes only function or getter object");this.inOriginMap=a.get.bind(a)}return this},d.prototype.outTransformFrom=function(a){if(a instanceof Function)this.outTransformMap=a;else{if(!a||!a.get)throw new Error("inTransformFrom takes only function or getter object");this.outTransformMap=a.get.bind(a)}return this},d.prototype.outOpacityFrom=function(a){if(a instanceof Function)this.outOpacityMap=a;else{if(!a||!a.get)throw new Error("inOpacityFrom takes only function or getter object");this.outOpacityMap=a.get.bind(a)}return this},d.prototype.outOriginFrom=function(a){if(a instanceof Function)this.outOriginMap=a;else{if(!a||!a.get)throw new Error("inOriginFrom takes only function or getter object");this.outOriginMap=a.get.bind(a)}return this},d.prototype.show=function(a,b,c){if(!a)return this.hide(c);if(b instanceof Function&&(c=b,b=null),this._showing>=0){if(!this.options.overlap)return void(this._nextRenderable?this._nextRenderable=a:(this._nextRenderable=a,this.hide(function(){this._nextRenderable===a&&this.show(this._nextRenderable,c),this._nextRenderable=null})));this.hide()}var d=null,h=this._renderables.indexOf(a);if(h>=0){this._showing=h,d=this._states[h],d.halt();var j=this._outgoingRenderables.indexOf(a);j>=0&&this._outgoingRenderables.splice(j,1)}else{d=new i(0);var k=new f({transform:this.inTransformMap?e.bind(this,this.inTransformMap,d):null,opacity:this.inOpacityMap?e.bind(this,this.inOpacityMap,d):null,origin:this.inOriginMap?e.bind(this,this.inOriginMap,d):null}),l=new g;l.add(k).add(a),this._showing=this._nodes.length,this._nodes.push(l),this._modifiers.push(k),this._states.push(d),this._renderables.push(a)}b||(b=this.options.inTransition),d.set(1,b,c)},d.prototype.hide=function(a,b){if(!(this._showing<0)){var c=this._showing;this._showing=-1,a instanceof Function&&(b=a,a=void 0);var d=this._nodes[c],f=this._modifiers[c],g=this._states[c],h=this._renderables[c];f.transformFrom(this.outTransformMap?e.bind(this,this.outTransformMap,g):null),f.opacityFrom(this.outOpacityMap?e.bind(this,this.outOpacityMap,g):null),f.originFrom(this.outOriginMap?e.bind(this,this.outOriginMap,g):null),this._outgoingRenderables.indexOf(h)<0&&this._outgoingRenderables.push(h),a||(a=this.options.outTransition),g.halt(),g.set(0,a,function(a,c,d,e){if(this._outgoingRenderables.indexOf(e)>=0){var f=this._nodes.indexOf(a);this._nodes.splice(f,1),this._modifiers.splice(f,1),this._states.splice(f,1),this._renderables.splice(f,1),this._outgoingRenderables.splice(this._outgoingRenderables.indexOf(e),1),this._showing>=f&&this._showing--}b&&b.call(this)}.bind(this,d,f,g,h))}},d.prototype.render=function(){var a=this._output;a.length>this._nodes.length&&a.splice(this._nodes.length);for(var b=0;b<this._nodes.length;b++)a[b]=this._nodes[b].render();return a},c.exports=famous.views.RenderController=d}),define("famous/views/EdgeSwapper.js",["require","exports","module","famous/transitions/CachedMap","famous/core/Entity","famous/core/EventHandler","famous/core/Transform","./RenderController"],function(a,b,c){function d(a){this._currentTarget=null,this._size=[void 0,void 0],this._controller=new j(a),this._controller.inTransformFrom(f.create(e.bind(this,1e-4))),this._controller.outTransformFrom(f.create(e.bind(this,-1e-4))),this._eventInput=new h,h.setInputHandler(this,this._eventInput),this._entityId=g.register(this),a&&this.setOptions(a)}function e(a,b){return i.translate(this._size[0]*(1-b),0,a*(1-b))}var f=a("famous/transitions/CachedMap"),g=a("famous/core/Entity"),h=a("famous/core/EventHandler"),i=a("famous/core/Transform"),j=a("./RenderController");d.prototype.show=function(a){this._currentTarget&&this._eventInput.unpipe(this._currentTarget),this._currentTarget=a,this._currentTarget&&this._currentTarget.trigger&&this._eventInput.pipe(this._currentTarget),this._controller.show.apply(this._controller,arguments)},d.prototype.setOptions=function(a){this._controller.setOptions(a)},d.prototype.render=function(){return this._entityId},d.prototype.commit=function(a){return this._size[0]=a.size[0],this._size[1]=a.size[1],{transform:a.transform,opacity:a.opacity,origin:a.origin,size:a.size,target:this._controller.render()}},c.exports=famous.views.EdgeSwapper=d}),define("famous/views/FlexibleLayout.js",["require","exports","module","famous/core/Entity","famous/core/Transform","famous/core/OptionsManager","famous/core/EventHandler","famous/transitions/Transitionable"],function(a,b,c){function d(a){this.options=Object.create(d.DEFAULT_OPTIONS),this.optionsManager=new h(this.options),a&&this.setOptions(a),this.id=f.register(this),this._ratios=new j(this.options.ratios),this._nodes=[],this._cachedDirection=null,this._cachedTotalLength=!1,this._cachedLengths=[],this._cachedTransforms=null,this._ratiosDirty=!1,this._eventOutput=new i,i.setOutputHandler(this,this._eventOutput)}function e(a,b,c){var e,f,h,i,j=0,k=b,l=0;for(this._cachedLengths=[],this._cachedTransforms=[],i=0;i<a.length;i++)f=a[i],h=this._nodes[i],"number"!=typeof f?k-=h.getSize()[c]||0:l+=f;for(i=0;i<a.length;i++)h=this._nodes[i],f=a[i],b="number"==typeof f?k*f/l:h.getSize()[c],e=c===d.DIRECTION_X?g.translate(j,0,0):g.translate(0,j,0),this._cachedTransforms.push(e),this._cachedLengths.push(b),j+=b}var f=a("famous/core/Entity"),g=a("famous/core/Transform"),h=a("famous/core/OptionsManager"),i=a("famous/core/EventHandler"),j=a("famous/transitions/Transitionable");d.DIRECTION_X=0,d.DIRECTION_Y=1,d.DEFAULT_OPTIONS={direction:d.DIRECTION_X,transition:!1,ratios:[]},d.prototype.render=function(){return this.id},d.prototype.setOptions=function(a){this.optionsManager.setOptions(a)},d.prototype.sequenceFrom=function(a){if(this._nodes=a,0===this._ratios.get().length){for(var b=[],c=0;c<this._nodes.length;c++)b.push(1);this.setRatios(b)}},d.prototype.setRatios=function(a,b,c){void 0===b&&(b=this.options.transition);var d=this._ratios;0===d.get().length&&(b=void 0),d.isActive()&&d.halt(),d.set(a,b,c),this._ratiosDirty=!0},d.prototype.commit=function(a){var b,c=a.size,d=a.transform,f=a.origin,h=a.opacity,i=this._ratios.get(),j=this.options.direction,k=c[j];(k!==this._cachedTotalLength||this._ratiosDirty||this._ratios.isActive()||j!==this._cachedDirection)&&(e.call(this,i,k,j),k!==this._cachedTotalLength&&(this._cachedTotalLength=k),j!==this._cachedDirection&&(this._cachedDirection=j),this._ratiosDirty&&(this._ratiosDirty=!1));for(var l=[],m=0;m<i.length;m++)b=[void 0,void 0],k=this._cachedLengths[m],b[j]=k,l.push({transform:this._cachedTransforms[m],size:b,target:this._nodes[m].render()});return c&&0!==f[0]&&0!==f[1]&&(d=g.moveThen([-c[0]*f[0],-c[1]*f[1],0],d)),{transform:d,size:c,opacity:h,target:l}},c.exports=famous.views.FlexibleLayout=d}),define("famous/views/Flipper.js",["require","exports","module","famous/core/Transform","famous/transitions/Transitionable","famous/core/RenderNode","famous/core/OptionsManager"],function(a,b,c){function d(a){this.options=Object.create(d.DEFAULT_OPTIONS),this._optionsManager=new g(this.options),a&&this.setOptions(a),this.angle=new f(0),this.frontNode=void 0,this.backNode=void 0,this.flipped=!1}var e=a("famous/core/Transform"),f=a("famous/transitions/Transitionable"),g=(a("famous/core/RenderNode"),a("famous/core/OptionsManager"));d.DIRECTION_X=0,d.DIRECTION_Y=1;var h=1;d.DEFAULT_OPTIONS={transition:!0,direction:d.DIRECTION_X},d.prototype.flip=function(a,b){var c=this.flipped?0:Math.PI;this.setAngle(c,a,b),this.flipped=!this.flipped},d.prototype.setAngle=function(a,b,c){void 0===b&&(b=this.options.transition),this.angle.isActive()&&this.angle.halt(),this.angle.set(a,b,c)},d.prototype.setOptions=function(a){return this._optionsManager.setOptions(a)},d.prototype.setFront=function(a){this.frontNode=a},d.prototype.setBack=function(a){this.backNode=a},d.prototype.render=function(){var a,b,c=this.angle.get();this.options.direction===d.DIRECTION_X?(a=e.rotateY(c),b=e.rotateY(c+Math.PI)):(a=e.rotateX(c),b=e.rotateX(c+Math.PI));var f=[];return this.frontNode&&f.push({transform:a,target:this.frontNode.render()}),this.backNode&&f.push({transform:e.moveThen([0,0,h],b),target:this.backNode.render()}),f},c.exports=famous.views.Flipper=d}),define("famous/views/GridLayout",["require","exports","module","famous/core/Entity","famous/core/RenderNode","famous/core/Transform","famous/core/ViewSequence","famous/core/EventHandler","famous/core/Modifier","famous/core/OptionsManager","famous/transitions/Transitionable","famous/transitions/TransitionableTransform"],function(a,b,c){function d(a){this.options=Object.create(d.DEFAULT_OPTIONS),this.optionsManager=new m(this.options),a&&this.setOptions(a),this.id=h.register(this),this._modifiers=[],this._states=[],this._contextSizeCache=[0,0],this._dimensionsCache=[0,0],this._activeCount=0,this._eventOutput=new k,k.setOutputHandler(this,this._eventOutput)}function e(a,b,c){var d=[a[0],a[1]];d[0]-=this.options.gutterSize[0]*(b-1),d[1]-=this.options.gutterSize[1]*(c-1);for(var e,h=Math.round(d[1]/c),i=Math.round(d[0]/b),j=0,k=0,l=0;c>l;l++){e=0;for(var m=0;b>m;m++)void 0===this._modifiers[k]?f.call(this,k,[i,h],[e,j,0],1):g.call(this,k,[i,h],[e,j,0],1),k++,e+=i+this.options.gutterSize[0];j+=h+this.options.gutterSize[1]}for(this._dimensionsCache=[this.options.dimensions[0],this.options.dimensions[1]],this._contextSizeCache=[a[0],a[1]],this._activeCount=c*b,l=this._activeCount;l<this._modifiers.length;l++)g.call(this,l,[Math.round(i),Math.round(h)],[0,0],0);this._eventOutput.emit("reflow")}function f(a,b,c,d){var e={transform:new o(i.translate.apply(null,c)),opacity:new n(d),size:new n(b)},f=new l({transform:e.transform,opacity:e.opacity,size:e.size});this._states[a]=e,this._modifiers[a]=f}function g(a,b,c,d){var e=this._states[a],f=e.size,g=e.opacity,h=e.transform,i=this.options.transition;h.halt(),g.halt(),f.halt(),h.setTranslate(c,i),f.set(b,i),g.set(d,i)}var h=a("famous/core/Entity"),i=(a("famous/core/RenderNode"),a("famous/core/Transform")),j=a("famous/core/ViewSequence"),k=a("famous/core/EventHandler"),l=a("famous/core/Modifier"),m=a("famous/core/OptionsManager"),n=a("famous/transitions/Transitionable"),o=a("famous/transitions/TransitionableTransform");d.DEFAULT_OPTIONS={dimensions:[1,1],transition:!1,gutterSize:[0,0]},d.prototype.render=function(){return this.id},d.prototype.setOptions=function(a){return this.optionsManager.setOptions(a)},d.prototype.sequenceFrom=function(a){a instanceof Array&&(a=new j(a)),this.sequence=a},d.prototype.commit=function(a){var b=a.transform,c=a.opacity,d=a.origin,f=a.size,g=this.options.dimensions[0],h=this.options.dimensions[1];(f[0]!==this._contextSizeCache[0]||f[1]!==this._contextSizeCache[1]||g!==this._dimensionsCache[0]||h!==this._dimensionsCache[1])&&e.call(this,f,g,h);for(var j=this.sequence,k=[],l=0;j&&l<this._modifiers.length;){var m=j.get(),n=this._modifiers[l];l>=this._activeCount&&this._states[l].opacity.isActive()&&(this._modifiers.splice(l,1),this._states.splice(l,1)),m&&k.push(n.modify({origin:d,target:m.render()})),j=j.getNext(),l++}return f&&(b=i.moveThen([-f[0]*d[0],-f[1]*d[1],0],b)),{transform:b,opacity:c,size:f,target:k}},c.exports=famous.views.GridLayout=d}),define("famous/views/HeaderFooterLayout.js",["require","exports","module","famous/core/Entity","famous/core/RenderNode","famous/core/Transform","famous/core/OptionsManager"],function(a,b,c){function d(a){this.options=Object.create(d.DEFAULT_OPTIONS),this._optionsManager=new k(this.options),a&&this.setOptions(a),this._entityId=h.register(this),this.header=new i,this.footer=new i,this.content=new i}function e(a,b){var c=a.getSize();return c?c[this.options.direction]:b}function f(a){return this.options.direction===d.DIRECTION_X?j.translate(a,0,0):j.translate(0,a,0)}function g(a,b){return this.options.direction===d.DIRECTION_X?[a,b[1]]:[b[0],a]}var h=a("famous/core/Entity"),i=a("famous/core/RenderNode"),j=a("famous/core/Transform"),k=a("famous/core/OptionsManager");d.DIRECTION_X=0,d.DIRECTION_Y=1,d.DEFAULT_OPTIONS={direction:d.DIRECTION_Y,headerSize:void 0,footerSize:void 0,defaultHeaderSize:0,defaultFooterSize:0},d.prototype.render=function(){return this._entityId},d.prototype.setOptions=function(a){return this._optionsManager.setOptions(a)},d.prototype.commit=function(a){var b=a.transform,c=a.origin,d=a.size,h=a.opacity,i=void 0!==this.options.headerSize?this.options.headerSize:e.call(this,this.header,this.options.defaultHeaderSize),k=void 0!==this.options.footerSize?this.options.footerSize:e.call(this,this.footer,this.options.defaultFooterSize),l=d[this.options.direction]-i-k;d&&(b=j.moveThen([-d[0]*c[0],-d[1]*c[1],0],b));var m=[{size:g.call(this,i,d),target:this.header.render()},{transform:f.call(this,i),size:g.call(this,l,d),target:this.content.render()},{transform:f.call(this,i+l),size:g.call(this,k,d),target:this.footer.render()}];return{transform:b,opacity:h,size:d,target:m}},c.exports=famous.views.HeaderFooterLayout=d}),define("famous/views/Lightbox.js",["require","exports","module","famous/core/Transform","famous/core/Modifier","famous/core/RenderNode","famous/utilities/Utility","famous/core/OptionsManager","famous/transitions/Transitionable","famous/transitions/TransitionableTransform"],function(a,b,c){function d(a){this.options=Object.create(d.DEFAULT_OPTIONS),this._optionsManager=new i(this.options),a&&this.setOptions(a),this._showing=!1,this.nodes=[],this.transforms=[],this.states=[]}var e=a("famous/core/Transform"),f=a("famous/core/Modifier"),g=a("famous/core/RenderNode"),h=a("famous/utilities/Utility"),i=a("famous/core/OptionsManager"),j=a("famous/transitions/Transitionable"),k=a("famous/transitions/TransitionableTransform");d.DEFAULT_OPTIONS={inTransform:e.scale(.001,.001,.001),inOpacity:0,inOrigin:[.5,.5],outTransform:e.scale(.001,.001,.001),outOpacity:0,outOrigin:[.5,.5],showTransform:e.identity,showOpacity:1,showOrigin:[.5,.5],inTransition:!0,outTransition:!0,overlap:!1},d.prototype.setOptions=function(a){return this._optionsManager.setOptions(a)},d.prototype.show=function(a,b,c){if(!a)return this.hide(c);if(b instanceof Function&&(c=b,b=void 0),this._showing){if(!this.options.overlap)return this.hide(this.show.bind(this,a,b,c));this.hide()}this._showing=!0;var d={transform:new k(this.options.inTransform),origin:new j(this.options.inOrigin),opacity:new j(this.options.inOpacity)},e=new f({transform:d.transform,opacity:d.opacity,origin:d.origin}),i=new g;i.add(e).add(a),this.nodes.push(i),this.states.push(d),this.transforms.push(e);var l=c?h.after(3,c):void 0;b||(b=this.options.inTransition),d.transform.set(this.options.showTransform,b,l),d.opacity.set(this.options.showOpacity,b,l),d.origin.set(this.options.showOrigin,b,l)},d.prototype.hide=function(a,b){if(this._showing){this._showing=!1,a instanceof Function&&(b=a,a=void 0);var c=this.nodes[this.nodes.length-1],d=this.transforms[this.transforms.length-1],e=this.states[this.states.length-1],f=h.after(3,function(){this.nodes.splice(this.nodes.indexOf(c),1),this.states.splice(this.states.indexOf(e),1),this.transforms.splice(this.transforms.indexOf(d),1),b&&b.call(this)}.bind(this));a||(a=this.options.outTransition),e.transform.set(this.options.outTransform,a,f),e.opacity.set(this.options.outOpacity,a,f),e.origin.set(this.options.outOrigin,a,f)}},d.prototype.render=function(){for(var a=[],b=0;b<this.nodes.length;b++)a.push(this.nodes[b].render());return a},c.exports=famous.views.Lightbox=d}),define("famous/views/Scroller.js",["require","exports","module","famous/core/Entity","famous/core/Group","famous/core/OptionsManager","famous/core/Transform","famous/utilities/Utility","famous/core/ViewSequence","famous/core/EventHandler"],function(a,b,c){function d(a){this.options=Object.create(this.constructor.DEFAULT_OPTIONS),this._optionsManager=new l(this.options),a&&this._optionsManager.setOptions(a),this._node=null,this._position=0,this._positionOffset=0,this._positionGetter=null,this._outputFunction=null,this._masterOutputFunction=null,this.outputFrom(),this._onEdge=0,this.group=new k,this.group.add({render:i.bind(this)}),this._entityId=j.register(this),this._size=[void 0,void 0],this._contextSize=[void 0,void 0],this._eventInput=new p,this._eventOutput=new p,p.setInputHandler(this,this._eventInput),p.setOutputHandler(this,this._eventOutput)}function e(a){a||(a=this._contextSize);var b=this.options.direction===n.Direction.X?0:1;return void 0===a[b]?this._contextSize[b]:a[b]}function f(a,b,c){var d=a.getSize?a.getSize():this._contextSize,f=this._outputFunction(b);return c.push({transform:f,target:a.render()}),e.call(this,d)}function g(){return this.options.clipSize?this.options.clipSize:e.call(this,this._contextSize)}function h(){for(var a=e.call(this,this._node.getSize()),b=this._node&&this._node.getNext?this._node.getNext():null;b&&this._position+this._positionOffset>=a;)this._positionOffset-=a,this._node=b,a=e.call(this,this._node.getSize()),b=this._node&&this._node.getNext?this._node.getNext():null;
for(var c=this._node&&this._node.getPrevious?this._node.getPrevious():null;c&&this._position+this._positionOffset<0;){var d=e.call(this,c.getSize());this._positionOffset+=d,this._node=c,c=this._node&&this._node.getPrevious?this._node.getPrevious():null}}function i(){var a=null,b=this._position,c=[];this._onEdge=0;for(var d=-this._positionOffset,i=g.call(this),j=this._node;j&&d-b<i+this.options.margin;)d+=f.call(this,j,d,c),j=j.getNext?j.getNext():null;var k=this._node,l=e.call(this,k.getSize());if(i>d){for(;k&&i>l;)k=k.getPrevious(),k&&(l+=e.call(this,k.getSize()));for(k=this._node;k&&i>l;)k=k.getNext(),k&&(l+=e.call(this,k.getSize()))}var m=void 0!==l&&i>l?l:i;for(!j&&m>=d-b?(this._onEdge=1,this._eventOutput.emit("edgeHit",{position:d-m})):!this._node.getPrevious()&&0>=b&&(this._onEdge=-1,this._eventOutput.emit("edgeHit",{position:0})),j=this._node&&this._node.getPrevious?this._node.getPrevious():null,d=-this._positionOffset,j&&(a=j.getSize?j.getSize():this._contextSize,d-=e.call(this,a));j&&d-b>-(g.call(this)+this.options.margin);)f.call(this,j,d,c),j=j.getPrevious?j.getPrevious():null,j&&(a=j.getSize?j.getSize():this._contextSize,d-=e.call(this,a));return h.call(this),c}var j=a("famous/core/Entity"),k=a("famous/core/Group"),l=a("famous/core/OptionsManager"),m=a("famous/core/Transform"),n=a("famous/utilities/Utility"),o=a("famous/core/ViewSequence"),p=a("famous/core/EventHandler");d.DEFAULT_OPTIONS={direction:n.Direction.Y,margin:0,clipSize:void 0,groupScroll:!1},d.prototype.setOptions=function(a){this._optionsManager.setOptions(a),this.options.groupScroll?this.group.pipe(this._eventOutput):this.group.unpipe(this._eventOutput)},d.prototype.onEdge=function(){return this._onEdge},d.prototype.outputFrom=function(a,b){a||(a=function(a){return this.options.direction===n.Direction.X?m.translate(a,0):m.translate(0,a)}.bind(this),b||(b=a)),this._outputFunction=a,this._masterOutputFunction=b?b:function(b){return m.inverse(a(-b))}},d.prototype.positionFrom=function(a){a instanceof Function?this._positionGetter=a:a&&a.get?this._positionGetter=a.get.bind(a):(this._positionGetter=null,this._position=a),this._positionGetter&&(this._position=this._positionGetter.call(this))},d.prototype.sequenceFrom=function(a){a instanceof Array&&(a=new o({array:a})),this._node=a,this._positionOffset=0},d.prototype.getSize=function(a){return a?this._contextSize:this._size},d.prototype.render=function(){return this._node?(this._positionGetter&&(this._position=this._positionGetter.call(this)),this._entityId):null},d.prototype.commit=function(a){var b=a.transform,c=a.opacity,d=a.origin,e=a.size;this.options.clipSize||e[0]===this._contextSize[0]&&e[1]===this._contextSize[1]||(this._onEdge=0,this._contextSize[0]=e[0],this._contextSize[1]=e[1],this.options.direction===n.Direction.X?(this._size[0]=g.call(this),this._size[1]=void 0):(this._size[0]=void 0,this._size[1]=g.call(this)));var f=this._masterOutputFunction(-this._position);return{transform:m.multiply(b,f),size:e,opacity:c,origin:d,target:this.group.render()}},c.exports=famous.views.Scroller=d}),define("famous/views/Scrollview.js",["require","exports","module","famous/physics/PhysicsEngine","famous/physics/bodies/Particle","famous/physics/forces/Drag","famous/physics/forces/Spring","famous/core/EventHandler","famous/core/OptionsManager","famous/core/ViewSequence","famous/views/Scroller","famous/utilities/Utility","famous/inputs/GenericSync","famous/inputs/ScrollSync","famous/inputs/TouchSync"],function(a,b,c){function d(a){this.options=Object.create(d.DEFAULT_OPTIONS),this._optionsManager=new v(this.options),this._node=null,this._physicsEngine=new q,this._particle=new r,this._physicsEngine.addBody(this._particle),this.spring=new t({anchor:[0,0,0]}),this.drag=new s({forceFunction:s.FORCE_FUNCTIONS.QUADRATIC}),this.friction=new s({forceFunction:s.FORCE_FUNCTIONS.LINEAR}),this.sync=new z(["scroll","touch"],{direction:this.options.direction}),this._eventInput=new u,this._eventOutput=new u,this._eventInput.pipe(this.sync),this.sync.pipe(this._eventInput),u.setInputHandler(this,this._eventInput),u.setOutputHandler(this,this._eventOutput),this._touchCount=0,this._springState=D.NONE,this._onEdge=0,this._pageSpringPosition=0,this._edgeSpringPosition=0,this._touchVelocity=void 0,this._earlyEnd=!1,this._needsPaginationCheck=!1,this._scroller=new x,this._scroller.positionFrom(this.getPosition.bind(this)),this.setOptions(a),h.call(this)}function e(a){this._touchCount=a.count,void 0===a.count&&(this._touchCount=1),j.call(this),this.setVelocity(0),this._touchVelocity=0,this._earlyEnd=!1}function f(a){var b=-a.velocity,c=-a.delta;this._onEdge&&a.slip&&(0>b&&this._onEdge<0||b>0&&this._onEdge>0?this._earlyEnd||(g.call(this,a),this._earlyEnd=!0):this._earlyEnd&&Math.abs(b)>Math.abs(this.getVelocity())&&e.call(this,a)),this._earlyEnd||(this._touchVelocity=b,a.slip?this.setVelocity(b):this.setPosition(this.getPosition()+c))}function g(a){if(this._touchCount=a.count||0,!this._touchCount){j.call(this),this._onEdge&&n.call(this,this._edgeSpringPosition,D.EDGE),i.call(this);var b=-a.velocity,c=this.options.speedLimit;a.slip&&(c*=this.options.edgeGrip),-c>b?b=-c:b>c&&(b=c),this.setVelocity(b),this._touchVelocity=void 0,this._needsPaginationCheck=!0}}function h(){this._eventInput.bindThis(this),this._eventInput.on("start",e),this._eventInput.on("update",f),this._eventInput.on("end",g),this._scroller.on("edgeHit",function(a){this._edgeSpringPosition=a.position}.bind(this))}function i(){this._springState?this._physicsEngine.attach([this.spring],this._particle):this._physicsEngine.attach([this.drag,this.friction],this._particle)}function j(){this._springState=D.NONE,this._physicsEngine.detachAll()}function k(a){var b=this.options.direction,c=(a.getSize()||this._scroller.getSize())[b];return c||(c=this._scroller.getSize()[b]),c}function l(a){!this._onEdge&&a?(this.sync.setOptions({scale:this.options.edgeGrip}),this._touchCount||this._springState===D.EDGE||n.call(this,this._edgeSpringPosition,D.EDGE)):this._onEdge&&!a&&(this.sync.setOptions({scale:1}),this._springState&&Math.abs(this.getVelocity())<.001&&(j.call(this),i.call(this))),this._onEdge=a}function m(){if(this._needsPaginationCheck&&!this._touchCount&&this._springState!==D.EDGE){var a=this.getVelocity();if(!(Math.abs(a)>=this.options.pageStopSpeed)){var b=this.getPosition(),c=Math.abs(a)>this.options.pageSwitchSpeed,d=k.call(this,this._node),e=b>.5*d,f=a>0;e&&!c||c&&f?this.goToNextPage():n.call(this,0,D.PAGE),this._needsPaginationCheck=!1}}}function n(a,b){var c;b===D.EDGE?(this._edgeSpringPosition=a,c={anchor:[this._edgeSpringPosition,0,0],period:this.options.edgePeriod,dampingRatio:this.options.edgeDamp}):b===D.PAGE&&(this._pageSpringPosition=a,c={anchor:[this._pageSpringPosition,0,0],period:this.options.pagePeriod,dampingRatio:this.options.pageDamp}),this.spring.setOptions(c),b&&!this._springState&&(j.call(this),this._springState=b,i.call(this)),this._springState=b}function o(){for(var a=this.getPosition(),b=k.call(this,this._node),c=this._node.getNext();a>b+C&&c;)p.call(this,-b),a-=b,this._scroller.sequenceFrom(c),this._node=c,c=this._node.getNext(),b=k.call(this,this._node);for(var d,e=this._node.getPrevious();-C>a&&e;)d=k.call(this,e),this._scroller.sequenceFrom(e),this._node=e,p.call(this,d),a+=d,e=this._node.getPrevious()}function p(a){this._edgeSpringPosition+=a,this._pageSpringPosition+=a,this.setPosition(this.getPosition()+a),this._springState===D.EDGE?this.spring.setOptions({anchor:[this._edgeSpringPosition,0,0]}):this._springState===D.PAGE&&this.spring.setOptions({anchor:[this._pageSpringPosition,0,0]})}var q=a("famous/physics/PhysicsEngine"),r=a("famous/physics/bodies/Particle"),s=a("famous/physics/forces/Drag"),t=a("famous/physics/forces/Spring"),u=a("famous/core/EventHandler"),v=a("famous/core/OptionsManager"),w=a("famous/core/ViewSequence"),x=a("famous/views/Scroller"),y=a("famous/utilities/Utility"),z=a("famous/inputs/GenericSync"),A=a("famous/inputs/ScrollSync"),B=a("famous/inputs/TouchSync");z.register({scroll:A,touch:B});var C=.5,D={NONE:0,EDGE:1,PAGE:2};d.DEFAULT_OPTIONS={direction:y.Direction.Y,rails:!0,friction:.001,drag:1e-4,edgeGrip:.5,edgePeriod:300,edgeDamp:1,margin:1e3,paginated:!1,pagePeriod:500,pageDamp:.8,pageStopSpeed:10,pageSwitchSpeed:.5,speedLimit:10,groupScroll:!1},d.prototype.outputFrom=function(){return this._scroller.outputFrom.apply(this._scroller,arguments)},d.prototype.getPosition=function(){return this._particle.getPosition1D()},d.prototype.setPosition=function(a){this._particle.setPosition1D(a)},d.prototype.getVelocity=function(){return this._touchCount?this._touchVelocity:this._particle.getVelocity1D()},d.prototype.setVelocity=function(a){this._particle.setVelocity1D(a)},d.prototype.setOptions=function(a){a&&(void 0!==a.direction&&("x"===a.direction?a.direction=y.Direction.X:"y"===a.direction&&(a.direction=y.Direction.Y)),this._scroller.setOptions(a),this._optionsManager.setOptions(a)),this._scroller.setOptions(this.options),this.options.groupScroll?this._scroller.pipe(this._eventInput):this._scroller.unpipe(this._eventInput),this.drag.setOptions({strength:this.options.drag}),this.friction.setOptions({strength:this.options.friction}),this.spring.setOptions({period:this.options.edgePeriod,dampingRatio:this.options.edgeDamp}),this.sync.setOptions({rails:this.options.rails,direction:this.options.direction===y.Direction.X?z.DIRECTION_X:z.DIRECTION_Y})},d.prototype.goToPreviousPage=function(){if(!this._node)return null;var a=this._node.getPrevious();if(a){var b=this.getPosition(),c=k.call(this,a);this._scroller.sequenceFrom(a),this._node=a;var d=C>b?-c:0;n.call(this,d,D.PAGE),p.call(this,c)}return this._eventOutput.emit("pageChange",{direction:-1}),a},d.prototype.goToNextPage=function(){if(!this._node)return null;var a=this._node.getNext();if(a){var b=this.getPosition(),c=k.call(this,this._node),d=k.call(this,a);this._scroller.sequenceFrom(a),this._node=a;var e=b>c-C?c+d:c;n.call(this,e,D.PAGE),p.call(this,-c)}return this._eventOutput.emit("pageChange",{direction:1}),a},d.prototype.sequenceFrom=function(a){return a instanceof Array&&(a=new w({array:a})),this._node=a,this._scroller.sequenceFrom(a)},d.prototype.getSize=function(){return this._scroller.getSize.apply(this._scroller,arguments)},d.prototype.render=function(){return this._node?(o.call(this),l.call(this,this._scroller.onEdge()),this.options.paginated&&m.call(this),this._scroller.render()):null},c.exports=famous.views.Scrollview=d}),define("famous/views/ScrollContainer.js",["require","exports","module","famous/surfaces/ContainerSurface","famous/core/EventHandler","./Scrollview","famous/utilities/Utility","famous/core/OptionsManager"],function(a,b,c){function d(a){this.options=Object.create(d.DEFAULT_OPTIONS),this._optionsManager=new i(this.options),a&&this.setOptions(a),this.container=new e(this.options.container),this.scrollview=new g(this.options.scrollview),this.container.add(this.scrollview),f.setInputHandler(this,this.scrollview),f.setOutputHandler(this,this.scrollview),this.scrollview.subscribe(this.container)}var e=a("famous/surfaces/ContainerSurface"),f=a("famous/core/EventHandler"),g=a("./Scrollview"),h=a("famous/utilities/Utility"),i=a("famous/core/OptionsManager");d.DEFAULT_OPTIONS={container:{properties:{overflow:"hidden"}},scrollview:{direction:h.Direction.X}},d.prototype.setOptions=function(a){return this._optionsManager.setOptions(a)},d.prototype.sequenceFrom=function(){return this.scrollview.sequenceFrom.apply(this.scrollview,arguments)},d.prototype.getSize=function(){return this.container.getSize.apply(this.container,arguments)},d.prototype.render=function(){return this.container.render.apply(this.container,arguments)},c.exports=famous.views.ScrollContainer=d}),define("famous/widgets/NavigationBar.js",["require","exports","module","famous/core/Scene","famous/core/Surface","famous/core/Transform","famous/core/View"],function(a,b,c){function d(){h.apply(this,arguments),this.title=new f({classes:this.options.classes,content:this.options.content}),this.back=new f({size:[this.options.size[1],this.options.size[1]],classes:this.options.classes,content:this.options.backContent}),this.back.on("click",function(){this._eventOutput.emit("back",{})}.bind(this)),this.more=new f({size:[this.options.size[1],this.options.size[1]],classes:this.options.classes,content:this.options.moreContent}),this.more.on("click",function(){this._eventOutput.emit("more",{})}.bind(this)),this.layout=new e({id:"master",size:this.options.size,target:[{transform:g.inFront,origin:[0,.5],target:this.back},{origin:[.5,.5],target:this.title},{transform:g.inFront,origin:[1,.5],target:this.more}]}),this._add(this.layout),this._optionsManager.on("change",function(a){var b=a.id,c=a.value;"size"===b?(this.layout.id.master.setSize(c),this.title.setSize(c),this.back.setSize([c[1],c[1]]),this.more.setSize([c[1],c[1]])):"backClasses"===b?this.back.setOptions({classes:this.options.classes.concat(this.options.backClasses)}):"backContent"===b?this.back.setContent(this.options.backContent):"classes"===b?(this.title.setOptions({classes:this.options.classes}),this.back.setOptions({classes:this.options.classes.concat(this.options.backClasses)}),this.more.setOptions({classes:this.options.classes.concat(this.options.moreClasses)})):"content"===b?this.setContent(this.options.content):"moreClasses"===b?this.more.setOptions({classes:this.options.classes.concat(this.options.moreClasses)}):"moreContent"===b&&this.more.setContent(this.options.content)}.bind(this))}var e=a("famous/core/Scene"),f=a("famous/core/Surface"),g=a("famous/core/Transform"),h=a("famous/core/View");d.prototype=Object.create(h.prototype),d.prototype.constructor=d,d.DEFAULT_OPTIONS={size:[void 0,50],backClasses:["back"],backContent:"&#x25c0;",classes:["navigation"],content:"",moreClasses:["more"],moreContent:"&#x271a;"},d.prototype.setContent=function(a){return this.title.setContent(a)},c.exports=famous.widgets.NavigationBar=d}),define("famous/widgets/Slider.js",["require","exports","module","famous/core/Surface","famous/surfaces/CanvasSurface","famous/core/Transform","famous/core/EventHandler","famous/math/Utilities","famous/core/OptionsManager","famous/inputs/MouseSync","famous/inputs/TouchSync","famous/inputs/GenericSync"],function(a,b,c){function d(a){this.options=Object.create(d.DEFAULT_OPTIONS),this.optionsManager=new k(this.options),a&&this.setOptions(a),this.indicator=new g({size:this.options.indicatorSize,classes:["slider-back"]}),this.label=new f({size:this.options.labelSize,content:this.options.label,properties:{pointerEvents:"none"},classes:["slider-label"]}),this.eventOutput=new i,this.eventInput=new i,i.setInputHandler(this,this.eventInput),i.setOutputHandler(this,this.eventOutput);var b=(this.options.range[1]-this.options.range[0])/this.options.indicatorSize[0];this.sync=new n(["mouse","touch"],{scale:b,direction:n.DIRECTION_X}),this.indicator.pipe(this.sync),this.sync.pipe(this),this.eventInput.on("update",function(a){this.set(a.position)}.bind(this)),this._drawPos=0,e.call(this)}function e(){this.label.setContent(this.options.label+'<span style="float: right">'+this.get().toFixed(this.options.precision)+"</span>")}var f=a("famous/core/Surface"),g=a("famous/surfaces/CanvasSurface"),h=a("famous/core/Transform"),i=a("famous/core/EventHandler"),j=a("famous/math/Utilities"),k=a("famous/core/OptionsManager"),l=a("famous/inputs/MouseSync"),m=a("famous/inputs/TouchSync"),n=a("famous/inputs/GenericSync");n.register({mouse:l,touch:m}),d.DEFAULT_OPTIONS={size:[200,60],indicatorSize:[200,30],labelSize:[200,30],range:[0,1],precision:2,value:0,label:"",fillColor:"rgba(170, 170, 170, 1)"},d.prototype.setOptions=function(a){return this.optionsManager.setOptions(a)},d.prototype.get=function(){return this.options.value},d.prototype.set=function(a){a!==this.options.value&&(this.options.value=j.clamp(a,this.options.range),e.call(this),this.eventOutput.emit("change",{value:a}))},d.prototype.getSize=function(){return this.options.size},d.prototype.render=function(){var a=this.options.range,b=Math.floor((this.get()-a[0])/(a[1]-a[0])*this.options.indicatorSize[0]);if(b<this._drawPos)this.indicator.getContext("2d").clearRect(b,0,this._drawPos-b+1,this.options.indicatorSize[1]);else if(b>this._drawPos){var c=this.indicator.getContext("2d");c.fillStyle=this.options.fillColor,c.fillRect(this._drawPos-1,0,b-this._drawPos+1,this.options.indicatorSize[1])}return this._drawPos=b,{size:this.options.size,target:[{origin:[0,0],target:this.indicator.render()},{transform:h.translate(0,0,1),origin:[0,0],target:this.label.render()}]}},c.exports=famous.widgets.Slider=d}),define("famous/widgets/ToggleButton.js",["require","exports","module","famous/core/Surface","famous/core/EventHandler","famous/views/RenderController"],function(a,b,c){function d(a){this.options={content:"",offClasses:["off"],onClasses:["on"],size:void 0,outTransition:{curve:"easeInOut",duration:300},inTransition:{curve:"easeInOut",duration:300},toggleMode:d.TOGGLE,crossfade:!0},this._eventOutput=new f,f.setOutputHandler(this,this._eventOutput),this.offSurface=new e,this.offSurface.on("click",function(){this.options.toggleMode!==d.OFF&&this.select()}.bind(this)),this.offSurface.pipe(this._eventOutput),this.onSurface=new e,this.onSurface.on("click",function(){this.options.toggleMode!==d.ON&&this.deselect()}.bind(this)),this.onSurface.pipe(this._eventOutput),this.arbiter=new g({overlap:this.options.crossfade}),this.deselect(),a&&this.setOptions(a)}var e=a("famous/core/Surface"),f=a("famous/core/EventHandler"),g=a("famous/views/RenderController");d.OFF=0,d.ON=1,d.TOGGLE=2,d.prototype.select=function(){this.selected=!0,this.arbiter.show(this.onSurface,this.options.inTransition),this._eventOutput.emit("select")},d.prototype.deselect=function(){this.selected=!1,this.arbiter.show(this.offSurface,this.options.outTransition),this._eventOutput.emit("deselect")},d.prototype.isSelected=function(){return this.selected},d.prototype.setOptions=function(a){void 0!==a.content&&(this.options.content=a.content,this.offSurface.setContent(this.options.content),this.onSurface.setContent(this.options.content)),a.offClasses&&(this.options.offClasses=a.offClasses,this.offSurface.setClasses(this.options.offClasses)),a.onClasses&&(this.options.onClasses=a.onClasses,this.onSurface.setClasses(this.options.onClasses)),void 0!==a.size&&(this.options.size=a.size,this.onSurface.setSize(this.options.size),this.offSurface.setSize(this.options.size)),void 0!==a.toggleMode&&(this.options.toggleMode=a.toggleMode),void 0!==a.outTransition&&(this.options.outTransition=a.outTransition),void 0!==a.inTransition&&(this.options.inTransition=a.inTransition),void 0!==a.crossfade&&(this.options.crossfade=a.crossfade,this.arbiter.setOptions({overlap:this.options.crossfade}))},d.prototype.getSize=function(){return this.options.size},d.prototype.render=function(){return this.arbiter.render()},c.exports=famous.widgets.ToggleButton=d}),define("famous/widgets/TabBar.js",["require","exports","module","famous/utilities/Utility","famous/core/View","famous/views/GridLayout","./ToggleButton"],function(a,b,c){function d(){h.apply(this,arguments),this.layout=new i,this.buttons=[],this._buttonIds={},this._buttonCallbacks={},this.layout.sequenceFrom(this.buttons),this._add(this.layout),this._optionsManager.on("change",e.bind(this))}function e(a){var b=a.id,c=a.value;if("direction"===b)this.layout.setOptions({dimensions:f.call(this.buttons.length,this.options.direction)});else if("buttons"===b)for(var d in this.buttons)this.buttons[d].setOptions(c);else if("sections"===b)for(var e in this.options.sections)this.defineSection(e,this.options.sections[e])}function f(a,b){return b===g.Direction.X?[a,1]:[1,a]}var g=a("famous/utilities/Utility"),h=a("famous/core/View"),i=a("famous/views/GridLayout"),j=a("./ToggleButton");d.prototype=Object.create(h.prototype),d.prototype.constructor=d,d.DEFAULT_OPTIONS={sections:[],widget:j,size:[void 0,50],direction:g.Direction.X,buttons:{toggleMode:j.ON}},d.prototype.defineSection=function(a,b){var c,d=this._buttonIds[a];if(void 0===d){d=this.buttons.length,this._buttonIds[a]=d;var e=this.options.widget;c=new e,this.buttons[d]=c,this.layout.setOptions({dimensions:f(this.buttons.length,this.options.direction)})}else c=this.buttons[d],c.unbind("select",this._buttonCallbacks[a]);this.options.buttons&&c.setOptions(this.options.buttons),c.setOptions(b),this._buttonCallbacks[a]=this.select.bind(this,a),c.on("select",this._buttonCallbacks[a])},d.prototype.select=function(a){var b=this._buttonIds[a];this.buttons[b]&&this.buttons[b].isSelected()?this._eventOutput.emit("select",{id:a}):this.buttons[b]&&this.buttons[b].select();for(var c=0;c<this.buttons.length;c++)c!==b&&this.buttons[c].deselect()},c.exports=famous.widgets.TabBar=d});