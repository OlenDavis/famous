/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * Owner: mark@famo.us
 * @license MPL 2.0
 * @copyright Famous Industries, Inc. 2014
 */

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * Owner: david@famo.us
 * @license MPL 2.0
 * @copyright Famous Industries, Inc. 2014
 */

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * @license MPL 2.0
 * @copyright Famous Industries, Inc. 2014
 */

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * Owner: felix@famo.us
 * @license MPL 2.0
 * @copyright Famous Industries, Inc. 2014
 */

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * Owner: mike@famo.us
 * @license MPL 2.0
 * @copyright Famous Industries, Inc. 2014
 */

define("famous/core/Entity.js",["require","exports","module"],function(e,t,n){function i(e){return r[e]}function s(e,t){r[e]=t}function o(e){var t=r.length;return s(t,e),t}function u(e){s(e,null)}var r=[];n.exports={register:o,unregister:u,get:i,set:s}}),define("famous/core/Transform.js",["require","exports","module"],function(e,t,n){function i(e){return e.length===2?e[0]*e[0]+e[1]*e[1]:e[0]*e[0]+e[1]*e[1]+e[2]*e[2]}function s(e){return Math.sqrt(i(e))}function o(e){return e<0?-1:1}var r={};r.precision=1e-6,r.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r.multiply4x4=function(t,n){return[t[0]*n[0]+t[4]*n[1]+t[8]*n[2]+t[12]*n[3],t[1]*n[0]+t[5]*n[1]+t[9]*n[2]+t[13]*n[3],t[2]*n[0]+t[6]*n[1]+t[10]*n[2]+t[14]*n[3],t[3]*n[0]+t[7]*n[1]+t[11]*n[2]+t[15]*n[3],t[0]*n[4]+t[4]*n[5]+t[8]*n[6]+t[12]*n[7],t[1]*n[4]+t[5]*n[5]+t[9]*n[6]+t[13]*n[7],t[2]*n[4]+t[6]*n[5]+t[10]*n[6]+t[14]*n[7],t[3]*n[4]+t[7]*n[5]+t[11]*n[6]+t[15]*n[7],t[0]*n[8]+t[4]*n[9]+t[8]*n[10]+t[12]*n[11],t[1]*n[8]+t[5]*n[9]+t[9]*n[10]+t[13]*n[11],t[2]*n[8]+t[6]*n[9]+t[10]*n[10]+t[14]*n[11],t[3]*n[8]+t[7]*n[9]+t[11]*n[10]+t[15]*n[11],t[0]*n[12]+t[4]*n[13]+t[8]*n[14]+t[12]*n[15],t[1]*n[12]+t[5]*n[13]+t[9]*n[14]+t[13]*n[15],t[2]*n[12]+t[6]*n[13]+t[10]*n[14]+t[14]*n[15],t[3]*n[12]+t[7]*n[13]+t[11]*n[14]+t[15]*n[15]]},r.multiply=function(t,n){return[t[0]*n[0]+t[4]*n[1]+t[8]*n[2],t[1]*n[0]+t[5]*n[1]+t[9]*n[2],t[2]*n[0]+t[6]*n[1]+t[10]*n[2],0,t[0]*n[4]+t[4]*n[5]+t[8]*n[6],t[1]*n[4]+t[5]*n[5]+t[9]*n[6],t[2]*n[4]+t[6]*n[5]+t[10]*n[6],0,t[0]*n[8]+t[4]*n[9]+t[8]*n[10],t[1]*n[8]+t[5]*n[9]+t[9]*n[10],t[2]*n[8]+t[6]*n[9]+t[10]*n[10],0,t[0]*n[12]+t[4]*n[13]+t[8]*n[14]+t[12],t[1]*n[12]+t[5]*n[13]+t[9]*n[14]+t[13],t[2]*n[12]+t[6]*n[13]+t[10]*n[14]+t[14],1]},r.thenMove=function(t,n){return n[2]||(n[2]=0),[t[0],t[1],t[2],0,t[4],t[5],t[6],0,t[8],t[9],t[10],0,t[12]+n[0],t[13]+n[1],t[14]+n[2],1]},r.moveThen=function(t,n){t[2]||(t[2]=0);var i=t[0]*n[0]+t[1]*n[4]+t[2]*n[8],s=t[0]*n[1]+t[1]*n[5]+t[2]*n[9],o=t[0]*n[2]+t[1]*n[6]+t[2]*n[10];return r.thenMove(n,[i,s,o])},r.translate=function(t,n,r){return r===undefined&&(r=0),[1,0,0,0,0,1,0,0,0,0,1,0,t,n,r,1]},r.thenScale=function(t,n){return[n[0]*t[0],n[1]*t[1],n[2]*t[2],0,n[0]*t[4],n[1]*t[5],n[2]*t[6],0,n[0]*t[8],n[1]*t[9],n[2]*t[10],0,n[0]*t[12],n[1]*t[13],n[2]*t[14],1]},r.scale=function(t,n,r){return r===undefined&&(r=1),n===undefined&&(n=t),[t,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1]},r.rotateX=function(t){var n=Math.cos(t),r=Math.sin(t);return[1,0,0,0,0,n,r,0,0,-r,n,0,0,0,0,1]},r.rotateY=function(t){var n=Math.cos(t),r=Math.sin(t);return[n,0,-r,0,0,1,0,0,r,0,n,0,0,0,0,1]},r.rotateZ=function(t){var n=Math.cos(t),r=Math.sin(t);return[n,r,0,0,-r,n,0,0,0,0,1,0,0,0,0,1]},r.rotate=function(t,n,r){var i=Math.cos(t),s=Math.sin(t),o=Math.cos(n),u=Math.sin(n),a=Math.cos(r),f=Math.sin(r),l=[o*a,i*f+s*u*a,s*f-i*u*a,0,-o*f,i*a-s*u*f,s*a+i*u*f,0,u,-s*o,i*o,0,0,0,0,1];return l},r.rotateAxis=function(t,n){var r=Math.sin(n),i=Math.cos(n),s=1-i,o=t[0]*t[0]*s,u=t[0]*t[1]*s,a=t[0]*t[2]*s,f=t[1]*t[1]*s,l=t[1]*t[2]*s,c=t[2]*t[2]*s,h=t[0]*r,p=t[1]*r,d=t[2]*r,v=[o+i,u+d,a-p,0,u-d,f+i,l+h,0,a+p,l-h,c+i,0,0,0,0,1];return v},r.aboutOrigin=function(t,n){var i=t[0]-(t[0]*n[0]+t[1]*n[4]+t[2]*n[8]),s=t[1]-(t[0]*n[1]+t[1]*n[5]+t[2]*n[9]),o=t[2]-(t[0]*n[2]+t[1]*n[6]+t[2]*n[10]);return r.thenMove(n,[i,s,o])},r.skew=function(t,n,r){return[1,Math.tan(n),0,0,Math.tan(r),1,0,0,0,Math.tan(t),1,0,0,0,0,1]},r.skewX=function(t){return[1,0,0,0,Math.tan(t),1,0,0,0,0,1,0,0,0,0,1]},r.skewY=function(t){return[1,Math.tan(t),0,0,0,1,0,0,0,0,1,0,0,0,0,1]},r.perspective=function(t){return[1,0,0,0,0,1,0,0,0,0,1,-1/t,0,0,0,1]},r.getTranslate=function(t){return[t[12],t[13],t[14]]},r.inverse=function(t){var n=t[5]*t[10]-t[6]*t[9],r=t[4]*t[10]-t[6]*t[8],i=t[4]*t[9]-t[5]*t[8],s=t[1]*t[10]-t[2]*t[9],o=t[0]*t[10]-t[2]*t[8],u=t[0]*t[9]-t[1]*t[8],a=t[1]*t[6]-t[2]*t[5],f=t[0]*t[6]-t[2]*t[4],l=t[0]*t[5]-t[1]*t[4],c=t[0]*n-t[1]*r+t[2]*i,h=1/c,p=[h*n,-h*s,h*a,0,-h*r,h*o,-h*f,0,h*i,-h*u,h*l,0,0,0,0,1];return p[12]=-t[12]*p[0]-t[13]*p[4]-t[14]*p[8],p[13]=-t[12]*p[1]-t[13]*p[5]-t[14]*p[9],p[14]=-t[12]*p[2]-t[13]*p[6]-t[14]*p[10],p},r.transpose=function(t){return[t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15]]},r.interpret=function(t){var n=[t[0],t[1],t[2]],u=o(n[0]),a=s(n),f=[n[0]+u*a,n[1],n[2]],l=2/i(f);if(l>=Infinity)return{translate:r.getTranslate(t),rotate:[0,0,0],scale:[0,0,0],skew:[0,0,0]};var c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];c[0]=1-l*f[0]*f[0],c[5]=1-l*f[1]*f[1],c[10]=1-l*f[2]*f[2],c[1]=-l*f[0]*f[1],c[2]=-l*f[0]*f[2],c[6]=-l*f[1]*f[2],c[4]=c[1],c[8]=c[2],c[9]=c[6];var h=r.multiply(c,t),p=[h[5],h[6]],d=o(p[0]),v=s(p),m=[p[0]+d*v,p[1]],g=2/i(m),y=[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];y[5]=1-g*m[0]*m[0],y[10]=1-g*m[1]*m[1],y[6]=-g*m[0]*m[1],y[9]=y[6];var b=r.multiply(y,c),w=r.multiply(b,t),E=r.scale(w[0]<0?-1:1,w[5]<0?-1:1,w[10]<0?-1:1);w=r.multiply(w,E),b=r.multiply(E,b);var S={};return S.translate=r.getTranslate(t),S.rotate=[Math.atan2(-b[6],b[10]),Math.asin(b[2]),Math.atan2(-b[1],b[0])],S.rotate[0]||(S.rotate[0]=0,S.rotate[2]=Math.atan2(b[4],b[5])),S.scale=[w[0],w[5],w[10]],S.skew=[Math.atan2(w[9],S.scale[2]),Math.atan2(w[8],S.scale[2]),Math.atan2(w[4],S.scale[0])],Math.abs(S.rotate[0])+Math.abs(S.rotate[2])>1.5*Math.PI&&(S.rotate[1]=Math.PI-S.rotate[1],S.rotate[1]>Math.PI&&(S.rotate[1]-=2*Math.PI),S.rotate[1]<-Math.PI&&(S.rotate[1]+=2*Math.PI),S.rotate[0]<0?S.rotate[0]+=Math.PI:S.rotate[0]-=Math.PI,S.rotate[2]<0?S.rotate[2]+=Math.PI:S.rotate[2]-=Math.PI),S},r.average=function(t,n,i){i=i===undefined?.5:i;var s=r.interpret(t),o=r.interpret(n),u={translate:[0,0,0],rotate:[0,0,0],scale:[0,0,0],skew:[0,0,0]};for(var a=0;a<3;a++)u.translate[a]=(1-i)*s.translate[a]+i*o.translate[a],u.rotate[a]=(1-i)*s.rotate[a]+i*o.rotate[a],u.scale[a]=(1-i)*s.scale[a]+i*o.scale[a],u.skew[a]=(1-i)*s.skew[a]+i*o.skew[a];return r.build(u)},r.build=function(t){var n=r.scale(t.scale[0],t.scale[1],t.scale[2]),i=r.skew(t.skew[0],t.skew[1],t.skew[2]),s=r.rotate(t.rotate[0],t.rotate[1],t.rotate[2]);return r.thenMove(r.multiply(r.multiply(s,i),n),t.translate)},r.equals=function(t,n){return!r.notEquals(t,n)},r.notEquals=function(t,n){return t===n?!1:!t||!n||t[12]!==n[12]||t[13]!==n[13]||t[14]!==n[14]||t[0]!==n[0]||t[1]!==n[1]||t[2]!==n[2]||t[4]!==n[4]||t[5]!==n[5]||t[6]!==n[6]||t[8]!==n[8]||t[9]!==n[9]||t[10]!==n[10]},r.normalizeRotation=function(t){var n=t.slice(0);if(n[0]===Math.PI*.5||n[0]===-Math.PI*.5)n[0]=-n[0],n[1]=Math.PI-n[1],n[2]-=Math.PI;n[0]>Math.PI*.5&&(n[0]=n[0]-Math.PI,n[1]=Math.PI-n[1],n[2]-=Math.PI),n[0]<-Math.PI*.5&&(n[0]=n[0]+Math.PI,n[1]=-Math.PI-n[1],n[2]-=Math.PI);while(n[1]<-Math.PI)n[1]+=2*Math.PI;while(n[1]>=Math.PI)n[1]-=2*Math.PI;while(n[2]<-Math.PI)n[2]+=2*Math.PI;while(n[2]>=Math.PI)n[2]-=2*Math.PI;return n},r.inFront=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,.001,1],r.behind=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,-0.001,1],n.exports=r}),define("famous/core/SpecParser.js",["require","exports","module","./Transform"],function(e,t,n){function i(){this.result={}}function s(e,t){return[e[0]*t[0]+e[1]*t[4]+e[2]*t[8],e[0]*t[1]+e[1]*t[5]+e[2]*t[9],e[0]*t[2]+e[1]*t[6]+e[2]*t[10]]}var r=e("./Transform");i._instance=new i,i.parse=function(t,n){return i._instance.parse(t,n)},i.prototype.parse=function(t,n){return this.reset(),this._parseSpec(t,n,r.identity),this.result},i.prototype.reset=function(){this.result={}};var o=[0,0];i.prototype._parseSpec=function(t,n,i){var u,a,f,l,c,h,p;if(typeof t=="number"){u=t,f=n.transform,h=n.align||n.origin;if(n.size&&h&&(h[0]||h[1])){var d=[h[0]*n.size[0],h[1]*n.size[1],0];f=r.thenMove(f,s(d,i))}this.result[u]={transform:f,opacity:n.opacity,origin:n.origin||o,align:n.align||n.origin||o,size:n.size}}else{if(!t)return;if(t instanceof Array)for(var v=0;v<t.length;v++)this._parseSpec(t[v],n,i);else{a=t.target,f=n.transform,l=n.opacity,c=n.origin,h=n.align,p=n.size;var m=i;t.opacity!==undefined&&(l=n.opacity*t.opacity),t.transform&&(f=r.multiply(n.transform,t.transform)),t.origin&&(c=t.origin,m=n.transform),t.align&&(h=t.align);if(t.size){var g=n.size;p=[t.size[0]!==undefined?t.size[0]:g[0],t.size[1]!==undefined?t.size[1]:g[1]],g&&(h||(h=c),h&&(h[0]||h[1])&&(f=r.thenMove(f,s([h[0]*g[0],h[1]*g[1],0],i))),c&&(c[0]||c[1])&&(f=r.moveThen([-c[0]*p[0],-c[1]*p[1],0],f))),m=n.transform,c=null,h=null}this._parseSpec(a,{transform:f,opacity:l,origin:c,align:h,size:p},m)}}},n.exports=i}),define("famous/core/RenderNode.js",["require","exports","module","./Entity","./SpecParser"],function(e,t,n){function s(e){this._object=null,this._child=null,this._hasMultipleChildren=!1,this._isRenderable=!1,this._isModifier=!1,this._resultCache={},this._prevResults={},this._childResult=null,e&&this.set(e)}function o(e,t,n){var s=i.parse(e,t),u=Object.keys(s);for(var a=0;a<u.length;a++){var f=u[a],l=r.get(f),c=s[f];c.allocator=t.allocator;var h=l.commit(c);h?o(h,t,n):n[f]=c}}var r=e("./Entity"),i=e("./SpecParser");s.prototype.add=function(t){var n=t instanceof s?t:new s(t);return this._child instanceof Array?this._child.push(n):this._child?(this._child=[this._child,n],this._hasMultipleChildren=!0,this._childResult=[]):this._child=n,n},s.prototype.get=function(){return this._object||(this._hasMultipleChildren?null:this._child?this._child.get():null)},s.prototype.set=function(t){return this._childResult=null,this._hasMultipleChildren=!1,this._isRenderable=t.render?!0:!1,this._isModifier=t.modify?!0:!1,this._object=t,this._child=null,t instanceof s?t:this},s.prototype.getSize=function(){var t=null,n=this.get();return n&&n.getSize&&(t=n.getSize()),!t&&this._child&&this._child.getSize&&(t=this._child.getSize()),t},s.prototype.commit=function(t){var n=Object.keys(this._prevResults);for(var i=0;i<n.length;i++){var s=n[i];if(this._resultCache[s]===undefined){var u=r.get(s);u.cleanup&&u.cleanup(t.allocator)}}this._prevResults=this._resultCache,this._resultCache={},o(this.render(),t,this._resultCache)},s.prototype.render=function(){if(this._isRenderable)return this._object.render();var t=null;if(this._hasMultipleChildren){t=this._childResult;var n=this._child;for(var r=0;r<n.length;r++)t[r]=n[r].render()}else this._child&&(t=this._child.render());return this._isModifier?this._object.modify(t):t},n.exports=s}),define("famous/core/EventEmitter.js",["require","exports","module"],function(e,t,n){function r(){this.listeners={},this._owner=this}r.prototype.emit=function(t,n){var r=this.listeners[t];if(r)for(var i=0;i<r.length;i++)r[i].call(this._owner,n);return this},r.prototype.on=function(t,n){t in this.listeners||(this.listeners[t]=[]);var r=this.listeners[t].indexOf(n);return r<0&&this.listeners[t].push(n),this},r.prototype.addListener=r.prototype.on,r.prototype.removeListener=function(t,n){var r=this.listeners[t];if(r!==undefined){var i=r.indexOf(n);i>=0&&r.splice(i,1)}return this},r.prototype.bindThis=function(t){this._owner=t},n.exports=r}),define("famous/core/EventHandler.js",["require","exports","module","./EventEmitter"],function(e,t,n){function i(){r.apply(this,arguments),this.downstream=[],this.downstreamFn=[],this.upstream=[],this.upstreamListeners={}}var r=e("./EventEmitter");i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.setInputHandler=function(t,n){t.trigger=n.trigger.bind(n),n.subscribe&&n.unsubscribe&&(t.subscribe=n.subscribe.bind(n),t.unsubscribe=n.unsubscribe.bind(n))},i.setOutputHandler=function(t,n){n instanceof i&&n.bindThis(t),t.pipe=n.pipe.bind(n),t.unpipe=n.unpipe.bind(n),t.on=n.on.bind(n),t.addListener=t.on,t.removeListener=n.removeListener.bind(n)},i.prototype.emit=function(t,n){r.prototype.emit.apply(this,arguments);var i=0;for(i=0;i<this.downstream.length;i++)this.downstream[i].trigger&&this.downstream[i].trigger(t,n);for(i=0;i<this.downstreamFn.length;i++)this.downstreamFn[i](t,n);return this},i.prototype.trigger=i.prototype.emit,i.prototype.pipe=function(t){if(t.subscribe instanceof Function)return t.subscribe(this);var n=t instanceof Function?this.downstreamFn:this.downstream,r=n.indexOf(t);return r<0&&n.push(t),t instanceof Function?t("pipe",null):t.trigger&&t.trigger("pipe",null),t},i.prototype.unpipe=function(t){if(t.unsubscribe instanceof Function)return t.unsubscribe(this);var n=t instanceof Function?this.downstreamFn:this.downstream,r=n.indexOf(t);return r>=0?(n.splice(r,1),t instanceof Function?t("unpipe",null):t.trigger&&t.trigger("unpipe",null),t):!1},i.prototype.on=function(t,n){r.prototype.on.apply(this,arguments);if(!(t in this.upstreamListeners)){var i=this.trigger.bind(this,t);this.upstreamListeners[t]=i;for(var s=0;s<this.upstream.length;s++)this.upstream[s].on(t,i)}return this},i.prototype.addListener=i.prototype.on,i.prototype.subscribe=function(t){var n=this.upstream.indexOf(t);if(n<0){this.upstream.push(t);for(var r in this.upstreamListeners)t.on(r,this.upstreamListeners[r])}return this},i.prototype.unsubscribe=function(t){var n=this.upstream.indexOf(t);if(n>=0){this.upstream.splice(n,1);for(var r in this.upstreamListeners)t.removeListener(r,this.upstreamListeners[r])}return this},n.exports=i}),define("famous/core/ElementAllocator.js",["require","exports","module"],function(e,t,n){function r(e){e||(e=document.createDocumentFragment()),this.container=e,this.detachedNodes={},this.nodeCount=0}r.prototype.migrate=function(t){var n=this.container;if(t===n)return;if(n instanceof DocumentFragment)t.appendChild(n);else while(n.hasChildNodes())t.appendChild(n.removeChild(n.firstChild));this.container=t},r.prototype.allocate=function(t){t=t.toLowerCase(),t in this.detachedNodes||(this.detachedNodes[t]=[]);var n=this.detachedNodes[t],r;return n.length>0?r=n.pop():(r=document.createElement(t),this.container.appendChild(r)),this.nodeCount++,r},r.prototype.deallocate=function(t){var n=t.nodeName.toLowerCase(),r=this.detachedNodes[n];r.push(t),this.nodeCount--},r.prototype.getNodeCount=function(){return this.nodeCount},n.exports=r}),define("famous/utilities/Utility.js",["require","exports","module"],function(e,t,n){var r={};r.Direction={X:0,Y:1,Z:2},r.after=function(t,n){var r=t;return function(){r--,r===0&&n.apply(this,arguments)}},r.loadURL=function(t,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){this.readyState===4&&n&&n(this.responseText)},r.open("GET",t),r.send()},r.createDocumentFragmentFromHTML=function(t){var n=document.createElement("div");n.innerHTML=t;var r=document.createDocumentFragment();while(n.hasChildNodes())r.appendChild(n.firstChild);return r},r.clone=function(t){var n;if(typeof t=="object"){n={};for(var i in t)if(typeof t[i]=="object"&&t[i]!==null)if(t[i]instanceof Array){n[i]=new Array(t[i].length);for(var s=0;s<t[i].length;s++)n[i][s]=r.clone(t[i][s])}else n[i]=r.clone(t[i]);else n[i]=t[i]}else n=t;return n},n.exports=r}),define("famous/transitions/MultipleTransition.js",["require","exports","module","famous/utilities/Utility"],function(e,t,n){function i(e){this.method=e,this._instances=[],this.state=[]}var r=e("famous/utilities/Utility");i.SUPPORTS_MULTIPLE=!0,i.prototype.get=function(){for(var t=0;t<this._instances.length;t++)this.state[t]=this._instances[t].get();return this.state},i.prototype.set=function(t,n,i){var s=r.after(t.length,i);for(var o=0;o<t.length;o++)this._instances[o]||(this._instances[o]=new this.method),this._instances[o].set(t[o],n,s)},i.prototype.reset=function(t){for(var n=0;n<t.length;n++)this._instances[n]||(this._instances[n]=new this.method),this._instances[n].reset(t[n])},n.exports=i}),define("famous/transitions/TweenTransition.js",["require","exports","module"],function(e,t,n){function r(e){this.options=Object.create(r.DEFAULT_OPTIONS),e&&this.setOptions(e),this._startTime=0,this._startValue=0,this._updateTime=0,this._endValue=0,this._curve=undefined,this._duration=0,this._active=!1,this._callback=undefined,this.state=0,this.velocity=undefined}function s(e,t,n){return(1-n)*e+n*t}function o(e){return e instanceof Object?e instanceof Array?e.slice(0):Object.create(e):e}function u(e,t){var n={curve:t.curve};return t.duration&&(n.duration=t.duration),t.speed&&(n.speed=t.speed),e instanceof Object&&(e.duration!==undefined&&(n.duration=e.duration),e.curve&&(n.curve=e.curve),e.speed&&(n.speed=e.speed)),typeof n.curve=="string"&&(n.curve=r.getCurve(n.curve)),n}function a(e,t,n,r,i){var s,o=1e-7,u=(n(i)-n(i-o))/o;if(e instanceof Array){s=[];for(var a=0;a<e.length;a++)typeof e[a]=="number"?s[a]=u*(e[a]-t[a])/r:s[a]=0}else s=u*(e-t)/r;return s}function f(e,t,n){var r;if(e instanceof Array){r=[];for(var i=0;i<e.length;i++)typeof e[i]=="number"?r[i]=s(e[i],t[i],n):r[i]=e[i]}else r=s(e,t,n);return r}r.Curves={linear:function(e){return e},easeIn:function(e){return e*e},easeOut:function(e){return e*(2-e)},easeInOut:function(e){return e<=.5?2*e*e:-2*e*e+4*e-1},easeOutBounce:function(e){return e*(3-2*e)},spring:function(e){return(1-e)*Math.sin(6*Math.PI*e)+e}},r.SUPPORTS_MULTIPLE=!0,r.DEFAULT_OPTIONS={curve:r.Curves.linear,duration:500,speed:0};var i={};r.registerCurve=function(t,n){return i[t]?!1:(i[t]=n,!0)},r.unregisterCurve=function(t){return i[t]?(delete i[t],!0):!1},r.getCurve=function(t){var n=i[t];if(n!==undefined)return n;throw new Error("curve not registered")},r.getCurves=function(){return i},r.prototype.setOptions=function(t){t.curve!==undefined&&(this.options.curve=t.curve),t.duration!==undefined&&(this.options.duration=t.duration),t.speed!==undefined&&(this.options.speed=t.speed)},r.prototype.set=function(t,n,r){if(!n){this.reset(t),r&&r();return}this._startValue=o(this.get()),n=u(n,this.options);if(n.speed){var i=this._startValue;if(i instanceof Object){var s=0;for(var a in i)s+=(t[a]-i[a])*(t[a]-i[a]);n.duration=Math.sqrt(s)/n.speed}else n.duration=Math.abs(t-i)/n.speed}this._startTime=Date.now(),this._endValue=o(t),this._startVelocity=o(n.velocity),this._duration=n.duration,this._curve=n.curve,this._active=!0,this._callback=r},r.prototype.reset=function(t,n){if(this._callback){var r=this._callback;this._callback=undefined,r()}this.state=o(t),this.velocity=o(n),this._startTime=0,this._duration=0,this._updateTime=0,this._startValue=this.state,this._startVelocity=this.velocity,this._endValue=this.state,this._active=!1},r.prototype.getVelocity=function(){return this.velocity},r.prototype.get=function(t){return this.update(t),this.state},r.prototype.update=function(t){if(!this._active){if(this._callback){var n=this._callback;this._callback=undefined,n()}return}t||(t=Date.now());if(this._updateTime>=t)return;this._updateTime=t;var r=t-this._startTime;if(r>=this._duration)this.state=this._endValue,this.velocity=a(this.state,this._startValue,this._curve,this._duration,1),this._active=!1;else if(r<0)this.state=this._startValue,this.velocity=this._startVelocity;else{var i=r/this._duration;this.state=f(this._startValue,this._endValue,this._curve(i)),this.velocity=a(this.state,this._startValue,this._curve,this._duration,i)}},r.prototype.isActive=function(){return this._active},r.prototype.halt=function(){this.reset(this.get())},r.registerCurve("linear",r.Curves.linear),r.registerCurve("easeIn",r.Curves.easeIn),r.registerCurve("easeOut",r.Curves.easeOut),r.registerCurve("easeInOut",r.Curves.easeInOut),r.registerCurve("easeOutBounce",r.Curves.easeOutBounce),r.registerCurve("spring",r.Curves.spring),r.customCurve=function(t,n){return t=t||0,n=n||0,function(e){return t*e+(-2*t-n+3)*e*e+(t+n-2)*e*e*e}},n.exports=r}),define("famous/transitions/Transitionable.js",["require","exports","module","./MultipleTransition","./TweenTransition"],function(e,t,n){function s(e){this.currentAction=null,this.actionQueue=[],this.callbackQueue=[],this.state=0,this.velocity=undefined,this._callback=undefined,this._engineInstance=null,this._currentMethod=null,this.set(e)}function u(){if(this._callback){var e=this._callback;this._callback=undefined,e()}if(this.actionQueue.length<=0){this.set(this.get());return}this.currentAction=this.actionQueue.shift(),this._callback=this.callbackQueue.shift();var t=null,n=this.currentAction[0],s=this.currentAction[1];s instanceof Object&&s.method?(t=s.method,typeof t=="string"&&(t=o[t])):t=i,this._currentMethod!==t&&(!(n instanceof Object)||t.SUPPORTS_MULTIPLE===!0||n.length<=t.SUPPORTS_MULTIPLE?this._engineInstance=new t:this._engineInstance=new r(t),this._currentMethod=t),this._engineInstance.reset(this.state,this.velocity),this.velocity!==undefined&&(s.velocity=this.velocity),this._engineInstance.set(n,s,u.bind(this))}var r=e("./MultipleTransition"),i=e("./TweenTransition"),o={};s.registerMethod=function(t,n){return t in o?!1:(o[t]=n,!0)},s.unregisterMethod=function(t){return t in o?(delete o[t],!0):!1},s.prototype.set=function(t,n,r){if(!n)return this.reset(t),r&&r(),this;var i=[t,n];return this.actionQueue.push(i),this.callbackQueue.push(r),this.currentAction||u.call(this),this},s.prototype.reset=function(t,n){this._currentMethod=null,this._engineInstance=null,this._callback=undefined,this.state=t,this.velocity=n,this.currentAction=null,this.actionQueue=[],this.callbackQueue=[]},s.prototype.delay=function(t,n){this.set(this.get(),{duration:t,curve:function(){return 0}},n)},s.prototype.get=function(t){return this._engineInstance&&(this._engineInstance.getVelocity&&(this.velocity=this._engineInstance.getVelocity()),this.state=this._engineInstance.get(t)),this.state},s.prototype.isActive=function(){return!!this.currentAction},s.prototype.halt=function(){return this.set(this.get())},n.exports=s}),define("famous/core/Context",["require","exports","module","./RenderNode","./EventHandler","./ElementAllocator","./Transform","famous/transitions/Transitionable"],function(e,t,n){function f(e){return[e.clientWidth,e.clientHeight]}function l(e){this.container=e,this._allocator=new s(e),this._node=new r,this._eventOutput=new i,this._size=f(this.container),this._perspectiveState=new u(0),this._perspective=undefined,this._nodeContext={allocator:this._allocator,transform:o.identity,opacity:1,origin:a,align:null,size:this._size},this._eventOutput.on("resize",function(){this.setSize(f(this.container))}.bind(this))}var r=e("./RenderNode"),i=e("./EventHandler"),s=e("./ElementAllocator"),o=e("./Transform"),u=e("famous/transitions/Transitionable"),a=[0,0];l.prototype.getAllocator=function(){return this._allocator},l.prototype.add=function(t){return this._node.add(t)},l.prototype.migrate=function(t){if(t===this.container)return;this.container=t,this._allocator.migrate(t)},l.prototype.getSize=function(){return this._size},l.prototype.setSize=function(t){t||(t=f(this.container)),this._size[0]=t[0],this._size[1]=t[1]},l.prototype.update=function(t){t&&(t.transform&&(this._nodeContext.transform=t.transform),t.opacity&&(this._nodeContext.opacity=t.opacity),t.origin&&(this._nodeContext.origin=t.origin),t.align&&(this._nodeContext.align=t.align),t.size&&(this._nodeContext.size=t.size));var n=this._perspectiveState.get();n!==this._perspective&&(this.container.style.perspective=n?n.toFixed()+"px":"",this.container.style.webkitPerspective=n?n.toFixed():"",this._perspective=n),this._node.commit(this._nodeContext)},l.prototype.getPerspective=function(){return this._perspectiveState.get()},l.prototype.setPerspective=function(t,n,r){return this._perspectiveState.set(t,n,r)},l.prototype.emit=function(t,n){return this._eventOutput.emit(t,n)},l.prototype.on=function(t,n){return this._eventOutput.on(t,n)},l.prototype.removeListener=function(t,n){return this._eventOutput.removeListener(t,n)},l.prototype.pipe=function(t){return this._eventOutput.pipe(t)},l.prototype.unpipe=function(t){return this._eventOutput.unpipe(t)},n.exports=l}),define("famous/core/OptionsManager.js",["require","exports","module","./EventHandler"],function(e,t,n){function i(e){this._value=e,this.eventOutput=null}function s(){this.eventOutput=new r,this.eventOutput.bindThis(this),r.setOutputHandler(this,this.eventOutput)}var r=e("./EventHandler");i.patch=function(t,n){var r=new i(t);for(var s=1;s<arguments.length;s++)r.patch(arguments[s]);return t},i.prototype.patch=function(){var t=this._value;for(var n=0;n<arguments.length;n++){var r=arguments[n];for(var i in r)i in t&&r[i]&&r[i].constructor===Object&&t[i]&&t[i].constructor===Object?(t.hasOwnProperty(i)||(t[i]=Object.create(t[i])),this.key(i).patch(r[i]),this.eventOutput&&this.eventOutput.emit("change",{id:i,value:this.key(i).value()})):this.set(i,r[i])}return this},i.prototype.setOptions=i.prototype.patch,i.prototype.key=function(t){var n=new i(this._value[t]);if(!(n._value instanceof Object)||n._value instanceof Array)n._value={};return n},i.prototype.get=function(t){return this._value[t]},i.prototype.getOptions=i.prototype.get,i.prototype.set=function(t,n){var r=this.get(t);return this._value[t]=n,this.eventOutput&&n!==r&&this.eventOutput.emit("change",{id:t,value:n}),this},i.prototype.value=function(){return this._value},i.prototype.on=function(){return s.call(this),this.on.apply(this,arguments)},i.prototype.removeListener=function(){return s.call(this),this.removeListener.apply(this,arguments)},i.prototype.pipe=function(){return s.call(this),this.pipe.apply(this,arguments)},i.prototype.unpipe=function(){return s.call(this),this.unpipe.apply(this,arguments)},n.exports=i}),define("famous/core/Engine",["require","exports","module","./Context","./EventHandler","./OptionsManager"],function(e,t,n){function b(){m.runLoop?(o.step(),window.requestAnimationFrame(b)):p=!1}function w(e){for(var t=0;t<u.length;t++)u[t].emit("resize");v.emit("resize")}function E(){window.addEventListener("touchmove",function(e){e.preventDefault()},!0),document.body.classList.add("famous-root"),document.documentElement.classList.add("famous-root")}var r=e("./Context"),i=e("./EventHandler"),s=e("./OptionsManager"),o={},u=[],a=[],f=[],l=Date.now(),c,h,p=!0,d={},v=new i,m={containerType:"div",containerClass:"famous-container",fpsCap:undefined,runLoop:!0,appMode:!0},g=new s(m),y=10;o.step=function(){var t=Date.now();if(h&&t-l<h)return;var n=0;c=t-l,l=t,v.emit("prerender");for(n=0;n<a.length;n++)a[n].call(this);a.splice(0);while(f.length&&Date.now()-t<y)f.shift().call(this);for(n=0;n<u.length;n++)u[n].update();v.emit("postrender")},window.requestAnimationFrame(b),window.addEventListener("resize",w,!1),w();var S=!1;o.pipe=function(t){return t.subscribe instanceof Function?t.subscribe(o):v.pipe(t)},o.unpipe=function(t){return t.unsubscribe instanceof Function?t.unsubscribe(o):v.unpipe(t)},o.on=function(t,n){return t in d||(d[t]=v.emit.bind(v,t),document.body?document.body.addEventListener(t,d[t]):o.nextTick(function(e,t){document.body.addEventListener(e,t)}.bind(this,t,d[t]))),v.on(t,n)},o.emit=function(t,n){return v.emit(t,n)},o.removeListener=function(t,n){return v.removeListener(t,n)},o.getFPS=function(){return 1e3/c},o.setFPSCap=function(t){h=Math.floor(1e3/t)},o.getOptions=function(){return g.getOptions.apply(g,arguments)},o.setOptions=function(t){return g.setOptions.apply(g,arguments)},o.createContext=function(t){!S&&m.appMode&&E();var n=!1;t||(t=document.createElement(m.containerType),t.classList.add(m.containerClass),n=!0);var i=new r(t);return o.registerContext(i),n&&o.nextTick(function(e,t){document.body.appendChild(t),e.emit("resize")}.bind(this,i,t)),i},o.registerContext=function(t){return u.push(t),t},o.getContexts=function(){return u},o.deregisterContext=function(t){var n=u.indexOf(t);n>=0&&u.splice(n,1)},o.nextTick=function(t){a.push(t)},o.defer=function(t){f.push(t)},g.on("change",function(e){e.id==="fpsCap"?o.setFPSCap(e.value):e.id==="runLoop"&&!p&&e.value&&(p=!0,window.requestAnimationFrame(b))}),n.exports=o}),define("famous/core/ElementOutput",["require","exports","module","./Entity","./EventHandler","./Transform"],function(e,t,n){function a(e){this._matrix=null,this._opacity=1,this._origin=null,this._size=null,this._eventOutput=new i,this._eventOutput.bindThis(this),this.eventForwarder=function(t){this._eventOutput.emit(t.type,t)}.bind(this),this.id=r.register(this),this._element=null,this._sizeDirty=!1,this._originDirty=!1,this._transformDirty=!1,this._invisible=!1,e&&this.attach(e)}function f(e){for(var t in this._eventOutput.listeners)e.addEventListener(t,this.eventForwarder)}function l(e){for(var t in this._eventOutput.listeners)e.removeEventListener(t,this.eventForwarder)}function c(e){e[12]=Math.round(e[12]*u)/u,e[13]=Math.round(e[13]*u)/u;var t="matrix3d(";for(var n=0;n<15;n++)t+=e[n]<1e-6&&e[n]>-0.000001?"0,":e[n]+",";return t+=e[15]+")",t}function p(e){return 100*e[0]+"% "+100*e[1]+"%"}function m(e,t){return e&&t?e[0]!==t[0]||e[1]!==t[1]:e!==t}var r=e("./Entity"),i=e("./EventHandler"),s=e("./Transform"),o=document.body.style.webkitTransform!==undefined,u=window.devicePixelRatio||1;a.prototype.on=function(t,n){this._element&&this._element.addEventListener(t,this.eventForwarder),this._eventOutput.on(t,n)},a.prototype.removeListener=function(t,n){this._eventOutput.removeListener(t,n)},a.prototype.emit=function(t,n){n&&!n.origin&&(n.origin=this);var r=this._eventOutput.emit(t,n);return r&&n&&n.stopPropagation&&n.stopPropagation(),r},a.prototype.pipe=function(t){return this._eventOutput.pipe(t)},a.prototype.unpipe=function(t){return this._eventOutput.unpipe(t)},a.prototype.render=function(){return this.id};var h;navigator.userAgent.toLowerCase().indexOf("firefox")>-1?h=function(e,t){e.style.zIndex=t[14]*1e6|0,e.style.transform=c(t)}:o?h=function(e,t){e.style.webkitTransform=c(t)}:h=function(e,t){e.style.transform=c(t)};var d=o?function(e,t){e.style.webkitTransformOrigin=p(t)}:function(e,t){e.style.transformOrigin=p(t)},v=o?function(e){e.style.webkitTransform="scale3d(0.0001,0.0001,0.0001)",e.style.opacity=0}:function(e){e.style.transform="scale3d(0.0001,0.0001,0.0001)",e.style.opacity=0};a.prototype.commit=function(t){var n=this._element;if(!n)return;var r=t.transform,i=t.opacity,o=t.origin,u=t.size;if(!r&&this._matrix){this._matrix=null,this._opacity=0,v(n);return}m(this._origin,o)&&(this._originDirty=!0),m(this._size,u)&&(this._sizeDirty=!0),s.notEquals(this._matrix,r)&&(this._transformDirty=!0),this._invisible&&(this._invisible=!1,this._element.style.display=""),this._opacity!==i&&(this._opacity=i,n.style.opacity=i>=1?"0.999999":i);if(this._transformDirty||this._originDirty||this._sizeDirty){this._sizeDirty&&(this._size||(this._size=[0,0]),this._size[0]=u[0],this._size[1]=u[1],this._sizeDirty=!1),this._originDirty&&(o?(this._origin||(this._origin=[0,0]),this._origin[0]=o[0],this._origin[1]=o[1]):this._origin=null,d(n,this._origin),this._originDirty=!1),r||(r=s.identity),this._matrix=r;var a=this._size?s.thenMove(r,[-this._size[0]*o[0],-this._size[1]*o[1],0]):r;h(n,a),this._transformDirty=!1}},a.prototype.cleanup=function(){this._element&&(this._invisible=!0,this._element.style.display="none")},a.prototype.attach=function(t){this._element=t,f.call(this,t)},a.prototype.detach=function(){var t=this._element;return t&&(l.call(this,t),this._invisible&&(this._invisible=!1,this._element.style.display="")),this._element=null,t},n.exports=a}),define("famous/core/Surface.js",["require","exports","module","./ElementOutput"],function(e,t,n){function i(e){r.call(this),this.options={},this.properties={},this.content="",this.classList=[],this.size=null,this._classesDirty=!0,this._stylesDirty=!0,this._sizeDirty=!0,this._contentDirty=!0,this._dirtyClasses=[],e&&this.setOptions(e),this._currentTarget=null}function s(e){for(var t=0;t<this._dirtyClasses.length;t++)e.classList.remove(this._dirtyClasses[t]);this._dirtyClasses=[]}function o(e){for(var t in this.properties)e.style[t]=this.properties[t]}function u(e){for(var t in this.properties)e.style[t]=""}function a(e,t){return e&&t?e[0]!==t[0]||e[1]!==t[1]:e!==t}var r=e("./ElementOutput");i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.prototype.elementType="div",i.prototype.elementClass="famous-surface",i.prototype.setProperties=function(t){for(var n in t)this.properties[n]=t[n];this._stylesDirty=!0},i.prototype.getProperties=function(){return this.properties},i.prototype.addClass=function(t){this.classList.indexOf(t)<0&&(this.classList.push(t),this._classesDirty=!0)},i.prototype.removeClass=function(t){var n=this.classList.indexOf(t);n>=0&&(this._dirtyClasses.push(this.classList.splice(n,1)[0]),this._classesDirty=!0)},i.prototype.toggleClass=function(t){var n=this.classList.indexOf(t);n>=0?this.removeClass(t):this.addClass(t)},i.prototype.setClasses=function(t){var n=0,r=[];for(n=0;n<this.classList.length;n++)t.indexOf(this.classList[n])<0&&r.push(this.classList[n]);for(n=0;n<r.length;n++)this.removeClass(r[n]);for(n=0;n<t.length;n++)this.addClass(t[n])},i.prototype.getClassList=function(){return this.classList},i.prototype.setContent=function(t){this.content!==t&&(this.content=t,this._contentDirty=!0)},i.prototype.getContent=function(){return this.content},i.prototype.setOptions=function(t){t.size&&this.setSize(t.size),t.classes&&this.setClasses(t.classes),t.properties&&this.setProperties(t.properties),t.content&&this.setContent(t.content)},i.prototype.setup=function(t){var n=t.allocate(this.elementType);if(this.elementClass)if(this.elementClass instanceof Array)for(var r=0;r<this.elementClass.length;r++)n.classList.add(this.elementClass[r]);else n.classList.add(this.elementClass);n.style.display="",this.attach(n),this._currentTarget=n,this._stylesDirty=!0,this._classesDirty=!0,this._sizeDirty=!0,this._contentDirty=!0,this._transformDirty=!0},i.prototype.commit=function(t){this._currentTarget||this.setup(t.allocator);var n=this._currentTarget,i=t.size;if(this._classesDirty){s.call(this,n);var u=this.getClassList();for(var f=0;f<u.length;f++)n.classList.add(u[f]);this._classesDirty=!1}this._stylesDirty&&(o.call(this,n),this._stylesDirty=!1);if(this.size){var l=t.size;i=[this.size[0],this.size[1]],i[0]===undefined?i[0]=l[0]:i[0]===!0&&(i[0]=n.clientWidth),i[1]===undefined?i[1]=l[1]:i[1]===!0&&(i[1]=n.clientHeight)}a(this._size,i)&&(this._size||(this._size=[0,0]),this._size[0]=i[0],this._size[1]=i[1],this._sizeDirty=!0),this._sizeDirty&&(this._size&&(n.style.width=this.size&&this.size[0]===!0?"":this._size[0]+"px",n.style.height=this.size&&this.size[1]===!0?"":this._size[1]+"px"),this._sizeDirty=!1),this._contentDirty&&(this.deploy(n),this._eventOutput.emit("deploy"),this._contentDirty=!1),r.prototype.commit.call(this,t)},i.prototype.cleanup=function(t){var n=0,r=this._currentTarget;this._eventOutput.emit("recall"),this.recall(r),r.style.display="none",r.style.width="",r.style.height="",this._size=null,u.call(this,r);var i=this.getClassList();s.call(this,r);for(n=0;n<i.length;n++)r.classList.remove(i[n]);if(this.elementClass)if(this.elementClass instanceof Array)for(n=0;n<this.elementClass.length;n++)r.classList.remove(this.elementClass[n]);else r.classList.remove(this.elementClass);this.detach(r),this._currentTarget=null,t.deallocate(r)},i.prototype.deploy=function(t){var n=this.getContent();if(n instanceof Node){while(t.hasChildNodes())t.removeChild(t.firstChild);t.appendChild(n)}else t.innerHTML=n},i.prototype.recall=function(t){var n=document.createDocumentFragment();while(t.hasChildNodes())n.appendChild(t.firstChild);this.setContent(n)},i.prototype.getSize=function(){return this._size},i.prototype.setSize=function(t){this.size=t?[t[0],t[1]]:null,this._sizeDirty=!0},n.exports=i}),define("famous/core/Group",["require","exports","module","./Context","./Transform","./Surface"],function(e,t,n){function o(e){s.call(this,e),this._shouldRecalculateSize=!1,this._container=document.createDocumentFragment(),this.context=new r(this._container),this.setContent(this._container),this._groupSize=[undefined,undefined]}var r=e("./Context"),i=e("./Transform"),s=e("./Surface");o.SIZE_ZERO=[0,0],o.prototype=Object.create(s.prototype),o.prototype.elementType="div",o.prototype.elementClass="famous-group",o.prototype.add=function(){return this.context.add.apply(this.context,arguments)},o.prototype.render=function(){return s.prototype.render.call(this)},o.prototype.deploy=function(t){this.context.migrate(t)},o.prototype.recall=function(t){this._container=document.createDocumentFragment(),this.context.migrate(this._container)},o.prototype.commit=function(t){var n=t.transform,r=t.origin,u=t.opacity,a=t.size,f=s.prototype.commit.call(this,{allocator:t.allocator,transform:i.thenMove(n,[-r[0]*a[0],-r[1]*a[1],0]),opacity:u,origin:r,size:o.SIZE_ZERO});if(a[0]!==this._groupSize[0]||a[1]!==this._groupSize[1])this._groupSize[0]=a[0],this._groupSize[1]=a[1],this.context.setSize(a);return this.context.update({transform:i.translate(-r[0]*a[0],-r[1]*a[1],0),origin:r,size:a}),f},n.exports=o}),define("famous/transitions/TransitionableTransform.js",["require","exports","module","./Transitionable","famous/core/Transform","famous/utilities/Utility"],function(e,t,n){function o(e){this._final=i.identity.slice(),this.translate=new r([0,0,0]),this.rotate=new r([0,0,0]),this.skew=new r([0,0,0]),this.scale=new r([1,1,1]),e&&this.set(e)}function u(){return i.build({translate:this.translate.get(),rotate:this.rotate.get(),skew:this.skew.get(),scale:this.scale.get()})}var r=e("./Transitionable"),i=e("famous/core/Transform"),s=e("famous/utilities/Utility");o.prototype.setTranslate=function(t,n,r){return this.translate.set(t,n,r),this._final=this._final.slice(),this._final[12]=t[0],this._final[13]=t[1],t[2]!==undefined&&(this._final[14]=t[2]),this},o.prototype.setScale=function(t,n,r){return this.scale.set(t,n,r),this._final=this._final.slice(),this._final[0]=t[0],this._final[5]=t[1],t[2]!==undefined&&(this._final[10]=t[2]),this},o.prototype.setRotate=function(t,n,r){return this.rotate.set(t,n,r),this._final=u.call(this),this._final=i.build({translate:this.translate.get(),rotate:t,scale:this.scale.get(),skew:this.skew.get()}),this},o.prototype.setSkew=function(t,n,r){return this.skew.set(t,n,r),this._final=i.build({translate:this.translate.get(),rotate:this.rotate.get(),scale:this.scale.get(),skew:t}),this},o.prototype.set=function(t,n,r){this._final=t;var o=i.interpret(t),u=r?s.after(4,r):null;return this.translate.set(o.translate,n,u),this.rotate.set(o.rotate,n,u),this.skew.set(o.skew,n,u),this.scale.set(o.scale,n,u),this},o.prototype.setDefaultTransition=function(t){this.translate.setDefault(t),this.rotate.setDefault(t),this.skew.setDefault(t),this.scale.setDefault(t)},o.prototype.get=function(){return this.isActive()?u.call(this):this._final},o.prototype.getFinal=function(){return this._final},o.prototype.isActive=function(){return this.translate.isActive()||this.rotate.isActive()||this.scale.isActive()||this.skew.isActive()},o.prototype.halt=function(){this._final=this.get(),this.translate.halt(),this.rotate.halt(),this.skew.halt(),this.scale.halt()},n.exports=o}),define("famous/core/Modifier",["require","exports","module","./Transform","famous/transitions/Transitionable","famous/transitions/TransitionableTransform"],function(e,t,n){function o(e){this._transformGetter=null,this._opacityGetter=null,this._originGetter=null,this._alignGetter=null,this._sizeGetter=null,this._legacyStates={},this._output={transform:r.identity,opacity:1,origin:null,align:null,size:null,target:null},e&&(e.transform&&this.transformFrom(e.transform),e.opacity!==undefined&&this.opacityFrom(e.opacity),e.origin&&this.originFrom(e.origin),e.align&&this.alignFrom(e.align),e.size&&this.sizeFrom(e.size))}function u(){this._transformGetter&&(this._output.transform=this._transformGetter()),this._opacityGetter&&(this._output.opacity=this._opacityGetter()),this._originGetter&&(this._output.origin=this._originGetter()),this._alignGetter&&(this._output.align=this._alignGetter()),this._sizeGetter&&(this._output.size=this._sizeGetter())}var r=e("./Transform"),i=e("famous/transitions/Transitionable"),s=e("famous/transitions/TransitionableTransform");o.prototype.transformFrom=function(t){return t instanceof Function?this._transformGetter=t:t instanceof Object&&t.get?this._transformGetter=t.get.bind(t):(this._transformGetter=null,this._output.transform=t),this},o.prototype.opacityFrom=function(t){return t instanceof Function?this._opacityGetter=t:t instanceof Object&&t.get?this._opacityGetter=t.get.bind(t):(this._opacityGetter=null,this._output.opacity=t),this},o.prototype.originFrom=function(t){return t instanceof Function?this._originGetter=t:t instanceof Object&&t.get?this._originGetter=t.get.bind(t):(this._originGetter=null,this._output.origin=t),this},o.prototype.alignFrom=function(t){return t instanceof Function?this._alignGetter=t:t instanceof Object&&t.get?this._alignGetter=t.get.bind(t):(this._alignGetter=null,this._output.align=t),this},o.prototype.sizeFrom=function(t){return t instanceof Function?this._sizeGetter=t:t instanceof Object&&t.get?this._sizeGetter=t.get.bind(t):(this._sizeGetter=null,this._output.size=t),this},o.prototype.setTransform=function(t,n,r){return n||this._legacyStates.transform?(this._legacyStates.transform||(this._legacyStates.transform=new s(this._output.transform)),this._transformGetter||this.transformFrom(this._legacyStates.transform),this._legacyStates.transform.set(t,n,r),this):this.transformFrom(t)},o.prototype.setOpacity=function(t,n,r){return n||this._legacyStates.opacity?(this._legacyStates.opacity||(this._legacyStates.opacity=new i(this._output.opacity)),this._opacityGetter||this.opacityFrom(this._legacyStates.opacity),this._legacyStates.opacity.set(t,n,r)):this.opacityFrom(t)},o.prototype.setOrigin=function(t,n,r){return n||this._legacyStates.origin?(this._legacyStates.origin||(this._legacyStates.origin=new i(this._output.origin||[0,0])),this._originGetter||this.originFrom(this._legacyStates.origin),this._legacyStates.origin.set(t,n,r),this):this.originFrom(t)},o.prototype.setAlign=function(t,n,r){return n||this._legacyStates.align?(this._legacyStates.align||(this._legacyStates.align=new i(this._output.align||[0,0])),this._alignGetter||this.alignFrom(this._legacyStates.align),this._legacyStates.align.set(t,n,r),this):this.alignFrom(t)},o.prototype.setSize=function(t,n,r){return t&&(n||this._legacyStates.size)?(this._legacyStates.size||(this._legacyStates.size=new i(this._output.size||[0,0])),this._sizeGetter||this.sizeFrom(this._legacyStates.size),this._legacyStates.size.set(t,n,r),this):this.sizeFrom(t)},o.prototype.halt=function(){this._legacyStates.transform&&this._legacyStates.transform.halt(),this._legacyStates.opacity&&this._legacyStates.opacity.halt(),this._legacyStates.origin&&this._legacyStates.origin.halt(),this._legacyStates.align&&this._legacyStates.align.halt(),this._legacyStates.size&&this._legacyStates.size.halt(),this._transformGetter=null,this._opacityGetter=null,this._originGetter=null,this._alignGetter=null,this._sizeGetter=null},o.prototype.getTransform=function(){return this._transformGetter()},o.prototype.getFinalTransform=function(){return this._legacyStates.transform?this._legacyStates.transform.getFinal():this._output.transform},o.prototype.getOpacity=function(){return this._opacityGetter()},o.prototype.getOrigin=function(){return this._originGetter()},o.prototype.getAlign=function(){return this._alignGetter()},o.prototype.getSize=function(){return this._sizeGetter?this._sizeGetter():this._output.size},o.prototype.modify=function(t){return u.call(this),this._output.target=t,this._output},n.exports=o}),define("famous/core/Scene",["require","exports","module","./Transform","./Modifier","./RenderNode"],function(e,t,n){function o(e){this.id=null,this._objects=null,this.node=new s,this._definition=null,e&&this.load(e)}function a(e){for(var t in u)if(t in e){var n=e[t];return n instanceof Array||(n=[n]),u[t].apply(this,n)}}function f(e){var t=e.transform,n=e.opacity,s=e.origin,o=e.align,u=e.size,f=r.identity;if(t instanceof Array)if(t.length===16&&typeof t[0]=="number")f=t;else for(var l=0;l<t.length;l++)f=r.multiply(f,a(t[l]));else t instanceof Function?f=t:t instanceof Object&&(f=a(t));var c=new i({transform:f,opacity:n,origin:s,align:o,size:u});return c}function l(e){var t=new s;for(var n=0;n<e.length;n++){var r=c.call(this,e[n]);r&&t.add(r)}return t}function c(e){var t,n;if(e instanceof Array)t=l.call(this,e);else{n=this._objects.length;if(e.render&&e.render instanceof Function)t=e;else if(e.target){var r=c.call(this,e.target),i=f.call(this,e);t=new s(i),t.add(r),e.id&&(this.id[e.id]=i)}else e.id&&(t=new s,this.id[e.id]=t)}return this._objects[n]=t,t}var r=e("./Transform"),i=e("./Modifier"),s=e("./RenderNode"),u={translate:r.translate,rotate:r.rotate,rotateX:r.rotateX,rotateY:r.rotateY,rotateZ:r.rotateZ,rotateAxis:r.rotateAxis,scale:r.scale,skew:r.skew,matrix3d:function(){return arguments}};o.prototype.create=function(){return new o(this._definition)},o.prototype.load=function(t){this._definition=t,this.id={},this._objects=[],this.node.set(c.call(this,t))},o.prototype.add=function(){return this.node.add.apply(this.node,arguments)},o.prototype.render=function(){return this.node.render.apply(this.node,arguments)},n.exports=o}),define("famous/core/View",["require","exports","module","./EventHandler","./OptionsManager","./RenderNode","famous/utilities/Utility"],function(e,t,n){function u(e){this._node=new s,this._eventInput=new r,this._eventOutput=new r,r.setInputHandler(this,this._eventInput),r.setOutputHandler(this,this._eventOutput),this.options=o.clone(this.constructor.DEFAULT_OPTIONS||u.DEFAULT_OPTIONS),this._optionsManager=new i(this.options),e&&this.setOptions(e)}var r=e("./EventHandler"),i=e("./OptionsManager"),s=e("./RenderNode"),o=e("famous/utilities/Utility");u.DEFAULT_OPTIONS={},u.prototype.getOptions=function(){return this._optionsManager.value()},u.prototype.setOptions=function(t){this._optionsManager.patch(t)},u.prototype.add=function(){return this._node.add.apply(this._node,arguments)},u.prototype._add=u.prototype.add,u.prototype.render=function(){return this._node.render()},u.prototype.getSize=function(){return this._node&&this._node.getSize?this._node.getSize.apply(this._node,arguments)||this.options.size:this.options.size},n.exports=u}),define("famous/core/ViewSequence",["require","exports","module"],function(e,t,n){function r(e){e||(e=[]),e instanceof Array&&(e={array:e}),this._=null,this.index=e.index||0,e.array?this._=new this.constructor.Backing(e.array):e._&&(this._=e._),this.index===this._.firstIndex&&(this._.firstNode=this),this.index===this._.firstIndex+this._.array.length-1&&(this._.lastNode=this),e.loop!==undefined&&(this._.loop=e.loop),this._previousNode=null,this._nextNode=null}r.Backing=function(t){this.array=t,this.firstIndex=0,this.loop=!1,this.firstNode=null,this.lastNode=null},r.Backing.prototype.getValue=function(t){var n=t-this.firstIndex;return n<0||n>=this.array.length?null:this.array[n]},r.Backing.prototype.setValue=function(t,n){this.array[t-this.firstIndex]=n},r.Backing.prototype.reindex=function(t,n,r){if(!this.array[0])return;var i=0,s=this.firstIndex,o=r-n,u=this.firstNode;while(s<t-1)u=u.getNext(),s++;var a=u;for(i=0;i<n;i++)u=u.getNext(),u&&(u._previousNode=a);var f=u?u.getNext():null;a._nextNode=null,u=a;for(i=0;i<r;i++)u=u.getNext();s+=r,u!==f&&(u._nextNode=f,f&&(f._previousNode=u));if(f){u=f,s++;while(u&&s<this.array.length+this.firstIndex)u._nextNode?u.index+=o:u.index=s,u=u.getNext(),s++}},r.prototype.getPrevious=function(){return this.index===this._.firstIndex?this._.loop?(this._previousNode=this._.lastNode||new this.constructor({_:this._,index:this._.firstIndex+this._.array.length-1}),this._previousNode._nextNode=this):this._previousNode=null:this._previousNode||(this._previousNode=new this.constructor({_:this._,index:this.index-1}),this._previousNode._nextNode=this),this._previousNode},r.prototype.getNext=function(){return this.index===this._.firstIndex+this._.array.length-1?this._.loop?(this._nextNode=this._.firstNode||new this.constructor({_:this._,index:this._.firstIndex}),this._nextNode._previousNode=this):this._nextNode=null:this._nextNode||(this._nextNode=new this.constructor({_:this._,index:this.index+1}),this._nextNode._previousNode=this),this._nextNode},r.prototype.getIndex=function(){return this.index},r.prototype.toString=function i(){return""+this.index},r.prototype.unshift=function(t){this._.array.unshift.apply(this._.array,arguments),this._.firstIndex-=arguments.length},r.prototype.push=function(t){this._.array.push.apply(this._.array,arguments)},r.prototype.splice=function(t,n){var r=Array.prototype.slice.call(arguments,2);this._.array.splice.apply(this._.array,[t-this._.firstIndex,n].concat(r)),this._.reindex(t,n,r.length)},r.prototype.swap=function(t){var n=t.get(),r=this.get();this._.setValue(this.index,n),this._.setValue(t.index,r);var i=this._previousNode,s=this._nextNode,o=this.index,u=t._previousNode,a=t._nextNode,f=t.index;this.index=f,this._previousNode=u===this?t:u,this._previousNode&&(this._previousNode._nextNode=this),this._nextNode=a===this?t:a,this._nextNode&&(this._nextNode._previousNode=this),t.index=o,t._previousNode=i===t?this:i,t._previousNode&&(t._previousNode._nextNode=t),t._nextNode=s===t?this:s,t._nextNode&&(t._nextNode._previousNode=t),this.index===this._.firstIndex?this._.firstNode=this:this.index===this._.firstIndex+this._.array.length-1&&(this._.lastNode=this),t.index===this._.firstIndex?this._.firstNode=t:t.index===this._.firstIndex+this._.array.length-1&&(this._.lastNode=t)},r.prototype.get=function(){return this._.getValue(this.index)},r.prototype.getSize=function(){var t=this.get();return t?t.getSize():null},r.prototype.render=function(){var t=this.get();return t?t.render.apply(t,arguments):null},n.exports=r}),define("famous/events/EventArbiter.js",["require","exports","module","famous/core/EventHandler"],function(e,t,n){function i(e){this.dispatchers={},this.currMode=undefined,this.setMode(e)}var r=e("famous/core/EventHandler");i.prototype.setMode=function(t){if(t!==this.currMode){var n=this.currMode;this.dispatchers[this.currMode]&&this.dispatchers[this.currMode].trigger("unpipe"),this.currMode=t,this.dispatchers[t]&&this.dispatchers[t].emit("pipe"),this.emit("change",{from:n,to:t})}},i.prototype.forMode=function(t){return this.dispatchers[t]||(this.dispatchers[t]=new r),this.dispatchers[t]},i.prototype.emit=function(t,n){if(this.currMode===undefined)return!1;n||(n={});var r=this.dispatchers[this.currMode];if(r)return r.trigger(t,n)},n.exports=i}),define("famous/events/EventFilter.js",["require","exports","module","famous/core/EventHandler"],function(e,t,n){function i(e){r.call(this),this._condition=e}var r=e("famous/core/EventHandler");i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.prototype.emit=function(t,n){if(this._condition(t,n))return r.prototype.emit.apply(this,arguments)},i.prototype.trigger=i.prototype.emit,n.exports=i}),define("famous/events/EventMapper.js",["require","exports","module","famous/core/EventHandler"],function(e,t,n){function i(e){r.call(this),this._mappingFunction=e}var r=e("famous/core/EventHandler");i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.prototype.subscribe=null,i.prototype.unsubscribe=null,i.prototype.emit=function(t,n){var r=this._mappingFunction.apply(this,arguments);r&&r.emit instanceof Function&&r.emit(t,n)},i.prototype.trigger=i.prototype.emit,n.exports=i}),define("famous/inputs/FastClick.js",["require","exports","module"],function(e,t,n){if(!window.CustomEvent)return;var r=300,i=500,s={},o={},u=Date.now;window.addEventListener("touchstart",function(e){var t=u();for(var n=0;n<e.changedTouches.length;n++){var r=e.changedTouches[n];s[r.identifier]=t}}),window.addEventListener("touchmove",function(e){for(var t=0;t<e.changedTouches.length;t++){var n=e.changedTouches[t];delete s[n.identifier]}}),window.addEventListener("touchend",function(e){var t=u();for(var n=0;n<e.changedTouches.length;n++){var i=e.changedTouches[n],a=s[i.identifier];if(a&&t-a<r){var f=new window.CustomEvent("click",{bubbles:!0,detail:i});o[t]=e,e.target.dispatchEvent(f)}delete s[i.identifier]}}),window.addEventListener("click",function(e){var t=u();for(var n in o){var r=o[n];t-n<i?e instanceof window.MouseEvent&&e.target===r.target&&e.stopPropagation():delete o[n]}},!0)}),define("famous/inputs/GenericSync",["require","exports","module","famous/core/EventHandler"],function(e,t,n){function i(e,t){this._eventInput=new r,this._eventOutput=new r,r.setInputHandler(this,this._eventInput),r.setOutputHandler(this,this._eventOutput),this._syncs={},e&&this.addSync(e),t&&this.setOptions(t)}function o(e,t){if(!s[e])return;this._syncs[e]=new s[e](t),this.pipeSync(e)}var r=e("famous/core/EventHandler");i.DIRECTION_X=0,i.DIRECTION_Y=1,i.DIRECTION_Z=2;var s={};i.register=function(t){for(var n in t){if(s[n]){if(s[n]===t[n])return;throw new Error("this key is registered to a different sync class")}s[n]=t[n]}},i.prototype.setOptions=function(e){for(var t in this._syncs)this._syncs[t].setOptions(e)},i.prototype.pipeSync=function(t){var n=this._syncs[t];this._eventInput.pipe(n),n.pipe(this._eventOutput)},i.prototype.unpipeSync=function(t){var n=this._syncs[t];this._eventInput.unpipe(n),n.unpipe(this._eventOutput)},i.prototype.addSync=function(t){if(t instanceof Array)for(var n=0;n<t.length;n++)o.call(this,t[n]);else if(t instanceof Object)for(var r in t)o.call(this,r,t[r])},n.exports=i}),define("famous/inputs/MouseSync",["require","exports","module","famous/core/EventHandler"],function(e,t,n){function i(e){this.options=Object.create(i.DEFAULT_OPTIONS),e&&this.setOptions(e),this._eventInput=new r,this._eventOutput=new r,r.setInputHandler(this,this._eventInput),r.setOutputHandler(this,this._eventOutput),this._eventInput.on("mousedown",u.bind(this)),this._eventInput.on("mousemove",a.bind(this)),this._eventInput.on("mouseup",f.bind(this)),this.options.propogate?this._eventInput.on("mouseleave",l.bind(this)):this._eventInput.on("mouseleave",f.bind(this)),this._payload={delta:null,position:null,velocity:null,clientX:0,clientY:0,offsetX:0,offsetY:0},this._position=null,this._prevCoord=undefined,this._prevTime=undefined,this._down=!1,this._moved=!1}function u(e){var t,n;e.preventDefault();var r=e.clientX,i=e.clientY;this._prevCoord=[r,i],this._prevTime=o(),this._down=!0,this._move=!1,this.options.direction!==undefined?(this._position=0,t=0,n=0):(this._position=[0,0],t=[0,0],n=[0,0]);var s=this._payload;s.delta=t,s.position=this._position,s.velocity=n,s.clientX=r,s.clientY=i,s.offsetX=e.offsetX,s.offsetY=e.offsetY,this._eventOutput.emit("start",s)}function a(e){if(!this._prevCoord)return;var t=this._prevCoord,n=this._prevTime,r=e.clientX,u=e.clientY,a=o(),f=r-t[0],l=u-t[1];this.options.rails&&(Math.abs(f)>Math.abs(l)?l=0:f=0);var c=Math.max(a-n,s),h=f/c,p=l/c,d=this.options.scale,v,m;this.options.direction===i.DIRECTION_X?(m=d*f,v=d*h,this._position+=m):this.options.direction===i.DIRECTION_Y?(m=d*l,v=d*p,this._position+=m):(m=[d*f,d*l],v=[d*h,d*p],this._position[0]+=m[0],this._position[1]+=m[1]);var g=this._payload;g.delta=m,g.position=this._position,g.velocity=v,g.clientX=r,g.clientY=u,g.offsetX=e.offsetX,g.offsetY=e.offsetY,this._eventOutput.emit("update",g),this._prevCoord=[r,u],this._prevTime=a,this._move=!0}function f(e){if(!this._down)return;this._eventOutput.emit("end",this._payload),this._prevCoord=undefined,this._prevTime=undefined,this._down=!1,this._move=!1}function l(e){if(!this._down||!this._move)return;var t=a.bind(this),n=function(e){f.call(this,e),document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",n)}.bind(this,e);document.addEventListener("mousemove",t),document.addEventListener("mouseup",n)}var r=e("famous/core/EventHandler");i.DEFAULT_OPTIONS={direction:undefined,rails:!1,scale:1,propogate:!0},i.DIRECTION_X=0,i.DIRECTION_Y=1;var s=8,o=Date.now;i.prototype.getOptions=function(){return this.options},i.prototype.setOptions=function(t){t.direction!==undefined&&(this.options.direction=t.direction),t.rails!==undefined&&(this.options.rails=t.rails),t.scale!==undefined&&(this.options.scale=t.scale),t.propogate!==undefined&&(this.options.propogate=t.propogate)},n.exports=i}),define("famous/inputs/TwoFingerSync.js",["require","exports","module","famous/core/EventHandler"],function(e,t,n){function i(){this._eventInput=new r,this._eventOutput=new r,r.setInputHandler(this,this._eventInput),r.setOutputHandler(this,this._eventOutput),this.touchAEnabled=!1,this.touchAId=0,this.posA=null,this.timestampA=0,this.touchBEnabled=!1,this.touchBId=0,this.posB=null,this.timestampB=0,this._eventInput.on("touchstart",this.handleStart.bind(this)),this._eventInput.on("touchmove",this.handleMove.bind(this)),this._eventInput.on("touchend",this.handleEnd.bind(this)),this._eventInput.on("touchcancel",this.handleEnd.bind(this))}var r=e("famous/core/EventHandler");i.calculateAngle=function(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.atan2(r,n)},i.calculateDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)},i.calculateCenter=function(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]};var s=Date.now;i.prototype.handleStart=function(t){for(var n=0;n<t.changedTouches.length;n++){var r=t.changedTouches[n];this.touchAEnabled?this.touchBEnabled||(this.touchBId=r.identifier,this.touchBEnabled=!0,this.posB=[r.pageX,r.pageY],this.timestampB=s(),this._startUpdate(t)):(this.touchAId=r.identifier,this.touchAEnabled=!0,this.posA=[r.pageX,r.pageY],this.timestampA=s())}},i.prototype.handleMove=function(t){if(!this.touchAEnabled||!this.touchBEnabled)return;var n=this.timestampA,r=this.timestampB,i;for(var o=0;o<t.changedTouches.length;o++){var u=t.changedTouches[o];u.identifier===this.touchAId?(this.posA=[u.pageX,u.pageY],this.timestampA=s(),i=this.timestampA-n):u.identifier===this.touchBId&&(this.posB=[u.pageX,u.pageY],this.timestampB=s(),i=this.timestampB-r)}i&&this._moveUpdate(i)},i.prototype.handleEnd=function(t){for(var n=0;n<t.changedTouches.length;n++){var r=t.changedTouches[n];if(r.identifier===this.touchAId||r.identifier===this.touchBId)this.touchAEnabled&&this.touchBEnabled&&this._eventOutput.emit("end",{touches:[this.touchAId,this.touchBId],angle:this._angle}),this.touchAEnabled=!1,this.touchAId=0,this.touchBEnabled=!1,this.touchBId=0}},n.exports=i}),define("famous/inputs/PinchSync.js",["require","exports","module","./TwoFingerSync"],function(e,t,n){function i(e){r.call(this),this.options=Object.create(i.DEFAULT_OPTIONS),e&&this.setOptions(e),this._displacement=0,this._previousDistance=0}var r=e("./TwoFingerSync");i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.DEFAULT_OPTIONS={scale:1},i.prototype._startUpdate=function(t){this._previousDistance=r.calculateDistance(this.posA,this.posB),this._displacement=0,this._eventOutput.emit("start",{count:t.touches.length,touches:[this.touchAId,this.touchBId],distance:this._dist,center:r.calculateCenter(this.posA,this.posB)})},i.prototype._moveUpdate=function(t){var n=r.calculateDistance(this.posA,this.posB),i=r.calculateCenter(this.posA,this.posB),s=this.options.scale,o=s*(n-this._previousDistance),u=o/t;this._previousDistance=n,this._displacement+=o,this._eventOutput.emit("update",{delta:o,velocity:u,distance:n,displacement:this._displacement,center:i,touches:[this.touchAId,this.touchBId]})},i.prototype.getOptions=function(){return this.options},i.prototype.setOptions=function(t){t.scale!==undefined&&(this.options.scale=t.scale)},n.exports=i}),define("famous/inputs/RotateSync.js",["require","exports","module","./TwoFingerSync"],function(e,t,n){function i(e){r.call(this),this.options=Object.create(i.DEFAULT_OPTIONS),e&&this.setOptions(e),this._angle=0,this._previousAngle=0}var r=e("./TwoFingerSync");i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.DEFAULT_OPTIONS={scale:1},i.prototype._startUpdate=function(t){this._angle=0,this._previousAngle=r.calculateAngle(this.posA,this.posB);var n=r.calculateCenter(this.posA,this.posB);this._eventOutput.emit("start",{count:t.touches.length,angle:this._angle,center:n,touches:[this.touchAId,this.touchBId]})},i.prototype._moveUpdate=function(t){var n=this.options.scale,i=r.calculateAngle(this.posA,this.posB),s=r.calculateCenter(this.posA,this.posB),o=n*(i-this._previousAngle),u=o/t;this._angle+=o,this._eventOutput.emit("update",{delta:o,velocity:u,angle:this._angle,center:s,touches:[this.touchAId,this.touchBId]}),this._previousAngle=i},i.prototype.getOptions=function(){return this.options},i.prototype.setOptions=function(t){t.scale!==undefined&&(this.options.scale=t.scale)},n.exports=i}),define("famous/inputs/ScaleSync.js",["require","exports","module","./TwoFingerSync"],function(e,t,n){function i(e){r.call(this),this.options=Object.create(i.DEFAULT_OPTIONS),e&&this.setOptions(e),this._scaleFactor=1,this._startDist=0,this._eventInput.on("pipe",s.bind(this))}function s(){this.touchAId=undefined,this.touchBId=undefined}var r=e("./TwoFingerSync");i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.DEFAULT_OPTIONS={scale:1},i.prototype._startUpdate=function(t){this._scaleFactor=1,this._startDist=r.calculateDistance(this.posA,this.posB),this._eventOutput.emit("start",{count:t.touches.length,touches:[this.touchAId,this.touchBId],distance:this._startDist,center:r.calculateCenter(this.posA,this.posB)})},i.prototype._moveUpdate=function(t){var n=this.options.scale,i=r.calculateDistance(this.posA,this.posB),s=r.calculateCenter(this.posA,this.posB),o=(i-this._startDist)/this._startDist,u=Math.max(1+n*o,0),a=(u-this._scaleFactor)/t;this._eventOutput.emit("update",{delta:o,scale:u,velocity:a,distance:i,center:s,touches:[this.touchAId,this.touchBId]}),this._scaleFactor=u},i.prototype.getOptions=function(){return this.options},i.prototype.setOptions=function(t){t.scale!==undefined&&(this.options.scale=t.scale)},n.exports=i}),define("famous/inputs/ScrollSync",["require","exports","module","famous/core/EventHandler","famous/core/Engine"],function(e,t,n){function s(e){this.options=Object.create(s.DEFAULT_OPTIONS),e&&this.setOptions(e),this._payload={delta:null,position:null,velocity:null,slip:!0},this._eventInput=new r,this._eventOutput=new r,r.setInputHandler(this,this._eventInput),r.setOutputHandler(this,this._eventOutput),this._position=this.options.direction===undefined?[0,0]:0,this._prevTime=undefined,this._prevVel=undefined,this._eventInput.on("mousewheel",f.bind(this)),this._eventInput.on("wheel",f.bind(this)),this._inProgress=!1,this._loopBound=!1}function a(){if(this._inProgress&&u()-this._prevTime>this.options.stallTime){this._inProgress=!1;var e=Math.abs(this._prevVel)>=this.options.minimumEndSpeed?this._prevVel:0,t=this._payload;t.position=this._position,t.velocity=e,t.slip=!0,this._eventOutput.emit("end",t)}}function f(e){e.preventDefault(),this._inProgress||(this._inProgress=!0,this._position=this.options.direction===undefined?[0,0]:0,m=this._payload,m.slip=!0,m.position=this._position,m.clientX=e.clientX,m.clientY=e.clientY,m.offsetX=e.offsetX,m.offsetY=e.offsetY,this._eventOutput.emit("start",m),this._loopBound||(i.on("prerender",a.bind(this)),this._loopBound=!0));var t=u(),n=this._prevTime||t,r=e.wheelDeltaX!==undefined?e.wheelDeltaX:-e.deltaX,f=e.wheelDeltaY!==undefined?e.wheelDeltaY:-e.deltaY;e.deltaMode===1&&(r*=this.options.lineHeight,f*=this.options.lineHeight),this.options.rails&&(Math.abs(r)>Math.abs(f)?f=0:r=0);var l=Math.max(t-n,o),c=r/l,h=f/l,p=this.options.scale,d,v;this.options.direction===s.DIRECTION_X?(v=p*r,d=p*c,this._position+=v):this.options.direction===s.DIRECTION_Y?(v=p*f,d=p*h,this._position+=v):(v=[p*r,p*f],d=[p*c,p*h],this._position[0]+=v[0],this._position[1]+=v[1]);var m=this._payload;m.delta=v,m.velocity=d,m.position=this._position,m.slip=!0,this._eventOutput.emit("update",m),this._prevTime=t,this._prevVel=d}var r=e("famous/core/EventHandler"),i=e("famous/core/Engine");s.DEFAULT_OPTIONS={direction:undefined,minimumEndSpeed:Infinity,rails:!1,scale:1,stallTime:50,lineHeight:40},s.DIRECTION_X=0,s.DIRECTION_Y=1;var o=8,u=Date.now;s.prototype.getOptions=function(){return this.options},s.prototype.setOptions=function(t){t.direction!==undefined&&(this.options.direction=t.direction),t.minimumEndSpeed!==undefined&&(this.options.minimumEndSpeed=t.minimumEndSpeed),t.rails!==undefined&&(this.options.rails=t.rails),t.scale!==undefined&&(this.options.scale=t.scale),t.stallTime!==undefined&&(this.options.stallTime=t.stallTime)},n.exports=s}),define("famous/inputs/TouchTracker.js",["require","exports","module","famous/core/EventHandler"],function(e,t,n){function s(e,t,n){return{x:e.clientX,y:e.clientY,identifier:e.identifier,origin:t.origin,timestamp:i(),count:t.touches.length,history:n}}function o(e){for(var t=0;t<e.changedTouches.length;t++){var n=e.changedTouches[t],r=s(n,e,null);this.eventOutput.emit("trackstart",r),!this.selective&&!this.touchHistory[n.identifier]&&this.track(r)}}function u(e){for(var t=0;t<e.changedTouches.length;t++){var n=e.changedTouches[t],r=this.touchHistory[n.identifier];if(r){var i=s(n,e,r);this.touchHistory[n.identifier].push(i),this.eventOutput.emit("trackmove",i)}}}function a(e){for(var t=0;t<e.changedTouches.length;t++){var n=e.changedTouches[t],r=this.touchHistory[n.identifier];if(r){var i=s(n,e,r);this.eventOutput.emit("trackend",i),delete this.touchHistory[n.identifier]}}}function f(){for(var e in this.touchHistory){var t=this.touchHistory[e];this.eventOutput.emit("trackend",{touch:t[t.length-1].touch,timestamp:Date.now(),count:0,history:t}),delete this.touchHistory[e]}}function l(e){this.selective=e,this.touchHistory={},this.eventInput=new r,this.eventOutput=new r,r.setInputHandler(this,this.eventInput),r.setOutputHandler(this,this.eventOutput),this.eventInput.on("touchstart",o.bind(this)),this.eventInput.on("touchmove",u.bind(this)),this.eventInput.on("touchend",a.bind(this)),this.eventInput.on("touchcancel",a.bind(this)),this.eventInput.on("unpipe",f.bind(this))}var r=e("famous/core/EventHandler"),i=Date.now;l.prototype.track=function(t){this.touchHistory[t.identifier]=[t]},n.exports=l}),define("famous/inputs/TouchSync",["require","exports","module","./TouchTracker","famous/core/EventHandler"],function(e,t,n){function s(e){this.options=Object.create(s.DEFAULT_OPTIONS),e&&this.setOptions(e),this._eventOutput=new i,this._touchTracker=new r,i.setOutputHandler(this,this._eventOutput),i.setInputHandler(this,this._touchTracker),this._touchTracker.on("trackstart",u.bind(this)),this._touchTracker.on("trackmove",a.bind(this)),this._touchTracker.on("trackend",f.bind(this)),this._payload={delta:null,position:null,velocity:null,clientX:undefined,clientY:undefined,count:0,touch:undefined},this._position=null}function u(e){var t,n;this.options.direction!==undefined?(this._position=0,t=0,n=0):(this._position=[0,0],t=[0,0],n=[0,0]);var r=this._payload;r.delta=n,r.position=this._position,r.velocity=t,r.clientX=e.x,r.clientY=e.y,r.count=e.count,r.touch=e.identifier,this._eventOutput.emit("start",r)}function a(e){var t=e.history,n=t[t.length-1],r=t[t.length-2],i=r.timestamp,u=n.timestamp,a=n.x-r.x,f=n.y-r.y;this.options.rails&&(Math.abs(a)>Math.abs(f)?f=0:a=0);var l=Math.max(u-i,o),c=a/l,h=f/l,p=this.options.scale,d,v;this.options.direction===s.DIRECTION_X?(v=p*a,d=p*c,this._position+=v):this.options.direction===s.DIRECTION_Y?(v=p*f,d=p*h,this._position+=v):(v=[p*a,p*f],d=[p*c,p*h],this._position[0]+=v[0],this._position[1]+=v[1]);var m=this._payload;m.delta=v,m.velocity=d,m.position=this._position,m.clientX=e.x,m.clientY=e.y,m.count=e.count,m.touch=e.identifier,this._eventOutput.emit("update",m)}function f(e){this._payload.count=e.count,this._eventOutput.emit("end",this._payload)}var r=e("./TouchTracker"),i=e("famous/core/EventHandler");s.DEFAULT_OPTIONS={direction:undefined,rails:!1,scale:1},s.DIRECTION_X=0,s.DIRECTION_Y=1;var o=8;s.prototype.setOptions=function(t){t.direction!==undefined&&(this.options.direction=t.direction),t.rails!==undefined&&(this.options.rails=t.rails),t.scale!==undefined&&(this.options.scale=t.scale)},s.prototype.getOptions=function(){return this.options},n.exports=s}),define("famous/math/Vector.js",["require","exports","module"],function(e,t,n){function r(e,t,n){return arguments.length===1&&e!==undefined?this.set(e):(this.x=e||0,this.y=t||0,this.z=n||0),this}function s(e,t,n){return this.x=e,this.y=t,this.z=n,this}function o(e){return s.call(this,e[0],e[1],e[2]||0)}function u(e){return s.call(this,e.x,e.y,e.z)}function a(e){return s.call(this,e,0,0)}var i=new r(0,0,0);r.prototype.add=function(t){return s.call(i,this.x+t.x,this.y+t.y,this.z+t.z)},r.prototype.sub=function(t){return s.call(i,this.x-t.x,this.y-t.y,this.z-t.z)},r.prototype.mult=function(t){return s.call(i,t*this.x,t*this.y,t*this.z)},r.prototype.div=function(t){return this.mult(1/t)},r.prototype.cross=function(t){var n=this.x,r=this.y,o=this.z,u=t.x,a=t.y,f=t.z;return s.call(i,o*a-r*f,n*f-o*u,r*u-n*a)},r.prototype.equals=function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},r.prototype.rotateX=function(t){var n=this.x,r=this.y,o=this.z,u=Math.cos(t),a=Math.sin(t);return s.call(i,n,r*u-o*a,r*a+o*u)},r.prototype.rotateY=function(t){var n=this.x,r=this.y,o=this.z,u=Math.cos(t),a=Math.sin(t);return s.call(i,o*a+n*u,r,o*u-n*a)},r.prototype.rotateZ=function(t){var n=this.x,r=this.y,o=this.z,u=Math.cos(t),a=Math.sin(t);return s.call(i,n*u-r*a,n*a+r*u,o)},r.prototype.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},r.prototype.normSquared=function(){return this.dot(this)},r.prototype.norm=function(){return Math.sqrt(this.normSquared())},r.prototype.normalize=function(t){arguments.length===0&&(t=1);var n=this.norm();return n>1e-7?u.call(i,this.mult(t/n)):s.call(i,t,0,0)},r.prototype.clone=function(){return new r(this)},r.prototype.isZero=function(){return!(this.x||this.y||this.z)},r.prototype.set=function(t){return t instanceof Array?o.call(this,t):typeof t=="number"?a.call(this,t):u.call(this,t)},r.prototype.setXYZ=function(e,t,n){return s.apply(this,arguments)},r.prototype.set1D=function(e){return a.call(this,e)},r.prototype.put=function(t){this===i?u.call(t,i):u.call(t,this)},r.prototype.clear=function(){return s.call(this,0,0,0)},r.prototype.cap=function f(f){if(f===Infinity)return u.call(i,this);var e=this.norm();return e>f?u.call(i,this.mult(f/e)):u.call(i,this)},r.prototype.project=function(t){return t.mult(this.dot(t))},r.prototype.reflectAcross=function(t){return t.normalize().put(t),u(i,this.sub(this.project(t).mult(2)))},r.prototype.get=function(){return[this.x,this.y,this.z]},r.prototype.get1D=function(){return this.x},n.exports=r}),define("famous/math/Matrix",["require","exports","module","./Vector"],function(e,t,n){function i(e){return this.values=e||[[1,0,0],[0,1,0],[0,0,1]],this}var r=e("./Vector"),s=new i,o=new r;i.prototype.get=function(){return this.values},i.prototype.set=function(t){this.values=t},i.prototype.vectorMultiply=function(t){var n=this.get(),r=t.x,i=t.y,s=t.z,u=n[0],a=n[1],f=n[2],l=u[0],c=u[1],h=u[2],p=a[0],d=a[1],v=a[2],m=f[0],g=f[1],y=f[2];return o.setXYZ(l*r+c*i+h*s,p*r+d*i+v*s,m*r+g*i+y*s)},i.prototype.multiply=function(t){var n=this.get(),r=[[]];for(var i=0;i<3;i++){r[i]=[];for(var o=0;o<3;o++){var u=0;for(var a=0;a<3;a++)u+=n[i][a]*t[a][o];r[i][o]=u}}return s.set(r)},i.prototype.transpose=function(){var t=[],n=this.get();for(var r=0;r<3;r++)for(var i=0;i<3;i++)t[r][i]=n[i][r];return s.set(t)},i.prototype.clone=function(){var t=this.get(),n=[];for(var r=0;r<3;r++)n[r]=t[r].slice();return new i(n)},n.exports=i}),define("famous/math/Quaternion",["require","exports","module","./Matrix"],function(e,t,n){function i(e,t,n,r){return arguments.length===1?this.set(e):(this.w=e!==undefined?e:1,this.x=t!==undefined?t:0,this.y=n!==undefined?n:0,this.z=r!==undefined?r:0),this}var r=e("./Matrix"),s=new i(1,0,0,0);i.prototype.add=function(t){return s.setWXYZ(this.w+t.w,this.x+t.x,this.y+t.y,this.z+t.z)},i.prototype.sub=function(t){return s.setWXYZ(this.w-t.w,this.x-t.x,this.y-t.y,this.z-t.z)},i.prototype.scalarDivide=function(t){return this.scalarMultiply(1/t)},i.prototype.scalarMultiply=function(t){return s.setWXYZ(this.w*t,this.x*t,this.y*t,this.z*t)},i.prototype.multiply=function(t){var n=this.x,r=this.y,i=this.z,o=this.w,u=t.x,a=t.y,f=t.z,l=t.w||0;return s.setWXYZ(o*l-n*u-r*a-i*f,n*l+u*o+a*i-r*f,r*l+a*o+n*f-u*i,i*l+f*o+u*r-n*a)};var o=new i(1,0,0,0);i.prototype.rotateVector=function(t){return o.set(this.conj()),s.set(this.multiply(t).multiply(o))},i.prototype.inverse=function(){return s.set(this.conj().scalarDivide(this.normSquared()))},i.prototype.negate=function(){return this.scalarMultiply(-1)},i.prototype.conj=function(){return s.setWXYZ(this.w,-this.x,-this.y,-this.z)},i.prototype.normalize=function(t){return t=t===undefined?1:t,this.scalarDivide(t*this.norm())},i.prototype.makeFromAngleAndAxis=function(t,n){var r=n.normalize(),i=t*.5,s=-Math.sin(i);return this.x=s*r.x,this.y=s*r.y,this.z=s*r.z,this.w=Math.cos(i),this},i.prototype.setWXYZ=function(t,n,r,i){return s.clear(),this.w=t,this.x=n,this.y=r,this.z=i,this},i.prototype.set=function(t){return t instanceof Array?(this.w=0,this.x=t[0],this.y=t[1],this.z=t[2]):(this.w=t.w,this.x=t.x,this.y=t.y,this.z=t.z),this!==s&&s.clear(),this},i.prototype.put=function(t){t.set(s)},i.prototype.clone=function(){return new i(this)},i.prototype.clear=function(){return this.w=1,this.x=0,this.y=0,this.z=0,this},i.prototype.isEqual=function(t){return t.w===this.w&&t.x===this.x&&t.y===this.y&&t.z===this.z},i.prototype.dot=function(t){return this.w*t.w+this.x*t.x+this.y*t.y+this.z*t.z},i.prototype.normSquared=function(){return this.dot(this)},i.prototype.norm=function(){return Math.sqrt(this.normSquared())},i.prototype.isZero=function(){return!(this.x||this.y||this.z)},i.prototype.getTransform=function(){var t=this.normalize(1),n=t.x,r=t.y,i=t.z,s=t.w;return[1-2*r*r-2*i*i,2*n*r-2*i*s,2*n*i+2*r*s,0,2*n*r+2*i*s,1-2*n*n-2*i*i,2*r*i-2*n*s,0,2*n*i-2*r*s,2*r*i+2*n*s,1-2*n*n-2*r*r,0,0,0,0,1]};var u=new r;i.prototype.getMatrix=function(){var t=this.normalize(1),n=t.x,r=t.y,i=t.z,s=t.w;return u.set([[1-2*r*r-2*i*i,2*n*r+2*i*s,2*n*i-2*r*s],[2*n*r-2*i*s,1-2*n*n-2*i*i,2*r*i+2*n*s],[2*n*i+2*r*s,2*r*i-2*n*s,1-2*n*n-2*r*r]])};var a=1e-5;i.prototype.slerp=function(t,n){var r,i,o,u,f;return i=this.dot(t),1-i>a?(r=Math.acos(i),o=Math.sin(r),u=Math.sin((1-n)*r)/o,f=Math.sin(n*r)/o):(u=1-n,f=n),s.set(this.scalarMultiply(u/f).add(t).multiply(f))},n.exports=i}),define("famous/math/Random.js",["require","exports","module"],function(e,t,n){function i(e,t){return e+r()*(t-e)}function s(e,t){return e+r()*(t-e+1)>>0}var r=Math.random,o={};o.integer=function(t,n,r){t=t!==undefined?t:0,n=n!==undefined?n:1;if(r!==undefined){var i=[];for(var o=0;o<r;o++)i.push(s(t,n));return i}return s(t,n)},o.range=function(t,n,r){t=t!==undefined?t:0,n=n!==undefined?n:1;if(r!==undefined){var s=[];for(var o=0;o<r;o++)s.push(i(t,n));return s}return i(t,n)},o.sign=function(t){return t=t!==undefined?t:.5,r()<t?1:-1},o.bool=function(t){return t=t!==undefined?t:.5,r()<t},n.exports=o}),define("famous/math/Utilities",["require","exports","module"],function(e,t,n){var r={};r.clamp=function(t,n){return Math.max(Math.min(t,n[1]),n[0])},r.length=function(t){var n=0;for(var r=0;r<t.length;r++)n+=t[r]*t[r];return Math.sqrt(n)},n.exports=r}),define("famous/modifiers/Draggable.js",["require","exports","module","famous/core/Transform","famous/transitions/Transitionable","famous/core/EventHandler","famous/math/Utilities","famous/inputs/GenericSync","famous/inputs/MouseSync","famous/inputs/TouchSync"],function(e,t,n){function l(e){this.options=Object.create(l.DEFAULT_OPTIONS),e&&this.setOptions(e),this._positionState=new i([0,0]),this._differential=[0,0],this._active=!0,this.sync=new u(["mouse","touch"],{scale:this.options.scale}),this.eventOutput=new s,s.setInputHandler(this,this.sync),s.setOutputHandler(this,this.eventOutput),g.call(this)}function p(e){var t=this.options,n=t.projection,r=t.snapX,i=t.snapY,s=n&c.x?e[0]:0,o=n&c.y?e[1]:0;return r>0&&(s-=s%r),i>0&&(o-=o%i),[s,o]}function d(){if(!this._active)return;this._positionState.isActive()&&this._positionState.halt(),this.eventOutput.emit("start",{position:this.getPosition()})}function v(e){if(!this._active)return;var t=this.options;this._differential=e.position;var n=p.call(this,this._differential);this._differential[0]-=n[0],this._differential[1]-=n[1];var r=this.getPosition();r[0]+=n[0],r[1]+=n[1];if(t.xRange){var i=[t.xRange[0]+.5*t.snapX,t.xRange[1]-.5*t.snapX];r[0]=h(r[0],i)}if(t.yRange){var s=[t.yRange[0]+.5*t.snapY,t.yRange[1]-.5*t.snapY];r[1]=h(r[1],s)}this.eventOutput.emit("update",{position:r})}function m(){if(!this._active)return;this.eventOutput.emit("end",{position:this.getPosition()})}function g(){this.sync.on("start",d.bind(this)),this.sync.on("update",v.bind(this)),this.sync.on("end",m.bind(this))}var r=e("famous/core/Transform"),i=e("famous/transitions/Transitionable"),s=e("famous/core/EventHandler"),o=e("famous/math/Utilities"),u=e("famous/inputs/GenericSync"),a=e("famous/inputs/MouseSync"),f=e("famous/inputs/TouchSync");u.register({mouse:a,touch:f});var c={x:1,y:2};l.DIRECTION_X=c.x,l.DIRECTION_Y=c.y;var h=o.clamp;l.DEFAULT_OPTIONS={projection:c.x|c.y,scale:1,xRange:null,yRange:null,snapX:0,snapY:0,transition:{duration:0}},l.prototype.setOptions=function(t){var n=this.options;if(t.projection!==undefined){var r=t.projection;this.options.projection=0,["x","y"].forEach(function(e){r.indexOf(e)!==-1&&(n.projection|=c[e])})}t.scale!==undefined&&(n.scale=t.scale,this.sync.setOptions({scale:t.scale})),t.xRange!==undefined&&(n.xRange=t.xRange),t.yRange!==undefined&&(n.yRange=t.yRange),t.snapX!==undefined&&(n.snapX=t.snapX),t.snapY!==undefined&&(n.snapY=t.snapY)},l.prototype.getPosition=function(){return this._positionState.get()},l.prototype.setRelativePosition=function(t,n,r){var i=this.getPosition(),s=[i[0]+t[0],i[1]+t[1]];this.setPosition(s,n,r)},l.prototype.setPosition=function(t,n,r){this._positionState.isActive()&&this._positionState.halt(),this._positionState.set(t,n,r)},l.prototype.activate=function(){this._active=!0},l.prototype.deactivate=function(){this._active=!1},l.prototype.toggle=function(){this._active=!this._active},l.prototype.modify=function(t){var n=this.getPosition();return{transform:r.translate(n[0],n[1]),target:t}},n.exports=l}),define("famous/modifiers/Fader.js",["require","exports","module","famous/transitions/Transitionable","famous/core/OptionsManager"],function(e,t,n){function s(e,t){this.options=Object.create(s.DEFAULT_OPTIONS),this._optionsManager=new i(this.options),e&&this.setOptions(e),t||(t=0),this.transitionHelper=new r(t)}var r=e("famous/transitions/Transitionable"),i=e("famous/core/OptionsManager");s.DEFAULT_OPTIONS={cull:!1,transition:!0,pulseInTransition:!0,pulseOutTransition:!0},s.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},s.prototype.show=function(t,n){t=t||this.options.transition,this.set(1,t,n)},s.prototype.hide=function(t,n){t=t||this.options.transition,this.set(0,t,n)},s.prototype.set=function(t,n,r){this.halt(),this.transitionHelper.set(t,n,r)},s.prototype.halt=function(){this.transitionHelper.halt()},s.prototype.isVisible=function(){return this.transitionHelper.get()>0},s.prototype.modify=function(t){var n=this.transitionHelper.get();return this.options.cull&&!n?undefined:{opacity:n,target:t}},n.exports=s}),define("famous/modifiers/ModifierChain.js",["require","exports","module"],function(e,t,n){function r(){this._chain=[],arguments.length&&this.addModifier.apply(this,arguments)}r.prototype.addModifier=function(t){Array.prototype.push.apply(this._chain,arguments)},r.prototype.removeModifier=function(t){var n=this._chain.indexOf(t);if(n<0)return;this._chain.splice(n,1)},r.prototype.modify=function(t){var n=this._chain,r=t;for(var i=0;i<n.length;i++)r=n[i].modify(r);return r},n.exports=r}),define("famous/modifiers/StateModifier.js",["require","exports","module","famous/core/Modifier","famous/core/Transform","famous/transitions/Transitionable","famous/transitions/TransitionableTransform"],function(e,t,n){function u(e){this._transformState=new o(i.identity),this._opacityState=new s(1),this._originState=new s([0,0]),this._alignState=new s([0,0]),this._sizeState=new s([0,0]),this._modifier=new r({transform:this._transformState,opacity:this._opacityState,origin:null,align:null,size:null}),this._hasOrigin=!1,this._hasAlign=!1,this._hasSize=!1,e&&(e.transform&&this.setTransform(e.transform),e.opacity!==undefined&&this.setOpacity(e.opacity),e.origin&&this.setOrigin(e.origin),e.align&&this.setAlign(e.align),e.size&&this.setSize(e.size))}var r=e("famous/core/Modifier"),i=e("famous/core/Transform"),s=e("famous/transitions/Transitionable"),o=e("famous/transitions/TransitionableTransform");u.prototype.setTransform=function(t,n,r){return this._transformState.set(t,n,r),this},u.prototype.setOpacity=function(t,n,r){return this._opacityState.set(t,n,r),this},u.prototype.setOrigin=function(t,n,r){return t===null?(this._hasOrigin&&(this._modifier.originFrom(null),this._hasOrigin=!1),this):(this._hasOrigin||(this._hasOrigin=!0,this._modifier.originFrom(this._originState)),this._originState.set(t,n,r),this)},u.prototype.setAlign=function(t,n,r){return t===null?(this._hasAlign&&(this._modifier.alignFrom(null),this._hasAlign=!1),this):(this._hasAlign||(this._hasAlign=!0,this._modifier.alignFrom(this._alignState)),this._alignState.set(t,n,r),this)},u.prototype.setSize=function(t,n,r){return t===null?(this._hasSize&&(this._modifier.sizeFrom(null),this._hasSize=!1),this):(this._hasSize||(this._hasSize=!0,this._modifier.sizeFrom(this._sizeState)),this._sizeState.set(t,n,r),this)},u.prototype.halt=function(){this._transformState.halt(),this._opacityState.halt(),this._originState.halt(),this._alignState.halt(),this._sizeState.halt()},u.prototype.getTransform=function(){return this._transformState.get()},u.prototype.getFinalTransform=function(){return this._transformState.getFinal()},u.prototype.getOpacity=function(){return this._opacityState.get()},u.prototype.getOrigin=function(){return this._hasOrigin?this._originState.get():null},u.prototype.getAlign=function(){return this._hasAlign?this._alignState.get():null},u.prototype.getSize=function(){return this._hasSize?this._sizeState.get():null},u.prototype.modify=function(t){return this._modifier.modify(t)},n.exports=u}),define("famous/physics/PhysicsEngine",["require","exports","module","famous/core/EventHandler"],function(e,t,n){function i(e){this.options=Object.create(i.DEFAULT_OPTIONS),e&&this.setOptions(e),this._particles=[],this._bodies=[],this._agents={},this._forces=[],this._constraints=[],this._buffer=0,this._prevTime=a(),this._isSleeping=!1,this._eventHandler=null,this._currAgentId=0,this._hasBodies=!1}function f(e){if(e.applyForce)return this._forces;if(e.applyConstraint)return this._constraints}function l(e,t,n){return t===undefined&&(t=this.getParticlesAndBodies()),t instanceof Array||(t=[t]),this._agents[this._currAgentId]={agent:e,targets:t,source:n},f.call(this,e).push(this._currAgentId),this._currAgentId++}function c(e){return this._agents[e]}function h(e){var t=c.call(this,this._forces[e]);t.agent.applyForce(t.targets,t.source)}function p(){for(var e=this._forces.length-1;e>-1;e--)h.call(this,e)}function d(e,t){var n=this._agents[this._constraints[e]];return n.agent.applyConstraint(n.targets,n.source,t)}function v(e){var t=0;while(t<this.options.constraintSteps){for(var n=this._constraints.length-1;n>-1;n--)d.call(this,n,e);t++}}function m(e,t){e.integrateVelocity(t)}function g(e,t){e.integrateAngularMomentum(t),e.updateAngularVelocity()}function y(e,t){e.integrateOrientation(t)}function b(e,t){e.integratePosition(t),e.emit("update",e)}function w(e){p.call(this,e),this.forEach(m,e),this.forEachBody(g,e),v.call(this,e),this.forEachBody(y,e),this.forEach(b,e)}function E(){var e=0,t=0;return this.forEach(function(n){t=n.getEnergy(),e+=t,t<n.sleepTolerance&&n.sleep()}),e}function S(){var e=0;for(var t=this._forces.length-1;t>-1;t--)e+=this._forces[t].getEnergy()||0;return e}function x(){var e=0;for(var t=this._constraints.length-1;t>-1;t--)e+=this._constraints[t].getEnergy()||0;return e}var r=e("famous/core/EventHandler"),s=17,o=1e3/120,u=17;i.DEFAULT_OPTIONS={constraintSteps:1,sleepTolerance:1e-7};var a=function(){return Date.now}();i.prototype.setOptions=function(t){for(var n in t)this.options[n]&&(this.options[n]=t[n])},i.prototype.addBody=function(t){return t._engine=this,t.isBody?(this._bodies.push(t),this._hasBodies=!0):this._particles.push(t),t},i.prototype.removeBody=function(t){var n=t.isBody?this._bodies:this._particles,r=n.indexOf(t);if(r>-1){for(var i=0;i<Object.keys(this._agents).length;i++)this.detachFrom(i,t);n.splice(r,1)}this.getBodies().length===0&&(this._hasBodies=!1)},i.prototype.attach=function(t,n,r){if(t instanceof Array){var i=[];for(var s=0;s<t.length;s++)i[s]=l.call(this,t[s],n,r);return i}return l.call(this,t,n,r)},i.prototype.attachTo=function(t,n){c.call(this,t).targets.push(n)},i.prototype.detach=function(t){var n=this.getAgent(t),r=f.call(this,n),i=r.indexOf(t);r.splice(i,1),delete this._agents[t]},i.prototype.detachFrom=function(t,n){var r=c.call(this,t);if(r.source===n)this.detach(t);else{var i=r.targets,s=i.indexOf(n);s>-1&&i.splice(s,1)}},i.prototype.detachAll=function(){this._agents={},this._forces=[],this._constraints=[],this._currAgentId=0},i.prototype.getAgent=function(t){return c.call(this,t).agent},i.prototype.getParticles=function(){return this._particles},i.prototype.getBodies=function(){return this._bodies},i.prototype.getParticlesAndBodies=function(){return this.getParticles().concat(this.getBodies())},i.prototype.forEachParticle=function(t,n){var r=this.getParticles();for(var i=0,s=r.length;i<s;i++)t.call(this,r[i],n)},i.prototype.forEachBody=function(t,n){if(!this._hasBodies)return;var r=this.getBodies();for(var i=0,s=r.length;i<s;i++)t.call(this,r[i],n)},i.prototype.forEach=function(t,n){this.forEachParticle(t,n),this.forEachBody(t,n)},i.prototype.getEnergy=function(){return E.call(this)+S.call(this)+x.call(this)},i.prototype.step=function(){var t=a(),n=t-this._prevTime;this._prevTime=t;if(n<o)return;n>u&&(n=u),w.call(this,s)},i.prototype.isSleeping=function(){return this._isSleeping},i.prototype.sleep=function(){this.emit("end",this),this._isSleeping=!0},i.prototype.wake=function(){this._prevTime=a(),this.emit("start",this),this._isSleeping=!1},i.prototype.emit=function(t,n){if(this._eventHandler===null)return;this._eventHandler.emit(t,n)},i.prototype.on=function(t,n){this._eventHandler===null&&(this._eventHandler=new r),this._eventHandler.on(t,n)},n.exports=i}),define("famous/surfaces/CanvasSurface",["require","exports","module","famous/core/Surface"],function(e,t,n){function i(e){e&&e.canvasSize&&(this._canvasSize=e.canvasSize),r.apply(this,arguments),this._canvasSize||(this._canvasSize=this.getSize()),this._backBuffer=document.createElement("canvas"),this._canvasSize&&(this._backBuffer.width=this._canvasSize[0],this._backBuffer.height=this._canvasSize[1]),this._contextId=undefined}var r=e("famous/core/Surface");i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.prototype.elementType="canvas",i.prototype.elementClass="famous-surface",i.prototype.setContent=function(){},i.prototype.deploy=function(t){this._canvasSize&&(t.width=this._canvasSize[0],t.height=this._canvasSize[1]),this._contextId==="2d"&&(t.getContext(this._contextId).drawImage(this._backBuffer,0,0),this._backBuffer.width=0,this._backBuffer.height=0)},i.prototype.recall=function(t){var n=this.getSize();this._backBuffer.width=t.width,this._backBuffer.height=t.height,this._contextId==="2d"&&(this._backBuffer.getContext(this._contextId).drawImage(t,0,0),t.width=0,t.height=0)},i.prototype.getContext=function(t){return this._contextId=t,this._currTarget?this._currTarget.getContext(t):this._backBuffer.getContext(t)},i.prototype.setSize=function(t,n){r.prototype.setSize.apply(this,arguments),n&&(this._canvasSize=[n[0],n[1]]),this._currTarget&&(this._currTarget.width=this._canvasSize[0],this._currTarget.height=this._canvasSize[1])},n.exports=i}),define("famous/surfaces/ContainerSurface",["require","exports","module","famous/core/Surface","famous/core/Context"],function(e,t,n){function s(e){r.call(this,e),this._container=document.createElement("div"),this._container.classList.add("famous-group"),this._container.classList.add("famous-container-group"),this._shouldRecalculateSize=!1,this.context=new i(this._container),this.setContent(this._container)}var r=e("famous/core/Surface"),i=e("famous/core/Context");s.prototype=Object.create(r.prototype),s.prototype.constructor=s,s.prototype.elementType="div",s.prototype.elementClass="famous-surface",s.prototype.add=function(){return this.context.add.apply(this.context,arguments)},s.prototype.render=function(){return this._sizeDirty&&(this._shouldRecalculateSize=!0),r.prototype.render.apply(this,arguments)},s.prototype.deploy=function(){return this._shouldRecalculateSize=!0,r.prototype.deploy.apply(this,arguments)},s.prototype.commit=function(t,n,i,s,o){var u=this._size?[this._size[0],this._size[1]]:null,a=r.prototype.commit.apply(this,arguments);if(this._shouldRecalculateSize||u&&(this._size[0]!==u[0]||this._size[1]!==u[1]))this.context.setSize(),this._shouldRecalculateSize=!1;return this.context.update(),a},n.exports=s}),define("famous/surfaces/FormContainerSurface.js",["require","exports","module","./ContainerSurface"],function(e,t,n){function i(e){e&&(this._method=e.method||""),r.apply(this,arguments)}var r=e("./ContainerSurface");i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.prototype.elementType="form",i.prototype.deploy=function(t){return this._method&&(t.method=this._method),r.prototype.deploy.apply(this,arguments)},n.exports=i}),define("famous/surfaces/ImageSurface.js",["require","exports","module","famous/core/Surface"],function(e,t,n){function i(e){this._imageUrl=undefined,r.apply(this,arguments)}var r=e("famous/core/Surface"),s=[],o=[],u=[],a=!0;i.enableCache=function(){a=!0},i.disableCache=function(){a=!1},i.clearCache=function(){s=[],o=[],u=[]},i.getCache=function(){return{urlCache:s,countCache:o,nodeCache:o}},i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.prototype.elementType="img",i.prototype.elementClass="famous-surface",i.prototype.setContent=function(t){var n=s.indexOf(this._imageUrl);n!==-1&&(o[n]===1?(s.splice(n,1),o.splice(n,1),u.splice(n,1)):o[n]--),n=s.indexOf(t),n===-1?(s.push(t),o.push(1)):o[n]++,this._imageUrl=t,this._contentDirty=!0},i.prototype.deploy=function(t){var n=s.indexOf(this._imageUrl);if(u[n]===undefined&&a){var r=new Image;r.src=this._imageUrl||"",u[n]=r}t.src=this._imageUrl||""},i.prototype.recall=function(t){t.src=""},n.exports=i}),define("famous/surfaces/InputSurface",["require","exports","module","famous/core/Surface"],function(e,t,n){function i(e){this._placeholder=e.placeholder||"",this._value=e.value||"",this._type=e.type||"text",this._name=e.name||"",r.apply(this,arguments),this.on("click",this.focus.bind(this)),window.addEventListener("click",function(e){e.target!==this._currTarget&&this.blur()}.bind(this))}var r=e("famous/core/Surface");i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.prototype.elementType="input",i.prototype.elementClass="famous-surface",i.prototype.setPlaceholder=function(t){return this._placeholder=t,this._contentDirty=!0,this},i.prototype.focus=function(){return this._currTarget&&this._currTarget.focus(),this},i.prototype.blur=function(){return this._currTarget&&this._currTarget.blur(),this},i.prototype.setValue=function(t){return this._value=t,this._contentDirty=!0,this},i.prototype.setType=function(t){return this._type=t,this._contentDirty=!0,this},i.prototype.getValue=function(){return this._currTarget?this._currTarget.value:this._value},i.prototype.setName=function(t){return this._name=t,this._contentDirty=!0,this},i.prototype.getName=function(){return this._name},i.prototype.deploy=function(t){this._placeholder!==""&&(t.placeholder=this._placeholder),t.value=this._value,t.type=this._type,t.name=this._name},n.exports=i}),define("famous/surfaces/SubmitInputSurface.js",["require","exports","module","./InputSurface"],function(e,t,n){function i(e){r.apply(this,arguments),this._type="submit",e&&e.onClick&&this.setOnClick(e.onClick)}var r=e("./InputSurface");i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.prototype.setOnClick=function(e){this.onClick=e},i.prototype.deploy=function(t){this.onclick&&(t.onClick=this.onClick),r.prototype.deploy.apply(this,arguments)},n.exports=i}),define("famous/surfaces/TextareaSurface.js",["require","exports","module","famous/core/Surface"],function(e,t,n){function i(e){this._placeholder=e.placeholder||"",this._value=e.value||"",this._name=e.name||"",this._wrap=e.wrap||"",this._cols=e.cols||"",this._rows=e.rows||"",r.apply(this,arguments),this.on("click",this.focus.bind(this))}var r=e("famous/core/Surface");i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.prototype.elementType="textarea",i.prototype.elementClass="famous-surface",i.prototype.setPlaceholder=function(t){return this._placeholder=t,this._contentDirty=!0,this},i.prototype.focus=function(){return this._currTarget&&this._currTarget.focus(),this},i.prototype.blur=function(){return this._currTarget&&this._currTarget.blur(),this},i.prototype.setValue=function(t){return this._value=t,this._contentDirty=!0,this},i.prototype.getValue=function(){return this._currTarget?this._currTarget.value:this._value},i.prototype.setName=function(t){return this._name=t,this._contentDirty=!0,this},i.prototype.getName=function(){return this._name},i.prototype.setWrap=function(t){return this._wrap=t,this._contentDirty=!0,this},i.prototype.setColumns=function(t){return this._cols=t,this._contentDirty=!0,this},i.prototype.setRows=function(t){return this._rows=t,this._contentDirty=!0,this},i.prototype.deploy=function(t){this._placeholder!==""&&(t.placeholder=this._placeholder),this._value!==""&&(t.value=this._value),this._name!==""&&(t.name=this._name),this._wrap!==""&&(t.wrap=this._wrap),this._cols!==""&&(t.cols=this._cols),this._rows!==""&&(t.rows=this._rows)},n.exports=i}),define("famous/surfaces/VideoSurface.js",["require","exports","module","famous/core/Surface"],function(e,t,n){function i(e){this._videoUrl=undefined,this.options=Object.create(i.DEFAULT_OPTIONS),e&&this.setOptions(e),r.apply(this,arguments)}var r=e("famous/core/Surface");i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.DEFAULT_OPTIONS={autoplay:!1},i.prototype.elementType="video",i.prototype.elementClass="famous-surface",i.prototype.setOptions=function(t){for(var n in i.DEFAULT_OPTIONS)t[n]!==undefined&&(this.options[n]=t[n])},i.prototype.setContent=function(t){this._videoUrl=t,this._contentDirty=!0},i.prototype.deploy=function(t){t.src=this._videoUrl,t.autoplay=this.options.autoplay},i.prototype.recall=function(t){t.src=""},n.exports=i}),define("famous/transitions/CachedMap",["require","exports","module"],function(e,t,n){function r(e){this._map=e||null,this._cachedOutput=null,this._cachedInput=Number.NaN}r.create=function(t){var n=new r(t);return n.get.bind(n)},r.prototype.get=function(t){return t!==this._cachedInput&&(this._cachedInput=t,this._cachedOutput=this._map(t)),this._cachedOutput},n.exports=r}),define("famous/transitions/Easing.js",["require","exports","module"],function(e,t,n){var r={inQuad:function(e){return e*e},outQuad:function(e){return-(e-=1)*e+1},inOutQuad:function(e){return(e/=.5)<1?.5*e*e:-0.5*(--e*(e-2)-1)},inCubic:function(e){return e*e*e},outCubic:function(e){return--e*e*e+1},inOutCubic:function(e){return(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},inQuart:function(e){return e*e*e*e},outQuart:function(e){return-(--e*e*e*e-1)},inOutQuart:function(e){return(e/=.5)<1?.5*e*e*e*e:-0.5*((e-=2)*e*e*e-2)},inQuint:function(e){return e*e*e*e*e},outQuint:function(e){return--e*e*e*e*e+1},inOutQuint:function(e){return(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},inSine:function(e){return-1*Math.cos(e*(Math.PI/2))+1},outSine:function(e){return Math.sin(e*(Math.PI/2))},inOutSine:function(e){return-0.5*(Math.cos(Math.PI*e)-1)},inExpo:function(e){return e===0?0:Math.pow(2,10*(e-1))},outExpo:function(e){return e===1?1:-Math.pow(2,-10*e)+1},inOutExpo:function(e){return e===0?0:e===1?1:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(-Math.pow(2,-10*--e)+2)},inCirc:function(e){return-(Math.sqrt(1-e*e)-1)},outCirc:function(e){return Math.sqrt(1- --e*e)},inOutCirc:function(e){return(e/=.5)<1?-0.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},inElastic:function(e){var t=1.70158,n=0,r=1;return e===0?0:e===1?1:(n||(n=.3),t=n/(2*Math.PI)*Math.asin(1/r),-(r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*2*Math.PI/n)))},outElastic:function(e){var t=1.70158,n=0,r=1;return e===0?0:e===1?1:(n||(n=.3),t=n/(2*Math.PI)*Math.asin(1/r),r*Math.pow(2,-10*e)*Math.sin((e-t)*2*Math.PI/n)+1)},inOutElastic:function(e){var t=1.70158,n=0,r=1;return e===0?0:(e/=.5)===2?1:(n||(n=.3*1.5),t=n/(2*Math.PI)*Math.asin(1/r),e<1?-0.5*r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*2*Math.PI/n):r*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*2*Math.PI/n)*.5+1)},inBack:function(e,t){return t===undefined&&(t=1.70158),e*e*((t+1)*e-t)},outBack:function(e,t){return t===undefined&&(t=1.70158),--e*e*((t+1)*e+t)+1},inOutBack:function(e,t){return t===undefined&&(t=1.70158),(e/=.5)<1?.5*e*e*(((t*=1.525)+1)*e-t):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},inBounce:function(e){return 1-r.outBounce(1-e)},outBounce:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},inOutBounce:function(e){return e<.5?r.inBounce(e*2)*.5:r.outBounce(e*2-1)*.5+.5}};n.exports=r}),define("famous/physics/integrators/SymplecticEuler.js",["require","exports","module","famous/core/OptionsManager"],function(e,t,n){function i(e){this.options=Object.create(i.DEFAULT_OPTIONS),this._optionsManager=new r(this.options),e&&this.setOptions(e)}var r=e("famous/core/OptionsManager");i.DEFAULT_OPTIONS={velocityCap:undefined,angularVelocityCap:undefined},i.prototype.setOptions=function(t){this._optionsManager.patch(t)},i.prototype.getOptions=function(){return this._optionsManager.value()},i.prototype.integrateVelocity=function(t,n){var r=t.velocity,i=t.inverseMass,s=t.force;if(s.isZero())return;r.add(s.mult(n*i)).put(r),s.clear()},i.prototype.integratePosition=function(t,n){var r=t.position,i=t.velocity;this.options.velocityCap&&i.cap(this.options.velocityCap).put(i),r.add(i.mult(n)).put(r)},i.prototype.integrateAngularMomentum=function(t,n){var r=t.angularMomentum,i=t.torque;if(i.isZero())return;this.options.angularVelocityCap&&i.cap(this.options.angularVelocityCap).put(i),r.add(i.mult(n)).put(r),i.clear()},i.prototype.integrateOrientation=function(t,n){var r=t.orientation,i=t.angularVelocity;if(i.isZero())return;r.add(r.multiply(i).scalarMultiply(.5*n)).put(r)},n.exports=i}),define("famous/physics/bodies/Particle.js",["require","exports","module","famous/math/Vector","famous/core/Transform","famous/core/EventHandler","../integrators/SymplecticEuler"],function(e,t,n){function u(e){e=e||{},this.position=new r,this.velocity=new r,this.force=new r;var t=u.DEFAULT_OPTIONS;this.setPosition(e.position||t.position),this.setVelocity(e.velocity||t.velocity),this.force.set(e.force||[0,0,0]),this.mass=e.mass!==undefined?e.mass:t.mass,this.axis=e.axis!==undefined?e.axis:t.axis,this.inverseMass=1/this.mass,this._isSleeping=!1,this._engine=null,this._eventOutput=null,this._positionGetter=null,this.transform=i.identity.slice(),this._spec={transform:this.transform,target:null}}function l(){this._eventOutput=new s,this._eventOutput.bindThis(this),s.setOutputHandler(this,this._eventOutput)}var r=e("famous/math/Vector"),i=e("famous/core/Transform"),s=e("famous/core/EventHandler"),o=e("../integrators/SymplecticEuler");u.DEFAULT_OPTIONS={position:[0,0,0],velocity:[0,0,0],mass:1,axis:undefined},u.SLEEP_TOLERANCE=1e-7,u.AXES={X:0,Y:1,Z:2},u.INTEGRATOR=new o;var a={start:"start",update:"update",end:"end"},f=function(){return Date.now}();u.prototype.sleep=function(){if(this._isSleeping)return;this.emit(a.end,this),this._isSleeping=!0},u.prototype.wake=function(){if(!this._isSleeping)return;this.emit(a.start,this),this._isSleeping=!1,this._prevTime=f()},u.prototype.isBody=!1,u.prototype.setPosition=function(t){this.position.set(t)},u.prototype.setPosition1D=function(t){this.position.x=t},u.prototype.getPosition=function(){return this._positionGetter instanceof Function&&this.setPosition(this._positionGetter()),this._engine.step(),this.position.get()},u.prototype.getPosition1D=function(){return this._engine.step(),this.position.x},u.prototype.positionFrom=function(t){this._positionGetter=t},u.prototype.setVelocity=function(t){this.velocity.set(t),this.wake()},u.prototype.setVelocity1D=function(t){this.velocity.x=t,this.wake()},u.prototype.getVelocity=function(){return this.velocity.get()},u.prototype.getVelocity1D=function(){return this.velocity.x},u.prototype.setMass=function(t){this.mass=t,this.inverseMass=1/t},u.prototype.getMass=function(){return this.mass},u.prototype.reset=function(t,n){this.setPosition(t||[0,0,0]),this.setVelocity(n||[0,0,0])},u.prototype.applyForce=function(t){if(t.isZero())return;this.force.add(t).put(this.force),this.wake()},u.prototype.applyImpulse=function(t){if(t.isZero())return;var n=this.velocity;n.add(t.mult(this.inverseMass)).put(n)},u.prototype.integrateVelocity=function(t){u.INTEGRATOR.integrateVelocity(this,t)},u.prototype.integratePosition=function(t){u.INTEGRATOR.integratePosition(this,t)},u.prototype._integrate=function(t){this.integrateVelocity(t),this.integratePosition(t)},u.prototype.getEnergy=function(){return.5*this.mass*this.velocity.normSquared()},u.prototype.getTransform=function(){this._engine.step();var t=this.position,n=this.axis,r=this.transform;return n!==undefined&&(n&~u.AXES.X&&(t.x=0),n&~u.AXES.Y&&(t.y=0),n&~u.AXES.Z&&(t.z=0)),r[12]=t.x,r[13]=t.y,r[14]=t.z,r},u.prototype.modify=function(t){var n=this._spec;return n.transform=this.getTransform(),n.target=t,n},u.prototype.emit=function(t,n){if(!this._eventOutput)return;this._eventOutput.emit(t,n)},u.prototype.on=function(){return l.call(this),this.on.apply(this,arguments)},u.prototype.removeListener=function(){return l.call(this),this.removeListener.apply(this,arguments)},u.prototype.pipe=function(){return l.call(this),this.pipe.apply(this,arguments)},u.prototype.unpipe=function(){return l.call(this),this.unpipe.apply(this,arguments)},n.exports=u}),define("famous/physics/constraints/Constraint.js",["require","exports","module","famous/core/EventHandler"],function(e,t,n){function i(){this.options=this.options||{},this._energy=0,this._eventOutput=null}function s(){this._eventOutput=new r,this._eventOutput.bindThis(this),r.setOutputHandler(this,this._eventOutput)}var r=e("famous/core/EventHandler");i.prototype.setOptions=function(t){for(var n in t)this.options[n]=t[n]},i.prototype.applyConstraint=function(){},i.prototype.getEnergy=function(){return this._energy},i.prototype.setEnergy=function(t){this._energy=t},i.prototype.on=function(){return s.call(this),this.on.apply(this,arguments)},i.prototype.addListener=function(){return s.call(this),this.addListener.apply(this,arguments)},i.prototype.pipe=function(){return s.call(this),this.pipe.apply(this,arguments)},i.prototype.removeListener=function(){return this.removeListener.apply(this,arguments)},i.prototype.unpipe=function(){return this.unpipe.apply(this,arguments)},n.exports=i}),define("famous/physics/constraints/Snap.js",["require","exports","module","./Constraint","famous/math/Vector"],function(e,t,n){function s(e){this.options=Object.create(this.constructor.DEFAULT_OPTIONS),e&&this.setOptions(e),this.pDiff=new i,this.vDiff=new i,this.impulse1=new i,this.impulse2=new i,r.call(this)}function u(e,t,n){return Math.abs(e.dot(t)/n)}var r=e("./Constraint"),i=e("famous/math/Vector");s.prototype=Object.create(r.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={period:300,dampingRatio:.1,length:0,anchor:undefined};var o=Math.PI;s.prototype.setOptions=function(t){t.anchor!==undefined&&(t.anchor instanceof i&&(this.options.anchor=t.anchor),t.anchor.position instanceof i&&(this.options.anchor=t.anchor.position),t.anchor instanceof Array&&(this.options.anchor=new i(t.anchor))),t.length!==undefined&&(this.options.length=t.length),t.dampingRatio!==undefined&&(this.options.dampingRatio=t.dampingRatio),t.period!==undefined&&(this.options.period=t.period)},s.prototype.setAnchor=function(t){this.options.anchor!==undefined&&(this.options.anchor=new i),this.options.anchor.set(t)},s.prototype.getEnergy=function(t,n){var r=this.options,i=r.length,s=r.anchor||n.position,u=Math.pow(2*o/r.period,2),a=s.sub(t.position).norm()-i;return.5*u*a*a},s.prototype.applyConstraint=function(t,n,r){var i=this.options,s=this.pDiff,a=this.vDiff,f=this.impulse1,l=this.impulse2,c=i.length,h=i.anchor||n.position,p=i.period,d=i.dampingRatio;for(var v=0;v<t.length;v++){var m=t[v],g=m.position,y=m.velocity,b=m.mass,w=m.inverseMass;s.set(g.sub(h));var E=s.norm()-c,S;if(n){var x=n.inverseMass,T=n.velocity;a.set(y.sub(T)),S=1/(w+x)}else a.set(y),S=b;var N,C;if(this.options.period===0)N=0,C=1;else{var k=4*S*o*o/(p*p),L=4*S*o*d/p;C=r*k/(L+r*k),N=1/(L+r*k)}var A=C/r*E;s.normalize(-A).sub(a).mult(r/(N+r/S)).put(f),m.applyImpulse(f),n&&(f.mult(-1).put(l),n.applyImpulse(l)),this.setEnergy(u(f,s,r))}},n.exports=s}),define("famous/transitions/SnapTransition.js",["require","exports","module","famous/physics/PhysicsEngine","famous/physics/bodies/Particle","famous/physics/constraints/Snap","famous/math/Vector"],function(e,t,n){function u(e){e=e||0,this.endState=new o(e),this.initState=new o,this._dimensions=1,this._restTolerance=1e-10,this._absRestTolerance=this._restTolerance,this._callback=undefined,this.PE=new r,this.particle=new i,this.spring=new s({anchor:this.endState}),this.PE.addBody(this.particle),this.PE.attach(this.spring,this.particle)}function a(){return this.particle.getEnergy()+this.spring.getEnergy(this.particle)}function f(){var e=this.endState.sub(this.initState).normSquared();this._absRestTolerance=e===0?this._restTolerance:this._restTolerance*e}function l(e){this.endState.set(e),f.call(this)}function c(){this.PE.wake()}function h(){this.PE.sleep()}function p(e){this.particle.position.set(e)}function d(e){this.particle.velocity.set(e)}function v(){return this._dimensions===0?this.particle.getPosition1D():this.particle.getPosition()}function m(){return this._dimensions===0?this.particle.getVelocity1D():this.particle.getVelocity()}function g(e){this._callback=e}function y(e){var t=u.DEFAULT_OPTIONS;e.period===undefined&&(e.period=t.period),e.dampingRatio===undefined&&(e.dampingRatio=t.dampingRatio),e.velocity===undefined&&(e.velocity=t.velocity),this.spring.setOptions({period:e.period,dampingRatio:e.dampingRatio}),d.call(this,e.velocity)}function b(){if(this.PE.isSleeping()){if(this._callback){var e=this._callback;this._callback=undefined,e()}return}a.call(this)<this._absRestTolerance&&(p.call(this,this.endState),d.call(this,[0,0,0]),h.call(this))}var r=e("famous/physics/PhysicsEngine"),i=e("famous/physics/bodies/Particle"),s=e("famous/physics/constraints/Snap"),o=e("famous/math/Vector");u.SUPPORTS_MULTIPLE=3,u.DEFAULT_OPTIONS={period:100,dampingRatio:.2,velocity:0},u.prototype.reset=function(t,n){this._dimensions=t instanceof Array?t.length:0,this.initState.set(t),p.call(this,t),l.call(this,t),n&&d.call(this,n),g.call(this,undefined)},u.prototype.getVelocity=function(){return m.call(this)},u.prototype.setVelocity=function(t){this.call(this,d(t))},u.prototype.isActive=function(){return!this.PE.isSleeping()},u.prototype.halt=function(){this.set(this.get())},u.prototype.get=function(){return b.call(this),v.call(this)},u.prototype.set=function(t,n,r){if(!n){this.reset(t),r&&r();return}this._dimensions=t instanceof Array?t.length:0,c.call(this),y.call(this,n),l.call(this,t),g.call(this,r)},n.exports=u}),define("famous/physics/forces/Force.js",["require","exports","module","famous/math/Vector","famous/core/EventHandler"],function(e,t,n){function s(e){this.force=new r(e),this._energy=0,this._eventOutput=null}function o(){this._eventOutput=new i,this._eventOutput.bindThis(this),i.setOutputHandler(this,this._eventOutput)}var r=e("famous/math/Vector"),i=e("famous/core/EventHandler");s.prototype.setOptions=function(t){for(var n in t)this.options[n]=t[n]},s.prototype.applyForce=function(t){t.applyForce(this.force)},s.prototype.getEnergy=function(){return this._energy},s.prototype.setEnergy=function(t){this._energy=t},s.prototype.on=function(){return o.call(this),this.on.apply(this,arguments)},s.prototype.addListener=function(){return o.call(this),this.addListener.apply(this,arguments)},s.prototype.pipe=function(){return o.call(this),this.pipe.apply(this,arguments)},s.prototype.removeListener=function(){return this.removeListener.apply(this,arguments)},s.prototype.unpipe=function(){return this.unpipe.apply(this,arguments)},n.exports=s}),define("famous/physics/forces/Spring.js",["require","exports","module","./Force","famous/math/Vector"],function(e,t,n){function s(e){this.options=Object.create(this.constructor.DEFAULT_OPTIONS),e&&this.setOptions(e),this.disp=new i(0,0,0),c.call(this),r.call(this)}function u(e){this.forceFunction=e}function a(){var e=this.options;e.stiffness=Math.pow(2*o/e.period,2)}function f(){var e=this.options;e.damping=4*o*e.dampingRatio/e.period}function l(e,t){return.5*e*t*t}function c(){u.call(this,this.options.forceFunction),a.call(this),f.call(this)}var r=e("./Force"),i=e("famous/math/Vector");s.prototype=Object.create(r.prototype),s.prototype.constructor=s;var o=Math.PI;s.FORCE_FUNCTIONS={FENE:function(e,t){var n=t*.99,r=Math.max(Math.min(e,n),-n);return r/(1-r*r/(t*t))},HOOK:function(e){return e}},s.DEFAULT_OPTIONS={period:300,dampingRatio:.1,length:0,maxLength:Infinity,anchor:undefined,forceFunction:s.FORCE_FUNCTIONS.HOOK},s.prototype.setOptions=function(t){t.anchor!==undefined&&(t.anchor.position instanceof i&&(this.options.anchor=t.anchor.position),t.anchor instanceof i&&(this.options.anchor=t.anchor),t.anchor instanceof Array&&(this.options.anchor=new i(t.anchor))),t.period!==undefined&&(this.options.period=t.period),t.dampingRatio!==undefined&&(this.options.dampingRatio=t.dampingRatio),t.length!==undefined&&(this.options.length=t.length),t.forceFunction!==undefined&&(this.options.forceFunction=t.forceFunction),t.maxLength!==undefined&&(this.options.maxLength=t.maxLength),c.call(this)},s.prototype.applyForce=function(t,n){var r=this.force,i=this.disp,s=this.options,o=s.stiffness,u=s.damping,a=s.length,f=s.maxLength,c=s.anchor||n.position;for(var h=0;h<t.length;h++){var p=t[h],d=p.position,v=p.velocity;c.sub(d).put(i);var m=i.norm()-a;if(m===0)return;var g=p.mass;o*=g,u*=g,i.normalize(o*this.forceFunction(m,f)).put(r),u&&(n?r.add(v.sub(n.velocity).mult(-u)).put(r):r.add(v.mult(-u)).put(r)),p.applyForce(r),n&&n.applyForce(r.mult(-1)),this.setEnergy(l(o,m))}},s.prototype.getEnergy=function(t){var n=this.options,r=n.length,i=n.anchor,s=n.stiffness,o=i.sub(t.position).norm()-r;return.5*s*o*o},s.prototype.setAnchor=function(t){this.options.anchor||(this.options.anchor=new i),this.options.anchor.set(t)},n.exports=s}),define("famous/transitions/SpringTransition.js",["require","exports","module","famous/physics/PhysicsEngine","famous/physics/bodies/Particle","famous/physics/forces/Spring","famous/math/Vector"],function(e,t,n){function u(e){e=e||0,this.endState=new o(e),this.initState=new o,this._dimensions=undefined,this._restTolerance=1e-10,this._absRestTolerance=this._restTolerance,this._callback=undefined,this.PE=new r,this.spring=new s({anchor:this.endState}),this.particle=new i,this.PE.addBody(this.particle),this.PE.attach(this.spring,this.particle)}function a(){return this.particle.getEnergy()+this.spring.getEnergy(this.particle)}function f(e){this.particle.setPosition(e)}function l(e){this.particle.setVelocity(e)}function c(){return this._dimensions===0?this.particle.getPosition1D():this.particle.getPosition()}function h(){return this._dimensions===0?this.particle.getVelocity1D():this.particle.getVelocity()}function p(e){this._callback=e}function d(){this.PE.wake()}function v(){this.PE.sleep()}function m(){if(this.PE.isSleeping()){if(this._callback){var e=this._callback;this._callback=undefined,e()}return}a.call(this)<this._absRestTolerance&&(f.call(this,this.endState),l.call(this,[0,0,0]),v.call(this))}function g(e){var t=u.DEFAULT_OPTIONS;e.period===undefined&&(e.period=t.period),e.dampingRatio===undefined&&(e.dampingRatio=t.dampingRatio),e.velocity===undefined&&(e.velocity=t.velocity),e.period<150&&(e.period=150,console.warn("The period of a SpringTransition is capped at 150 ms. Use a SnapTransition for faster transitions")),this.spring.setOptions({period:e.period,dampingRatio:e.dampingRatio}),l.call(this,e.velocity)}function y(){var e=this.endState.sub(this.initState).normSquared();this._absRestTolerance=e===0?this._restTolerance:this._restTolerance*e}function b(e){this.endState.set(e),y.call(this)}var r=e("famous/physics/PhysicsEngine"),i=e("famous/physics/bodies/Particle"),s=e("famous/physics/forces/Spring"),o=e("famous/math/Vector");u.SUPPORTS_MULTIPLE=3,u.DEFAULT_OPTIONS={period:300,dampingRatio:.5,velocity:0},u.prototype.reset=function(t,n){this._dimensions=t instanceof Array?t.length:0,this.initState.set(t),f.call(this,t),b.call(this,t),n&&l.call(this,n),p.call(this,undefined)},u.prototype.getVelocity=function(){return h.call(this)},u.prototype.setVelocity=function(t){this.call(this,l(t))},u.prototype.isActive=function(){return!this.PE.isSleeping()},u.prototype.halt=function(){this.set(this.get())},u.prototype.get=function(){return m.call(this),c.call(this)},u.prototype.set=function(t,n,r){if(!n){this.reset(t),r&&r();return}this._dimensions=t instanceof Array?t.length:0,d.call(this),g.call(this,n),b.call(this,t),p.call(this,r)},n.exports=u}),define("famous/physics/constraints/Wall.js",["require","exports","module","./Constraint","famous/math/Vector"],function(e,t,n){function s(e){this.options=Object.create(s.DEFAULT_OPTIONS),e&&this.setOptions(e),this.diff=new i,this.impulse=new i,r.call(this)}function o(e,t){return t.dot(e)}function u(e){var t=this.options.normal,n=this.options.distance;return e.dot(t)+n}function a(e,t,n){var r=e.position,i=e.velocity,o=e.mass,u=this.options.normal,a=this.options.onContact,f=this.options.restitution,l=this.impulse,c=this.options.drift,h=-this.options.slop,p=0;if(this._eventOutput){var d={particle:e,wall:this,overlap:t,normal:u};this._eventOutput.emit("preCollision",d),this._eventOutput.emit("collision",d)}switch(a){case s.ON_CONTACT.REFLECT:var v=t<h?-((1+f)*u.dot(i)+c/n*(t-h))/(o*n+p):-((1+f)*u.dot(i))/(o*n+p);l.set(u.mult(n*v)),e.applyImpulse(l),e.setPosition(r.add(u.mult(-t)))}this._eventOutput&&this._eventOutput.emit("postCollision",d)}function f(e,t,n){var r=this.options.onContact,i=e.position,o=this.options.normal;r===s.ON_CONTACT.REFLECT&&e.setPosition(i.add(o.mult(-t)))}var r=e("./Constraint"),i=e("famous/math/Vector");s.prototype=Object.create(r.prototype),s.prototype.constructor=s,s.ON_CONTACT={REFLECT:0,SILENT:1},s.DEFAULT_OPTIONS={restitution:.5,drift:.5,slop:0,normal:[1,0,0],distance:0,onContact:s.ON_CONTACT.REFLECT},s.prototype.setOptions=function(t){t.normal!==undefined&&(t.normal instanceof i&&(this.options.normal=t.normal.clone()),t.normal instanceof Array&&(this.options.normal=new i(t.normal))),t.restitution!==undefined&&(this.options.restitution=t.restitution),t.drift!==undefined&&(this.options.drift=t.drift),t.slop!==undefined&&(this.options.slop=t.slop),t.distance!==undefined&&(this.options.distance=t.distance),t.onContact!==undefined&&(this.options.onContact=t.onContact)},s.prototype.applyConstraint=function(t,n,r){var i=this.options.normal;for(var s=0;s<t.length;s++){var l=t[s],c=l.position,h=l.velocity,p=l.radius||0,d=u.call(this,c.add(i.mult(-p))),v=o.call(this,i,h);d<=0&&(v<0?a.call(this,l,d,r):f.call(this,l,d,r))}},n.exports=s}),define("famous/transitions/WallTransition.js",["require","exports","module","famous/physics/PhysicsEngine","famous/physics/bodies/Particle","famous/physics/forces/Spring","famous/physics/constraints/Wall","famous/math/Vector"],function(e,t,n){function a(e){e=e||0,this.endState=new u(e),this.initState=new u,this.spring=new s({anchor:this.endState}),this.wall=new o,this._restTolerance=1e-10,this._dimensions=1,this._absRestTolerance=this._restTolerance,this._callback=undefined,this.PE=new r,this.particle=new i,this.PE.addBody(this.particle),this.PE.attach([this.wall,this.spring],this.particle)}function f(){return this.particle.getEnergy()+this.spring.getEnergy(this.particle)}function l(){var e=this.endState.sub(this.initState).normSquared();this._absRestTolerance=e===0?this._restTolerance:this._restTolerance*e}function c(){this.PE.wake()}function h(){this.PE.sleep()}function p(e){this.endState.set(e);var t=this.endState.sub(this.initState).norm();this.wall.setOptions({distance:this.endState.norm(),normal:t===0?this.particle.velocity.normalize(-1):this.endState.sub(this.initState).normalize(-1)}),l.call(this)}function d(e){this.particle.position.set(e)}function v(e){this.particle.velocity.set(e)}function m(){return this._dimensions===0?this.particle.getPosition1D():this.particle.getPosition()}function g(){return this._dimensions===0?this.particle.getVelocity1D():this.particle.getVelocity()}function y(e){this._callback=e}function b(){if(this.PE.isSleeping()){if(this._callback){var e=this._callback;this._callback=undefined,e()}return}var t=f.call(this);t<this._absRestTolerance&&(h.call(this),d.call(this,this.endState),v.call(this,[0,0,0]))}function w(e){var t=a.DEFAULT_OPTIONS;e.period===undefined&&(e.period=t.period),e.dampingRatio===undefined&&(e.dampingRatio=t.dampingRatio),e.velocity===undefined&&(e.velocity=t.velocity),e.restitution===undefined&&(e.restitution=t.restitution),this.spring.setOptions({period:e.period,dampingRatio:e.dampingRatio}),this.wall.setOptions({restitution:e.restitution}),v.call(this,e.velocity)}var r=e("famous/physics/PhysicsEngine"),i=e("famous/physics/bodies/Particle"),s=e("famous/physics/forces/Spring"),o=e("famous/physics/constraints/Wall"),u=e("famous/math/Vector");a.SUPPORTS_MULTIPLE=3,a.DEFAULT_OPTIONS={period:300,dampingRatio:.5,velocity:0,restitution:.5},a.prototype.reset=function(t,n){this._dimensions=t instanceof Array?t.length:0,this.initState.set(t),d.call(this,t),n&&v.call(this,n),p.call(this,t),y.call(this,undefined)},a.prototype.getVelocity=function(){return g.call(this)},a.prototype.setVelocity=function(t){this.call(this,v(t))},a.prototype.isActive=function(){return!this.PE.isSleeping()},a.prototype.halt=function(){this.set(this.get())},a.prototype.get=function(){return b.call(this),m.call(this)},a.prototype.set=function(t,n,r){if(!n){this.reset(t),r&&r();return}this._dimensions=t instanceof Array?t.length:0,c.call(this),w.call(this,n),p.call(this,t),y.call(this,r)},n.exports=a}),define("famous/utilities/KeyCodes.js",["require","exports","module"],function(e,t,n){var r={0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:97,b:98,c:99,d:100,e:101,f:102,g:103,h:104,i:105,j:106,k:107,l:108,m:109,n:110,o:111,p:112,q:113,r:114,s:115,t:116,u:117,v:118,w:119,x:120,y:121,z:122,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,ENTER:13,LEFT_ARROW:37,RIGHT_ARROW:39,UP_ARROW:38,DOWN_ARROW:40,SPACE:32,SHIFT:16,TAB:9};n.exports=r}),define("famous/utilities/Timer.js",["require","exports","module","famous/core/Engine"],function(e,t,n){function o(e){return r.on(i,e),e}function u(e,t){var n=s(),u=function(){var o=s();o-n>=t&&(e.apply(this,arguments),r.removeListener(i,u))};return o(u)}function a(e,t){var n=s(),r=function(){var r=s();r-n>=t&&(e.apply(this,arguments),n=s())};return o(r)}function f(e,t){if(t===undefined)return undefined;var n=function(){t--,t<=0&&(e.apply(this,arguments),c(n))};return o(n)}function l(e,t){t=t||1;var n=t,r=function(){t--,t<=0&&(e.apply(this,arguments),t=n)};return o(r)}function c(e){r.removeListener(i,e)}function h(e,t){var n,r,i,o,a;return function(){r=this,a=arguments,i=s();var f=function(){var l=s-i;l<t?n=u(f,t-l):(n=null,o=e.apply(r,a))};return c(n),n=u(f,t),o}}var r=e("famous/core/Engine"),i="prerender",s=window.performance&&window.performance.now?function(){return window.performance.now()}:function(){return Date.now()};n.exports={setTimeout:u,setInterval:a,debounce:h,after:f,every:l,clear:c}}),define("famous/views/SequentialLayout.js",["require","exports","module","famous/core/OptionsManager","famous/core/Transform","famous/core/ViewSequence","famous/utilities/Utility"],function(e,t,n){function u(e){this._items=null,this._size=null,this._outputFunction=u.DEFAULT_OUTPUT_FUNCTION,this.options=Object.create(this.constructor.DEFAULT_OPTIONS),this.optionsManager=new r(this.options),this._itemsCache=[],this._outputCache={size:null,target:this._itemsCache},e&&this.setOptions(e)}var r=e("famous/core/OptionsManager"),i=e("famous/core/Transform"),s=e("famous/core/ViewSequence"),o=e("famous/utilities/Utility");u.DEFAULT_OPTIONS={direction:o.Direction.Y,itemSpacing:0,defaultItemSize:[50,50]},u.DEFAULT_OUTPUT_FUNCTION=function(t,n,r){var s=this.options.direction===o.Direction.X?i.translate(n,0):i.translate(0,n);return{transform:s,target:t.render()}},u.prototype.getSize=function(){return this._size||this.render(),this._size},u.prototype.sequenceFrom=function(t){return t instanceof Array&&(t=new s(t)),this._items=t,this},u.prototype.setOptions=function(t){return this.optionsManager.setOptions.apply(this.optionsManager,arguments),this},u.prototype.setOutputFunction=function(t){return this._outputFunction=t,this},u.prototype.render=function(){var t=0,n=0,r=this.options.direction===o.Direction.X?0:1,i=this.options.direction===o.Direction.X?1:0,s=this._items,u=this._itemsCache,a=0;while(s){var f=s.get();if(!f)break;var l;f&&f.getSize&&(l=f.getSize()),l||(l=this.options.defaultItemSize),l[i]!==!0&&(n=Math.max(n,l[i]));var c=this._outputFunction.call(this,f,t,a);u[a]=c,l[r]&&l[r]!==!0&&(t+=l[r]+this.options.itemSpacing),s=s.getNext(),a++}return this._itemsCache.splice(a),n||(n=undefined),this._size||(this._size=[0,0]),this._size[r]=t-this.options.itemSpacing,this._size[i]=n,this._outputCache.size=this.getSize(),this._outputCache},n.exports=u}),define("famous/views/Deck.js",["require","exports","module","famous/core/Transform","famous/core/OptionsManager","famous/transitions/Transitionable","famous/utilities/Utility","./SequentialLayout"],function(e,t,n){function a(e){u.apply(this,arguments),this.state=new s(0),this._isOpen=!1,this.setOutputFunction(function(e,t,n){var i=f.call(this),s=this.options.direction===o.Direction.X?r.translate(i*t,0,.001*(i-1)*t):r.translate(0,i*t,.001*(i-1)*t),u=e.render();if(this.options.stackRotation){var a=this.options.stackRotation*n*(1-i);u={transform:r.rotateZ(a),origin:[.5,.5],target:u}}return{transform:s,size:e.getSize(),target:u}})}function f(e){return e?this._isOpen?1:0:this.state.get()}function l(e,t,n){this.state.halt(),this.state.set(e,t,n)}var r=e("famous/core/Transform"),i=e("famous/core/OptionsManager"),s=e("famous/transitions/Transitionable"),o=e("famous/utilities/Utility"),u=e("./SequentialLayout");a.prototype=Object.create(u.prototype),a.prototype.constructor=a,a.DEFAULT_OPTIONS=i.patch(u.DEFAULT_OPTIONS,{transition:{curve:"easeOutBounce",duration:500},stackRotation:0}),a.prototype.getSize=function(){var t=u.prototype.getSize.apply(this,arguments),n=this._items?this._items.get().getSize():[0,0];n||(n=[0,0]);var r=f.call(this),i=1-r;return[n[0]*i+t[0]*r,n[1]*i+t[1]*r]},a.prototype.isOpen=function(){return this._isOpen},a.prototype.open=function(t){this._isOpen=!0,l.call(this,1,this.options.transition,t)},a.prototype.close=function(t){this._isOpen=!1,l.call(this,0,this.options.transition,t)},a.prototype.toggle=function(t){this._isOpen?this.close(t):this.open(t)},n.exports=a}),define("famous/views/RenderController.js",["require","exports","module","famous/core/Modifier","famous/core/RenderNode","famous/core/Transform","famous/transitions/Transitionable","famous/core/View"],function(e,t,n){function a(e){u.apply(this,arguments),this._showing=-1,this._outgoingRenderables=[],this._nextRenderable=null,this._renderables=[],this._nodes=[],this._modifiers=[],this._states=[],this.inTransformMap=a.DefaultMap.transform,this.inOpacityMap=a.DefaultMap.opacity,this.inOriginMap=a.DefaultMap.origin,this.outTransformMap=a.DefaultMap.transform,this.outOpacityMap=a.DefaultMap.opacity,this.outOriginMap=a.DefaultMap.origin,this._output=[]}function f(e,t){return e(t.get())}var r=e("famous/core/Modifier"),i=e("famous/core/RenderNode"),s=e("famous/core/Transform"),o=e("famous/transitions/Transitionable"),u=e("famous/core/View");a.prototype=Object.create(u.prototype),a.prototype.constructor=a,a.DEFAULT_OPTIONS={inTransition:!0,outTransition:!0,overlap:!0},a.DefaultMap={transform:function(){return s.identity},opacity:function(e){return e},origin:null},a.prototype.inTransformFrom=function(t){if(t instanceof Function)this.inTransformMap=t;else{if(!t||!t.get)throw new Error("inTransformFrom takes only function or getter object");this.inTransformMap=t.get.bind(t)}return this},a.prototype.inOpacityFrom=function(t){if(t instanceof Function)this.inOpacityMap=t;else{if(!t||!t.get)throw new Error("inOpacityFrom takes only function or getter object");this.inOpacityMap=t.get.bind(t)}return this},a.prototype.inOriginFrom=function(t){if(t instanceof Function)this.inOriginMap=t;else{if(!t||!t.get)throw new Error("inOriginFrom takes only function or getter object");this.inOriginMap=t.get.bind(t)}return this},a.prototype.outTransformFrom=function(t){if(t instanceof Function)this.outTransformMap=t;else{if(!t||!t.get)throw new Error("inTransformFrom takes only function or getter object");this.outTransformMap=t.get.bind(t)}return this},a.prototype.outOpacityFrom=function(t){if(t instanceof Function)this.outOpacityMap=t;else{if(!t||!t.get)throw new Error("inOpacityFrom takes only function or getter object");this.outOpacityMap=t.get.bind(t)}return this},a.prototype.outOriginFrom=function(t){if(t instanceof Function)this.outOriginMap=t;else{if(!t||!t.get)throw new Error("inOriginFrom takes only function or getter object");this.outOriginMap=t.get.bind(t)}return this},a.prototype.show=function(t,n,s){if(!t)return this.hide(s);n instanceof Function&&(s=n,n=null);if(this._showing>=0){if(!this.options.overlap)return this._nextRenderable?this._nextRenderable=t:(this._nextRenderable=t,this.hide(function(){this._nextRenderable===t&&this.show(this._nextRenderable,s),this._nextRenderable=null})),undefined;this.hide()}var u=null,a=this._renderables.indexOf(t);if(a>=0){this._showing=a,u=this._states[a],u.halt();var l=this._outgoingRenderables.indexOf(t);l>=0&&this._outgoingRenderables.splice(l,1)}else{u=new o(0);var c=new r({transform:this.inTransformMap?f.bind(this,this.inTransformMap,u):null,opacity:this.inOpacityMap?f.bind(this,this.inOpacityMap,u):null,origin:this.inOriginMap?f.bind(this,this.inOriginMap,u):null}),h=new i;h.add(c).add(t),this._showing=this._nodes.length,this._nodes.push(h),this._modifiers.push(c),this._states.push(u),this._renderables.push(t)}n||(n=this.options.inTransition),u.set(1,n,s)},a.prototype.hide=function(t,n){if(this._showing<0)return;var r=this._showing;this._showing=-1,t instanceof Function&&(n=t,t=undefined);var i=this._nodes[r],s=this._modifiers[r],o=this._states[r],u=this._renderables[r];s.transformFrom(this.outTransformMap?f.bind(this,this.outTransformMap,o):null),s.opacityFrom(this.outOpacityMap?f.bind(this,this.outOpacityMap,o):null),s.originFrom(this.outOriginMap?f.bind(this,this.outOriginMap,o):null),this._outgoingRenderables.indexOf(u)<0&&this._outgoingRenderables.push(u),t||(t=this.options.outTransition),o.halt(),o.set(0,t,function(e,t,r,i){if(this._outgoingRenderables.indexOf(i)>=0){var s=this._nodes.indexOf(e);this._nodes.splice(s,1),this._modifiers.splice(s,1),this._states.splice(s,1),this._renderables.splice(s,1),this._outgoingRenderables.splice(this._outgoingRenderables.indexOf(i),1),this._showing>=s&&this._showing--}n&&n.call(this)}.bind(this,i,s,o,u))},a.prototype.render=function(){var t=this._output;t.length>this._nodes.length&&t.splice(this._nodes.length);for(var n=0;n<this._nodes.length;n++)t[n]=this._nodes[n].render();return t},n.exports=a}),define("famous/views/EdgeSwapper.js",["require","exports","module","famous/transitions/CachedMap","famous/core/Entity","famous/core/EventHandler","famous/core/Transform","./RenderController"],function(e,t,n){function a(e){this._currentTarget=null,this._size=[undefined,undefined],this._controller=new u(e),this._controller.inTransformFrom(r.create(f.bind(this,1e-4))),this._controller.outTransformFrom(r.create(f.bind(this,-0.0001))),this._eventInput=new s,s.setInputHandler(this,this._eventInput),this._entityId=i.register(this),e&&this.setOptions(e)}function f(e,t){return o.translate(this._size[0]*(1-t),0,e*(1-t))}var r=e("famous/transitions/CachedMap"),i=e("famous/core/Entity"),s=e("famous/core/EventHandler"),o=e("famous/core/Transform"),u=e("./RenderController");a.prototype.show=function(t){this._currentTarget&&this._eventInput.unpipe(this._currentTarget),this._currentTarget=t,this._currentTarget&&this._currentTarget.trigger&&this._eventInput.pipe(this._currentTarget),this._controller.show.apply(this._controller,arguments)},a.prototype.setOptions=function(t){this._controller.setOptions(t)},a.prototype.render=function(){return this._entityId},a.prototype.commit=function(t){return this._size[0]=t.size[0],this._size[1]=t.size[1],{transform:t.transform,opacity:t.opacity,origin:t.origin,size:t.size,target:this._controller.render()}},n.exports=a}),define("famous/views/FlexibleLayout.js",["require","exports","module","famous/core/Entity","famous/core/Transform","famous/core/OptionsManager","famous/core/EventHandler","famous/transitions/Transitionable"],function(e,t,n){function a(e){this.options=Object.create(a.DEFAULT_OPTIONS),this.optionsManager=new s(this.options),e&&this.setOptions(e),this.id=r.register(this),this._ratios=new u(this.options.ratios),this._nodes=[],this._cachedDirection=null,this._cachedTotalLength=!1,this._cachedLengths=[],this._cachedTransforms=null,this._ratiosDirty=!1,this._eventOutput=new o,o.setOutputHandler(this,this._eventOutput)}function f(e,t,n){var r,s=0,o=t,u=0,f,l,c;this._cachedLengths=[],this._cachedTransforms=[];for(c=0;c<e.length;c++)f=e[c],l=this._nodes[c],typeof f!="number"?o-=l.getSize()[n]||0:u+=f;for(c=0;c<e.length;c++)l=this._nodes[c],f=e[c],t=typeof f=="number"?o*f/u:l.getSize()[n],r=n===a.DIRECTION_X?i.translate(s,0,0):i.translate(0,s,0),this._cachedTransforms.push(r),this._cachedLengths.push(t),s+=t}var r=e("famous/core/Entity"),i=e("famous/core/Transform"),s=e("famous/core/OptionsManager"),o=e("famous/core/EventHandler"),u=e("famous/transitions/Transitionable");a.DIRECTION_X=0,a.DIRECTION_Y=1,a.DEFAULT_OPTIONS={direction:a.DIRECTION_X,transition:!1,ratios:[]},a.prototype.render=function(){return this.id},a.prototype.setOptions=function(t){this.optionsManager.setOptions(t)},a.prototype.sequenceFrom=function(t){this._nodes=t;if(this._ratios.get().length===0){var n=[];for(var r=0;r<this._nodes.length;r++)n.push(1);this.setRatios(n)}},a.prototype.setRatios=function(t,n,r){n===undefined&&(n=this.options.transition);var i=this._ratios;i.get().length===0&&(n=undefined),i.isActive()&&i.halt(),i.set(t,n,r),this._ratiosDirty=!0},a.prototype.commit=function(t){var n=t.size,r=t.transform,s=t.origin,o=t.opacity,u=this._ratios.get(),a=this.options.direction,l=n[a],c;if(l!==this._cachedTotalLength||this._ratiosDirty||this._ratios.isActive()||a!==this._cachedDirection)f.call(this,u,l,a),l!==this._cachedTotalLength&&(this._cachedTotalLength=l),a!==this._cachedDirection&&(this._cachedDirection=a),this._ratiosDirty&&(this._ratiosDirty=!1);var h=[];for(var p=0;p<u.length;p++)c=[undefined,undefined],l=this._cachedLengths[p],c[a]=l,h.push({transform:this._cachedTransforms[p],size:c,target:this._nodes[p].render()});return n&&s[0]!==0&&s[1]!==0&&(r=i.moveThen([-n[0]*s[0],-n[1]*s[1],0],r)),{transform:r,size:n,opacity:o,target:h}},n.exports=a}),define("famous/views/Flipper.js",["require","exports","module","famous/core/Transform","famous/transitions/Transitionable","famous/core/RenderNode","famous/core/OptionsManager"],function(e,t,n){function u(e){this.options=Object.create(u.DEFAULT_OPTIONS),this._optionsManager=new o(this.options),e&&this.setOptions(e),this.angle=new i(0),this.frontNode=undefined,this.backNode=undefined,this.flipped=!1}var r=e("famous/core/Transform"),i=e("famous/transitions/Transitionable"),s=e("famous/core/RenderNode"),o=e("famous/core/OptionsManager");u.DIRECTION_X=0,u.DIRECTION_Y=1;var a=1;u.DEFAULT_OPTIONS={transition:!0,direction:u.DIRECTION_X},u.prototype.flip=function(t,n){var r=this.flipped?0:Math.PI;this.setAngle(r,t,n),this.flipped=!this.flipped},u.prototype.setAngle=function(t,n,r){n===undefined&&(n=this.options.transition),this.angle.isActive()&&this.angle.halt(),this.angle.set(t,n,r)},u.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},u.prototype.setFront=function(t){this.frontNode=t},u.prototype.setBack=function(t){this.backNode=t},u.prototype.render=function(){var t=this.angle.get(),n,i;this.options.direction===u.DIRECTION_X?(n=r.rotateY(t),i=r.rotateY(t+Math.PI)):(n=r.rotateX(t),i=r.rotateX(t+Math.PI));var s=[];return this.frontNode&&s.push({transform:n,target:this.frontNode.render()}),this.backNode&&s.push({transform:r.moveThen([0,0,a],i),target:this.backNode.render()}),s},n.exports=u}),define("famous/views/GridLayout",["require","exports","module","famous/core/Entity","famous/core/RenderNode","famous/core/Transform","famous/core/ViewSequence","famous/core/EventHandler","famous/core/Modifier","famous/core/OptionsManager","famous/transitions/Transitionable","famous/transitions/TransitionableTransform"],function(e,t,n){function h(e){this.options=Object.create(h.DEFAULT_OPTIONS),this.optionsManager=new f(this.options),e&&this.setOptions(e),this.id=r.register(this),this._modifiers=[],this._states=[],this._contextSizeCache=[0,0],this._dimensionsCache=[0,0],this._activeCount=0,this._eventOutput=new u,u.setOutputHandler(this,this._eventOutput)}function p(e,t,n){var r=[e[0],e[1]];r[0]-=this.options.gutterSize[0]*(t-1),r[1]-=this.options.gutterSize[1]*(n-1);var i=Math.round(r[1]/n),s=Math.round(r[0]/t),o=0,u,a=0;for(var f=0;f<n;f++){u=0;for(var l=0;l<t;l++)this._modifiers[a]===undefined?d.call(this,a,[s,i],[u,o,0],1):v.call(this,a,[s,i],[u,o,0],1),a++,u+=s+this.options.gutterSize[0];o+=i+this.options.gutterSize[1]}this._dimensionsCache=[this.options.dimensions[0],this.options.dimensions[1]],this._contextSizeCache=[e[0],e[1]],this._activeCount=n*t;for(f=this._activeCount;f<this._modifiers.length;f++)v.call(this,f,[Math.round(s),Math.round(i)],[0,0],0);this._eventOutput.emit("reflow")}function d(e,t,n,r){var i={transform:new c(s.translate.apply(null,n)),opacity:new l(r),size:new l(t)},o=new a({transform:i.transform,opacity:i.opacity,size:i.size});this._states[e]=i,this._modifiers[e]=o}function v(e,t,n,r){var i=this._states[e],s=i.size,o=i.opacity,u=i.transform,a=this.options.transition;u.halt(),o.halt(),s.halt(),u.setTranslate(n,a),s.set(t,a),o.set(r,a)}var r=e("famous/core/Entity"),i=e("famous/core/RenderNode"),s=e("famous/core/Transform"),o=e("famous/core/ViewSequence"),u=e("famous/core/EventHandler"),a=e("famous/core/Modifier"),f=e("famous/core/OptionsManager"),l=e("famous/transitions/Transitionable"),c=e("famous/transitions/TransitionableTransform");h.DEFAULT_OPTIONS={dimensions:[1,1],transition:!1,gutterSize:[0,0]},h.prototype.render=function(){return this.id},h.prototype.setOptions=function(t){return this.optionsManager.setOptions(t)},h.prototype.sequenceFrom=function(t){t instanceof Array&&(t=new o(t)),this.sequence=t},h.prototype.commit=function(t){var n=t.transform,r=t.opacity,i=t.origin,o=t.size,u=this.options.dimensions[0],a=this.options.dimensions[1];(o[0]!==this._contextSizeCache[0]||o[1]!==this._contextSizeCache[1]||u!==this._dimensionsCache[0]||a!==this._dimensionsCache[1])&&p.call(this,o,u,a);var f=this.sequence,l=[],c=0;while(f&&c<this._modifiers.length){var h=f.get(),d=this._modifiers[c];c>=this._activeCount&&this._states[c].opacity.isActive()&&(this._modifiers.splice(c,1),this._states.splice(c,1)),h&&l.push(d.modify({origin:i,target:h.render()})),f=f.getNext(),c++}return o&&(n=s.moveThen([-o[0]*i[0],-o[1]*i[1],0],n)),{transform:n,opacity:r,size:o,target:l}},n.exports=h}),define("famous/views/HeaderFooterLayout.js",["require","exports","module","famous/core/Entity","famous/core/RenderNode","famous/core/Transform","famous/core/OptionsManager"],function(e,t,n){function u(e){this.options=Object.create(u.DEFAULT_OPTIONS),this._optionsManager=new o(this.options),e&&this.setOptions(e),this._entityId=r.register(this),this.header=new i,this.footer=new i,this.content=new i}function a(e,t){var n=e.getSize();return n?n[this.options.direction]:t}function f(e){return this.options.direction===u.DIRECTION_X?s.translate(e,0,0):s.translate(0,e,0)}function l(e,t){return this.options.direction===u.DIRECTION_X?[e,t[1]]:[t[0],e]}var r=e("famous/core/Entity"),i=e("famous/core/RenderNode"),s=e("famous/core/Transform"),o=e("famous/core/OptionsManager");u.DIRECTION_X=0,u.DIRECTION_Y=1,u.DEFAULT_OPTIONS={direction:u.DIRECTION_Y,headerSize:undefined,footerSize:undefined,defaultHeaderSize:0,defaultFooterSize:0},u.prototype.render=function(){return this._entityId},u.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},u.prototype.commit=function(t){var n=t.transform,r=t.origin,i=t.size,o=t.opacity,u=this.options.headerSize!==undefined?this.options.headerSize:a.call(this,this.header,this.options.defaultHeaderSize),c=this.options.footerSize!==undefined?this.options.footerSize:a.call(this,this.footer,this.options.defaultFooterSize),h=i[this.options.direction]-u-c;i&&(n=s.moveThen([-i[0]*r[0],-i[1]*r[1],0],n));var p=[{size:l.call(this,u,i),target:this.header.render()},{transform:f.call(this,u),size:l.call(this,h,i),target:this.content.render()},{transform:f.call(this,u+h),size:l.call(this,c,i),target:this.footer.render()}];return{transform:n,opacity:o,size:i,target:p}},n.exports=u}),define("famous/views/Lightbox.js",["require","exports","module","famous/core/Transform","famous/core/Modifier","famous/core/RenderNode","famous/utilities/Utility","famous/core/OptionsManager","famous/transitions/Transitionable","famous/transitions/TransitionableTransform"],function(e,t,n){function l(e){this.options=Object.create(l.DEFAULT_OPTIONS),this._optionsManager=new u(this.options),e&&this.setOptions(e),this._showing=!1,this.nodes=[],this.transforms=[],this.states=[]}var r=e("famous/core/Transform"),i=e("famous/core/Modifier"),s=e("famous/core/RenderNode"),o=e("famous/utilities/Utility"),u=e("famous/core/OptionsManager"),a=e("famous/transitions/Transitionable"),f=e("famous/transitions/TransitionableTransform");l.DEFAULT_OPTIONS={inTransform:r.scale(.001,.001,.001),inOpacity:0,inOrigin:[.5,.5],outTransform:r.scale(.001,.001,.001),outOpacity:0,outOrigin:[.5,.5],showTransform:r.identity,showOpacity:1,showOrigin:[.5,.5],inTransition:!0,outTransition:!0,overlap:!1},l.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},l.prototype.show=function(t,n,r){if(!t)return this.hide(r);n instanceof Function&&(r=n,n=undefined);if(this._showing){if(!this.options.overlap)return this.hide(this.show.bind(this,t,n,r));this.hide()}this._showing=!0;var u={transform:new f(this.options.inTransform),origin:new a(this.options.inOrigin),opacity:new a(this.options.inOpacity)},l=new i({transform:u.transform,opacity:u.opacity,origin:u.origin}),c=new s;c.add(l).add(t),this.nodes.push(c),this.states.push(u),this.transforms.push(l);var h=r?o.after(3,r):undefined;n||(n=this.options.inTransition),u.transform.set(this.options.showTransform,n,h),u.opacity.set(this.options.showOpacity,n,h),u.origin.set(this.options.showOrigin,n,h)},l.prototype.hide=function(t,n){if(!this._showing)return;this._showing=!1,t instanceof Function&&(n=t,t=undefined);var r=this.nodes[this.nodes.length-1],i=this.transforms[this.transforms.length-1],s=this.states[this.states.length-1],u=o.after(3,function(){this.nodes.splice(this.nodes.indexOf(r),1),this.states.splice(this.states.indexOf(s),1),this.transforms.splice(this.transforms.indexOf(i),1),n&&n.call(this)}.bind(this));t||(t=this.options.outTransition),s.transform.set(this.options.outTransform,t,u),s.opacity.set(this.options.outOpacity,t,u),s.origin.set(this.options.outOrigin,t,u)},l.prototype.render=function(){var t=[];for(var n=0;n<this.nodes.length;n++)t.push(this.nodes[n].render());return t},n.exports=l}),define("famous/physics/forces/Drag.js",["require","exports","module","./Force"],function(e,t,n){function i(e){this.options=Object.create(this.constructor.DEFAULT_OPTIONS),e&&this.setOptions(e),r.call(this)}var r=e("./Force");i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.FORCE_FUNCTIONS={LINEAR:function(e){return e},QUADRATIC:function(e){return e.mult(e.norm())}},i.DEFAULT_OPTIONS={strength:.01,forceFunction:i.FORCE_FUNCTIONS.LINEAR},i.prototype.applyForce=function(t){var n=this.options.strength,r=this.options.forceFunction,i=this.force;for(var s=0;s<t.length;s++){var o=t[s];r(o.velocity).mult(-n).put(i),o.applyForce(i)}},i.prototype.setOptions=function(t){for(var n in t)this.options[n]=t[n]},n.exports=i}),define("famous/views/Scroller.js",["require","exports","module","famous/core/Entity","famous/core/Group","famous/core/OptionsManager","famous/core/Transform","famous/utilities/Utility","famous/core/ViewSequence","famous/core/EventHandler"],function(e,t,n){function l(e){this.options=Object.create(this.constructor.DEFAULT_OPTIONS),this._optionsManager=new s(this.options),e&&this._optionsManager.setOptions(e),this._node=null,this._position=0,this._positionOffset=0,this._positionGetter=null,this._outputFunction=null,this._masterOutputFunction=null,this.outputFrom(),this._onEdge=0,this.group=new i,this.group.add({render:v.bind(this)}),this._entityId=r.register(this),this._size=[undefined,undefined],this._contextSize=[undefined,undefined],this._eventInput=new f,this._eventOutput=new f,f.setInputHandler(this,this._eventInput),f.setOutputHandler(this,this._eventOutput)}function c(e){e||(e=this._contextSize);var t=this.options.direction===u.Direction.X?0:1;return e[t]===undefined?this._contextSize[t]:e[t]}function h(e,t,n){var r=e.getSize?e.getSize():this._contextSize,i=this._outputFunction(t);return n.push({transform:i,target:e.render()}),c.call(this,r)}function p(){return this.options.clipSize?this.options.clipSize:c.call(this,this._contextSize)}function d(){var e=c.call(this,this._node.getSize()),t=this._node&&this._node.getNext?this._node.getNext():null;while(t&&this._position+this._positionOffset>=e)this._positionOffset-=e,this._node=t,e=c.call(this,this._node.getSize()),t=this._node&&this._node.getNext?this._node.getNext():null;var n=this._node&&this._node.getPrevious?this._node.getPrevious():null;while(n&&this._position+this._positionOffset<0){var r=c.call(this,n.getSize());this._positionOffset+=r,this._node=n,n=this._node&&this._node.getPrevious?this._node.getPrevious():null}}function v(){var e=null,t=this._position,n=[];this._onEdge=0;var r=-this._positionOffset,i=p.call(this),s=this._node;while(s&&r-t<i+this.options.margin)r+=h.call(this,s,r,n),s=s.getNext?s.getNext():null;var o=this._node,u=c.call(this,o.getSize());if(r<i){while(o&&u<i)o=o.getPrevious(),o&&(u+=c.call(this,o.getSize()));o=this._node;while(o&&u<i)o=o.getNext(),o&&(u+=c.call(this,o.getSize()))}var a=u!==undefined&&u<i?u:i;!s&&r-t<=a?(this._onEdge=1,this._eventOutput.emit("edgeHit",{position:r-a})):!this._node.getPrevious()&&t<=0&&(this._onEdge=-1,this._eventOutput.emit("edgeHit",{position:0})),s=this._node&&this._node.getPrevious?this._node.getPrevious():null,r=-this._positionOffset,s&&(e=s.getSize?s.getSize():this._contextSize,r-=c.call(this,e));while(s&&r-t>-(p.call(this)+this.options.margin))h.call(this,s,r,n),s=s.getPrevious?s.getPrevious():null,s&&(e=s.getSize?s.getSize():this._contextSize,r-=c.call(this,e));return d.call(this),n}var r=e("famous/core/Entity"),i=e("famous/core/Group"),s=e("famous/core/OptionsManager"),o=e("famous/core/Transform"),u=e("famous/utilities/Utility"),a=e("famous/core/ViewSequence"),f=e("famous/core/EventHandler");l.DEFAULT_OPTIONS={direction:u.Direction.Y,margin:0,clipSize:undefined,groupScroll:!1},l.prototype.setOptions=function(t){this._optionsManager.setOptions(t),this.options.groupScroll?this.group.pipe(this._eventOutput):this.group.unpipe(this._eventOutput)},l.prototype.onEdge=function(){return this._onEdge},l.prototype.outputFrom=function(t,n){t||(t=function(e){return this.options.direction===u.Direction.X?o.translate(e,0):o.translate(0,e)}.bind(this),n||(n=t)),this._outputFunction=t,this._masterOutputFunction=n?n:function(e){return o.inverse(t(-e))}},l.prototype.positionFrom=function(t){t instanceof Function?this._positionGetter=t:t&&t.get?this._positionGetter=t.get.bind(t):(this._positionGetter=null,this._position=t),this._positionGetter&&(this._position=this._positionGetter.call(this))},l.prototype.sequenceFrom=function(t){t instanceof Array&&(t=new a({array:t})),this._node=t,this._positionOffset=0},l.prototype.getSize=function(t){return t?this._contextSize:this._size},l.prototype.render=function(){return this._node?(this._positionGetter&&(this._position=this._positionGetter.call(this)),this._entityId):null},l.prototype.commit=function(t){var n=t.transform,r=t.opacity,i=t.origin,s=t.size;!this.options.clipSize&&(s[0]!==this._contextSize[0]||s[1]!==this._contextSize[1])&&(this._onEdge=0,this._contextSize[0]=s[0],this._contextSize[1]=s[1],this.options.direction===u.Direction.X?(this._size[0]=p.call(this),this._size[1]=undefined):(this._size[0]=undefined,this._size[1]=p.call(this)));var a=this._masterOutputFunction(-this._position);return{transform:o.multiply(n,a),size:s,opacity:r,origin:i,target:this.group.render()}},n.exports=l}),define("famous/views/Scrollview.js",["require","exports","module","famous/physics/PhysicsEngine","famous/physics/bodies/Particle","famous/physics/forces/Drag","famous/physics/forces/Spring","famous/core/EventHandler","famous/core/OptionsManager","famous/core/ViewSequence","famous/views/Scroller","famous/utilities/Utility","famous/inputs/GenericSync","famous/inputs/ScrollSync","famous/inputs/TouchSync"],function(e,t,n){function g(e){this.options=Object.create(g.DEFAULT_OPTIONS),this._optionsManager=new a(this.options),this._node=null,this._physicsEngine=new r,this._particle=new i,this._physicsEngine.addBody(this._particle),this.spring=new o({anchor:[0,0,0]}),this.drag=new s({forceFunction:s.FORCE_FUNCTIONS.QUADRATIC}),this.friction=new s({forceFunction:s.FORCE_FUNCTIONS.LINEAR}),this.sync=new h(["scroll","touch"],{direction:this.options.direction}),this._eventInput=new u,this._eventOutput=new u,this._eventInput.pipe(this.sync),this.sync.pipe(this._eventInput),u.setInputHandler(this,this._eventInput),u.setOutputHandler(this,this._eventOutput),this._touchCount=0,this._springState=m.NONE,this._onEdge=0,this._pageSpringPosition=0,this._edgeSpringPosition=0,this._touchVelocity=undefined,this._earlyEnd=!1,this._needsPaginationCheck=!1,this._scroller=new l,this._scroller.positionFrom(this.getPosition.bind(this)),this.setOptions(e),E.call(this)}function y(e){this._touchCount=e.count,e.count===undefined&&(this._touchCount=1),x.call(this),this.setVelocity(0),this._touchVelocity=0,this._earlyEnd=!1}function b(e){var t=-e.velocity,n=-e.delta;this._onEdge&&e.slip&&(t<0&&this._onEdge<0||t>0&&this._onEdge>0?this._earlyEnd||(w.call(this,e),this._earlyEnd=!0):this._earlyEnd&&Math.abs(t)>Math.abs(this.getVelocity())&&y.call(this,e));if(this._earlyEnd)return;this._touchVelocity=t,e.slip?this.setVelocity(t):this.setPosition(this.getPosition()+n)}function w(e){this._touchCount=e.count||0;if(!this._touchCount){x.call(this),this._onEdge&&k.call(this,this._edgeSpringPosition,m.EDGE),S.call(this);var t=-e.velocity,n=this.options.speedLimit;e.slip&&(n*=this.options.edgeGrip),t<-n?t=-n:t>n&&(t=n),this.setVelocity(t),this._touchVelocity=undefined,this._needsPaginationCheck=!0}}function E(){this._eventInput.bindThis(this),this._eventInput.on("start",y),this._eventInput.on("update",b),this._eventInput.on("end",w),this._scroller.on("edgeHit",function(e){this._edgeSpringPosition=e.position}.bind(this))}function S(){this._springState?this._physicsEngine.attach([this.spring],this._particle):this._physicsEngine.attach([this.drag,this.friction],this._particle)}function x(){this._springState=m.NONE,this._physicsEngine.detachAll()}function T(e){var t=this.options.direction,n=(e.getSize()||this._scroller.getSize())[t];return n||(n=this._scroller.getSize()[t]),n}function N(e){!this._onEdge&&e?(this.sync.setOptions({scale:this.options.edgeGrip}),!this._touchCount&&this._springState!==m.EDGE&&k.call(this,this._edgeSpringPosition,m.EDGE)):this._onEdge&&!e&&(this.sync.setOptions({scale:1}),this._springState&&Math.abs(this.getVelocity())<.001&&(x.call(this),S.call(this))),this._onEdge=e}function C(){if(!this._needsPaginationCheck)return;if(this._touchCount)return;if(this._springState===m.EDGE)return;var e=this.getVelocity();if(Math.abs(e)>=this.options.pageStopSpeed)return;var t=this.getPosition(),n=Math.abs(e)>this.options.pageSwitchSpeed,r=T.call(this,this._node),i=t>.5*r,s=e>0;i&&!n||n&&s?this.goToNextPage():k.call(this,0,m.PAGE),this._needsPaginationCheck=!1}function k(e,t){var n;t===m.EDGE?(this._edgeSpringPosition=e,n={anchor:[this._edgeSpringPosition,0,0],period:this.options.edgePeriod,dampingRatio:this.options.edgeDamp}):t===m.PAGE&&(this._pageSpringPosition=e,n={anchor:[this._pageSpringPosition,0,0],period:this.options.pagePeriod,dampingRatio:this.options.pageDamp}),this.spring.setOptions(n),t&&!this._springState&&(x.call(this),this._springState=t,S.call(this)),this._springState=t}function L(){var e=this.getPosition(),t=T.call(this,this._node),n=this._node.getNext();while(e>t+v&&n)A.call(this,-t),e-=t,this._scroller.sequenceFrom(n),this._node=n,n=this._node.getNext(),t=T.call(this,this._node);var r=this._node.getPrevious(),i;while(e<-v&&r)i=T.call(this,r),this._scroller.sequenceFrom(r),this._node=r,A.call(this,i),e+=i,r=this._node.getPrevious()}function A(e){this._edgeSpringPosition+=e,this._pageSpringPosition+=e,this.setPosition(this.getPosition()+e),this._springState===m.EDGE?this.spring.setOptions({anchor:[this._edgeSpringPosition,0,0]}):this._springState===m.PAGE&&this.spring.setOptions({anchor:[this._pageSpringPosition,0,0]})}var r=e("famous/physics/PhysicsEngine"),i=e("famous/physics/bodies/Particle"),s=e("famous/physics/forces/Drag"),o=e("famous/physics/forces/Spring"),u=e("famous/core/EventHandler"),a=e("famous/core/OptionsManager"),f=e("famous/core/ViewSequence"),l=e("famous/views/Scroller"),c=e("famous/utilities/Utility"),h=e("famous/inputs/GenericSync"),p=e("famous/inputs/ScrollSync"),d=e("famous/inputs/TouchSync");h.register({scroll:p,touch:d});var v=.5,m={NONE:0,EDGE:1,PAGE:2};g.DEFAULT_OPTIONS={direction:c.Direction.Y,rails:!0,friction:.001,drag:1e-4,edgeGrip:.5,edgePeriod:300,edgeDamp:1,margin:1e3,paginated:!1,pagePeriod:500,pageDamp:.8,pageStopSpeed:10,pageSwitchSpeed:.5,speedLimit:10,groupScroll:!1},g.prototype.outputFrom=function(){return this._scroller.outputFrom.apply(this._scroller,arguments)},g.prototype.getPosition=function(){return this._particle.getPosition1D()},g.prototype.setPosition=function(t){this._particle.setPosition1D(t)},g.prototype.getVelocity=function(){return this._touchCount?this._touchVelocity:this._particle.getVelocity1D()},g.prototype.setVelocity=function(t){this._particle.setVelocity1D(t)},g.prototype.setOptions=function(t){t&&(t.direction!==undefined&&(t.direction==="x"?t.direction=c.Direction.X:t.direction==="y"&&(t.direction=c.Direction.Y)),this._scroller.setOptions(t),this._optionsManager.setOptions(t)),this._scroller.setOptions(this.options),this.options.groupScroll?this._scroller.pipe(this._eventInput):this._scroller.unpipe(this._eventInput),this.drag.setOptions({strength:this.options.drag}),this.friction.setOptions({strength:this.options.friction}),this.spring.setOptions({period:this.options.edgePeriod,dampingRatio:this.options.edgeDamp}),this.sync.setOptions({rails:this.options.rails,direction:this.options.direction===c.Direction.X?h.DIRECTION_X:h.DIRECTION_Y})},g.prototype.goToPreviousPage=function(){if(!this._node)return null;var t=this._node.getPrevious();if(t){var n=this.getPosition(),r=T.call(this,t);this._scroller.sequenceFrom(t),this._node=t;var i=n<v?-r:0;k.call(this,i,m.PAGE),A.call(this,r)}return this._eventOutput.emit("pageChange",{direction:-1}),t},g.prototype.goToNextPage=function(){if(!this._node)return null;var t=this._node.getNext();if(t){var n=this.getPosition(),r=T.call(this,this._node),i=T.call(this,t);this._scroller.sequenceFrom(t),this._node=t;var s=n>r-v?r+i:r;k.call(this,s,m.PAGE),A.call(this,-r)}return this._eventOutput.emit("pageChange",{direction:1}),t},g.prototype.sequenceFrom=function(t){return t instanceof Array&&(t=new f({array:t})),this._node=t,this._scroller.sequenceFrom(t)},g.prototype.getSize=function(){return this._scroller.getSize.apply(this._scroller,arguments)},g.prototype.render=function(){return this._node?(L.call(this),N.call(this,this._scroller.onEdge()),this.options.paginated&&C.call(this),this._scroller.render()):null},n.exports=g}),define("famous/views/ScrollContainer.js",["require","exports","module","famous/surfaces/ContainerSurface","famous/core/EventHandler","./Scrollview","famous/utilities/Utility","famous/core/OptionsManager"],function(e,t,n){function a(e){this.options=Object.create(a.DEFAULT_OPTIONS),this._optionsManager=new u(this.options),e&&this.setOptions(e),this.container=new r(this.options.container),this.scrollview=new s(this.options.scrollview),this.container.add(this.scrollview),i.setInputHandler(this,this.scrollview),i.setOutputHandler(this,this.scrollview),this.scrollview.subscribe(this.container)}var r=e("famous/surfaces/ContainerSurface"),i=e("famous/core/EventHandler"),s=e("./Scrollview"),o=e("famous/utilities/Utility"),u=e("famous/core/OptionsManager");a.DEFAULT_OPTIONS={container:{properties:{overflow:"hidden"}},scrollview:{direction:o.Direction.X}},a.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},a.prototype.sequenceFrom=function(){return this.scrollview.sequenceFrom.apply(this.scrollview,arguments)},a.prototype.getSize=function(){return this.container.getSize.apply(this.container,arguments)},a.prototype.render=function(){return this.container.render.apply(this.container,arguments)},n.exports=a}),define("famous/widgets/NavigationBar.js",["require","exports","module","famous/core/Scene","famous/core/Surface","famous/core/Transform","famous/core/View"],function(e,t,n){function u(e){o.apply(this,arguments),this.title=new i({classes:this.options.classes,content:this.options.content}),this.back=new i({size:[this.options.size[1],this.options.size[1]],classes:this.options.classes,content:this.options.backContent}),this.back.on("click",function(){this._eventOutput.emit("back",{})}.bind(this)),this.more=new i({size:[this.options.size[1],this.options.size[1]],classes:this.options.classes,content:this.options.moreContent}),this.more.on("click",function(){this._eventOutput.emit("more",{})}.bind(this)),this.layout=new r({id:"master",size:this.options.size,target:[{transform:s.inFront,origin:[0,.5],target:this.back},{origin:[.5,.5],target:this.title},{transform:s.inFront,origin:[1,.5],target:this.more}]}),this._add(this.layout),this._optionsManager.on("change",function(e){var t=e.id,n=e.value;t==="size"?(this.layout.id.master.setSize(n),this.title.setSize(n),this.back.setSize([n[1],n[1]]),this.more.setSize([n[1],n[1]])):t==="backClasses"?this.back.setOptions({classes:this.options.classes.concat(this.options.backClasses)}):t==="backContent"?this.back.setContent(this.options.backContent):t==="classes"?(this.title.setOptions({classes:this.options.classes}),this.back.setOptions({classes:this.options.classes.concat(this.options.backClasses)}),this.more.setOptions({classes:this.options.classes.concat(this.options.moreClasses)})):t==="content"?this.setContent(this.options.content):t==="moreClasses"?this.more.setOptions({classes:this.options.classes.concat(this.options.moreClasses)}):t==="moreContent"&&this.more.setContent(this.options.content)}.bind(this))}var r=e("famous/core/Scene"),i=e("famous/core/Surface"),s=e("famous/core/Transform"),o=e("famous/core/View");u.prototype=Object.create(o.prototype),u.prototype.constructor=u,u.DEFAULT_OPTIONS={size:[undefined,50],backClasses:["back"],backContent:"&#x25c0;",classes:["navigation"],content:"",moreClasses:["more"],moreContent:"&#x271a;"},u.prototype.setContent=function(t){return this.title.setContent(t)},n.exports=u}),define("famous/widgets/Slider.js",["require","exports","module","famous/core/Surface","famous/surfaces/CanvasSurface","famous/core/Transform","famous/core/EventHandler","famous/math/Utilities","famous/core/OptionsManager","famous/inputs/MouseSync","famous/inputs/TouchSync","famous/inputs/GenericSync"],function(e,t,n){function h(e){this.options=Object.create(h.DEFAULT_OPTIONS),this.optionsManager=new a(this.options),e&&this.setOptions(e),this.indicator=new i({size:this.options.indicatorSize,classes:["slider-back"]}),this.label=new r({size:this.options.labelSize,content:this.options.label,properties:{pointerEvents:"none"},classes:["slider-label"]}),this.eventOutput=new o,this.eventInput=new o,o.setInputHandler(this,this.eventInput),o.setOutputHandler(this,this.eventOutput);var t=(this.options.range[1]-this.options.range[0])/this.options.indicatorSize[0];this.sync=new c(["mouse","touch"],{scale:t,direction:c.DIRECTION_X}),this.indicator.pipe(this.sync),this.sync.pipe(this),this.eventInput.on("update",function(e){this.set(e.position)}.bind(this)),this._drawPos=0,p.call(this)}function p(){this.label.setContent(this.options.label+'<span style="float: right">'+this.get().toFixed(this.options.precision)+"</span>")}var r=e("famous/core/Surface"),i=e("famous/surfaces/CanvasSurface"),s=e("famous/core/Transform"),o=e("famous/core/EventHandler"),u=e("famous/math/Utilities"),a=e("famous/core/OptionsManager"),f=e("famous/inputs/MouseSync"),l=e("famous/inputs/TouchSync"),c=e("famous/inputs/GenericSync");c.register({mouse:f,touch:l}),h.DEFAULT_OPTIONS={size:[200,60],indicatorSize:[200,30],labelSize:[200,30],range:[0,1],precision:2,value:0,label:"",fillColor:"rgba(170, 170, 170, 1)"},h.prototype.setOptions=function(t){return this.optionsManager.setOptions(t)},h.prototype.get=function(){return this.options.value},h.prototype.set=function(t){if(t===this.options.value)return;this.options.value=u.clamp(t,this.options.range),p.call(this),this.eventOutput.emit("change",{value:t})},h.prototype.getSize=function(){return this.options.size},h.prototype.render=function(){var t=this.options.range,n=Math.floor((this.get()-t[0])/(t[1]-t[0])*this.options.indicatorSize[0]);if(n<this._drawPos)this.indicator.getContext("2d").clearRect(n,0,this._drawPos-n+1,this.options.indicatorSize[1]);else if(n>this._drawPos){var r=this.indicator.getContext("2d");r.fillStyle=this.options.fillColor,r.fillRect(this._drawPos-1,0,n-this._drawPos+1,this.options.indicatorSize[1])}return this._drawPos=n,{size:this.options.size,target:[{origin:[0,0],target:this.indicator.render()},{transform:s.translate(0,0,1),origin:[0,0],target:this.label.render()}]}},n.exports=h}),define("famous/widgets/ToggleButton.js",["require","exports","module","famous/core/Surface","famous/core/EventHandler","famous/views/RenderController"],function(e,t,n){function o(e){this.options={content:"",offClasses:["off"],onClasses:["on"],size:undefined,outTransition:{curve:"easeInOut",duration:300},inTransition:{curve:"easeInOut",duration:300},toggleMode:o.TOGGLE,crossfade:!0},this._eventOutput=new i,i.setOutputHandler(this,this._eventOutput),this.offSurface=new r,this.offSurface.on("click",function(){this.options.toggleMode!==o.OFF&&this.select()}.bind(this)),this.offSurface.pipe(this._eventOutput),this.onSurface=new r,this.onSurface.on("click",function(){this.options.toggleMode!==o.ON&&this.deselect()}.bind(this)),this.onSurface.pipe(this._eventOutput),this.arbiter=new s({overlap:this.options.crossfade}),this.deselect(),e&&this.setOptions(e)}var r=e("famous/core/Surface"),i=e("famous/core/EventHandler"),s=e("famous/views/RenderController");o.OFF=0,o.ON=1,o.TOGGLE=2,o.prototype.select=function(){this.selected=!0,this.arbiter.show(this.onSurface,this.options.inTransition),this._eventOutput.emit("select")},o.prototype.deselect=function(){this.selected=!1,this.arbiter.show(this.offSurface,this.options.outTransition),this._eventOutput.emit("deselect")},o.prototype.isSelected=function(){return this.selected},o.prototype.setOptions=function(t){t.content!==undefined&&(this.options.content=t.content,this.offSurface.setContent(this.options.content),this.onSurface.setContent(this.options.content)),t.offClasses&&(this.options.offClasses=t.offClasses,this.offSurface.setClasses(this.options.offClasses)),t.onClasses&&(this.options.onClasses=t.onClasses,this.onSurface.setClasses(this.options.onClasses)),t.size!==undefined&&(this.options.size=t.size,this.onSurface.setSize(this.options.size),this.offSurface.setSize(this.options.size)),t.toggleMode!==undefined&&(this.options.toggleMode=t.toggleMode),t.outTransition!==undefined&&(this.options.outTransition=t.outTransition),t.inTransition!==undefined&&(this.options.inTransition=t.inTransition),t.crossfade!==undefined&&(this.options.crossfade=t.crossfade,this.arbiter.setOptions({overlap:this.options.crossfade}))},o.prototype.getSize=function(){return this.options.size},o.prototype.render=function(){return this.arbiter.render()},n.exports=o}),define("famous/widgets/TabBar.js",["require","exports","module","famous/utilities/Utility","famous/core/View","famous/views/GridLayout","./ToggleButton"],function(e,t,n){function u(e){i.apply(this,arguments),this.layout=new s,this.buttons=[],this._buttonIds={},this._buttonCallbacks={},this.layout.sequenceFrom(this.buttons),this._add(this.layout),this._optionsManager.on("change",a.bind(this))}function a(e){var t=e.id,n=e.value;if(t==="direction")this.layout.setOptions({dimensions:f.call(this.buttons.length,this.options.direction)});else if(t==="buttons")for(var r in this.buttons)this.buttons[r].setOptions(n);else if(t==="sections")for(var i in this.options.sections)this.defineSection(i,this.options.sections[i])}function f(e,t){return t===r.Direction.X?[e,1]:[1,e]}var r=e("famous/utilities/Utility"),i=e("famous/core/View"),s=e("famous/views/GridLayout"),o=e("./ToggleButton");u.prototype=Object.create(i.prototype),u.prototype.constructor=u,u.DEFAULT_OPTIONS={sections:[],widget:o,size:[undefined,50],direction:r.Direction.X,buttons:{toggleMode:o.ON}},u.prototype.defineSection=function(t,n){var r,i=this._buttonIds[t];if(i===undefined){i=this.buttons.length,this._buttonIds[t]=i;var s=this.options.widget;r=new s,this.buttons[i]=r,this.layout.setOptions({dimensions:f(this.buttons.length,this.options.direction)})}else r=this.buttons[i],r.unbind("select",this._buttonCallbacks[t]);this.options.buttons&&r.setOptions(this.options.buttons),r.setOptions(n),this._buttonCallbacks[t]=this.select.bind(this,t),r.on("select",this._buttonCallbacks[t])},u.prototype.select=function(t){var n=this._buttonIds[t];this.buttons[n]&&this.buttons[n].isSelected()?this._eventOutput.emit("select",{id:t}):this.buttons[n]&&this.buttons[n].select();for(var r=0;r<this.buttons.length;r++)r!==n&&this.buttons[r].deselect()},n.exports=u}),define("famous/physics/bodies/Body",["require","exports","module","./Particle","famous/core/Transform","famous/math/Vector","famous/math/Quaternion","famous/math/Matrix"],function(e,t,n){function a(e){r.call(this,e),e=e||{},this.orientation=new o,this.angularVelocity=new s,this.angularMomentum=new s,this.torque=new s,e.orientation&&this.orientation.set(e.orientation),e.angularVelocity&&this.angularVelocity.set(e.angularVelocity),e.angularMomentum&&this.angularMomentum.set(e.angularMomentum),e.torque&&this.torque.set(e.torque),this.setMomentsOfInertia(),this.angularVelocity.w=0,this.pWorld=new s}var r=e("./Particle"),i=e("famous/core/Transform"),s=e("famous/math/Vector"),o=e("famous/math/Quaternion"),u=e("famous/math/Matrix");a.DEFAULT_OPTIONS=r.DEFAULT_OPTIONS,a.DEFAULT_OPTIONS.orientation=[0,0,0,1],a.DEFAULT_OPTIONS.angularVelocity=[0,0,0],a.AXES=r.AXES,a.SLEEP_TOLERANCE=r.SLEEP_TOLERANCE,a.INTEGRATOR=r.INTEGRATOR,a.prototype=Object.create(r.prototype),a.prototype.constructor=a,a.prototype.isBody=!0,a.prototype.setMass=function(){r.prototype.setMass.apply(this,arguments),this.setMomentsOfInertia()},a.prototype.setMomentsOfInertia=function(){this.inertia=new u,this.inverseInertia=new u},a.prototype.updateAngularVelocity=function(){this.angularVelocity.set(this.inverseInertia.vectorMultiply(this.angularMomentum))},a.prototype.toWorldCoordinates=function(t){return this.pWorld.set(this.orientation.rotateVector(t))},a.prototype.getEnergy=function(){return r.prototype.getEnergy.call(this)+.5*this.inertia.vectorMultiply(this.angularVelocity).dot(this.angularVelocity)},a.prototype.reset=function(t,n,i,s){r.prototype.reset.call(this,t,n),this.angularVelocity.clear(),this.setOrientation(i||[1,0,0,0]),this.setAngularMomentum(s||[0,0,0])},a.prototype.setOrientation=function(t){this.orientation.set(t)},a.prototype.setAngularVelocity=function(t){this.wake(),this.angularVelocity.set(t)},a.prototype.setAngularMomentum=function(t){this.wake(),this.angularMomentum.set(t)},a.prototype.applyForce=function(t,n){r.prototype.applyForce.call(this,t),n!==undefined&&this.applyTorque(n.cross(t))},a.prototype.applyTorque=function(t){this.wake(),this.torque.set(this.torque.add(t))},a.prototype.getTransform=function(){return i.thenMove(this.orientation.getTransform(),i.getTranslate(r.prototype.getTransform.call(this)))},a.prototype._integrate=function(t){r.prototype._integrate.call(this,t),this.integrateAngularMomentum(t),this.updateAngularVelocity(t),this.integrateOrientation(t)},a.prototype.integrateAngularMomentum=function(t){a.INTEGRATOR.integrateAngularMomentum(this,t)},a.prototype.integrateOrientation=function(t){a.INTEGRATOR.integrateOrientation(this,t)},n.exports=a}),define("famous/physics/bodies/Circle.js",["require","exports","module","./Body","famous/math/Matrix"],function(e,t,n){function s(e){e=e||{},this.setRadius(e.radius||0),r.call(this,e)}var r=e("./Body"),i=e("famous/math/Matrix");s.prototype=Object.create(r.prototype),s.prototype.constructor=s,s.prototype.setRadius=function(t){this.radius=t,this.size=[2*this.radius,2*this.radius],this.setMomentsOfInertia()},s.prototype.setMomentsOfInertia=function(){var t=this.mass,n=this.radius;this.inertia=new i([[.25*t*n*n,0,0],[0,.25*t*n*n,0],[0,0,.5*t*n*n]]),this.inverseInertia=new i([[4/(t*n*n),0,0],[0,4/(t*n*n),0],[0,0,2/(t*n*n)]])},n.exports=s}),define("famous/physics/bodies/Rectangle.js",["require","exports","module","./Body","famous/math/Matrix"],function(e,t,n){function s(e){e=e||{},this.size=e.size||[0,0],r.call(this,e)}var r=e("./Body"),i=e("famous/math/Matrix");s.prototype=Object.create(r.prototype),s.prototype.constructor=s,s.prototype.setSize=function(t){this.size=t,this.setMomentsOfInertia()},s.prototype.setMomentsOfInertia=function(){var t=this.mass,n=this.size[0],r=this.size[1];this.inertia=new i([[t*r*r/12,0,0],[0,t*n*n/12,0],[0,0,t*(n*n+r*r)/12]]),this.inverseInertia=new i([[12/(t*r*r),0,0],[0,12/(t*n*n),0],[0,0,12/(t*(n*n+r*r))]])},n.exports=s}),define("famous/physics/constraints/Collision.js",["require","exports","module","./Constraint","famous/math/Vector"],function(e,t,n){function s(e){this.options=Object.create(s.DEFAULT_OPTIONS),e&&this.setOptions(e),this.normal=new i,this.pDiff=new i,this.vDiff=new i,this.impulse1=new i,this.impulse2=new i,r.call(this)}function o(e,t){return e.velocity.dot(t.velocity)}var r=e("./Constraint"),i=e("famous/math/Vector");s.prototype=Object.create(r.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={restitution:.5,drift:.5,slop:0},s.prototype.setOptions=function(t){for(var n in t)this.options[n]=t[n]},s.prototype.applyConstraint=function(t,n,r){if(n===undefined)return;var i=n.velocity,s=n.position,o=n.inverseMass,u=n.radius,a=this.options,f=a.drift,l=-a.slop,c=a.restitution,h=this.normal,p=this.pDiff,d=this.vDiff,v=this.impulse1,m=this.impulse2;for(var g=0;g<t.length;g++){var y=t[g];if(y===n)continue;var b=y.velocity,w=y.position,E=y.inverseMass,S=y.radius;p.set(w.sub(s)),d.set(b.sub(i));var x=p.norm(),T=x-(u+S),N=1/(o+E),C=0;if(T<0){h.set(p.normalize());if(this._eventOutput){var k={target:y,source:n,overlap:T,normal:h};this._eventOutput.emit("preCollision",k),this._eventOutput.emit("collision",k)}var L=T<=l?((1+c)*h.dot(d)+f/r*(T-l))/(C+r/N):(1+c)*h.dot(d)/(C+r/N);h.mult(r*L).put(v),v.mult(-1).put(m),n.applyImpulse(v),y.applyImpulse(m),this._eventOutput&&this._eventOutput.emit("postCollision",k)}}},n.exports=s}),define("famous/physics/constraints/Curve.js",["require","exports","module","./Constraint","famous/math/Vector"],function(e,t,n){function s(e){this.options=Object.create(s.DEFAULT_OPTIONS),e&&this.setOptions(e),this.J=new i,this.impulse=new i,r.call(this)}var r=e("./Constraint"),i=e("famous/math/Vector");s.prototype=Object.create(r.prototype),s.prototype.constructor=s;var o=1e-7,u=Math.PI;s.DEFAULT_OPTIONS={equation:function(e,t,n){return 0},plane:function(e,t,n){return n},period:0,dampingRatio:0},s.prototype.setOptions=function(t){for(var n in t)this.options[n]=t[n]},s.prototype.applyConstraint=function(t,n,r){var i=this.options,s=this.impulse,a=this.J,f=i.equation,l=i.plane,c=i.dampingRatio,h=i.period;for(var p=0;p<t.length;p++){var d=t[p],v=d.velocity,m=d.position,g=d.mass,y,b;if(h===0)y=0,b=1;else{var w=4*g*u*c/h,E=4*g*u*u/(h*h);y=1/(w+r*E),b=r*E/(w+r*E)}var S=m.x,x=m.y,T=m.z,N=f(S,x,T),C=(f(S+o,m,m)-N)/o,k=(f(S,x+o,m)-N)/o,L=(f(S,x,m+o)-N)/o,A=l(S,x,T),O=(l(S+o,x,T)-A)/o,M=(l(S,x+o,T)-A)/o,_=(l(S,x,T+o)-A)/o;a.setXYZ(C+O,k+M,L+_);var D=b/r*(N+A),P=-(a.dot(v)+D)/(y+r*a.normSquared()/g);s.set(a.mult(r*P)),d.applyImpulse(s)}},n.exports=s}),define("famous/physics/constraints/Distance.js",["require","exports","module","./Constraint","famous/math/Vector"],function(e,t,n){function s(e){this.options=Object.create(this.constructor.DEFAULT_OPTIONS),e&&this.setOptions(e),this.impulse=new i,this.normal=new i,this.diffP=new i,this.diffV=new i,r.call(this)}function u(e,t){return t.mass*e.norm()}var r=e("./Constraint"),i=e("famous/math/Vector");s.prototype=Object.create(r.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={anchor:null,length:0,minLength:0,period:0,dampingRatio:0};var o=Math.PI;s.prototype.setOptions=function(t){t.anchor&&(t.anchor.position instanceof i&&(this.options.anchor=t.anchor.position),t.anchor instanceof i&&(this.options.anchor=t.anchor),t.anchor instanceof Array&&(this.options.anchor=new i(t.anchor))),t.length!==undefined&&(this.options.length=t.length),t.dampingRatio!==undefined&&(this.options.dampingRatio=t.dampingRatio),t.period!==undefined&&(this.options.period=t.period),t.minLength!==undefined&&(this.options.minLength=t.minLength)},s.prototype.setAnchor=function(t){this.options.anchor||(this.options.anchor=new i),this.options.anchor.set(t)},s.prototype.applyConstraint=function(t,n,r){var i=this.normal,s=this.diffP,u=this.diffV,a=this.impulse,f=this.options,l=f.dampingRatio,c=f.period,h=f.minLength,p,d;if(n){var v=n.velocity;p=n.position,d=n.inverseMass}else p=this.options.anchor,d=0;var m=this.options.length;for(var g=0;g<t.length;g++){var y=t[g],b=y.velocity,w=y.position,E=y.inverseMass;s.set(w.sub(p)),i.set(s.normalize());var S=s.norm()-m;if(Math.abs(S)<h)return;n?u.set(b.sub(v)):u.set(b);var x=1/(E+d),T,N;if(c===0)T=0,N=1;else{var C=4*x*o*l/c,k=4*x*o*o/(c*c);T=1/(C+r*k),N=r*k/(C+r*k)}var L=N/r*S,A=-(i.dot(u)+L)/(T+r/x);a.set(i.mult(r*A)),y.applyImpulse(a),n&&n.applyImpulse(a.mult(-1))}},n.exports=s}),define("famous/physics/constraints/Surface.js",["require","exports","module","./Constraint","famous/math/Vector"],function(e,t,n){function s(e){this.options=Object.create(s.DEFAULT_OPTIONS),e&&this.setOptions(e),this.J=new i,this.impulse=new i,r.call(this)}var r=e("./Constraint"),i=e("famous/math/Vector");s.prototype=Object.create(r.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={equation:undefined,period:0,dampingRatio:0};var o=1e-7,u=Math.PI;s.prototype.setOptions=function(t){for(var n in t)this.options[n]=t[n]},s.prototype.applyConstraint=function(t,n,r){var i=this.impulse,s=this.J,a=this.options,f=a.equation,l=a.dampingRatio,c=a.period;for(var h=0;h<t.length;h++){var p=t[h],d=p.velocity,v=p.position,m=p.mass,g,y;if(c===0)g=0,y=1;else{var b=4*m*u*l/c,w=4*m*u*u/(c*c);g=1/(b+r*w),y=r*w/(b+r*w)}var E=v.x,S=v.y,x=v.z,T=f(E,S,x),N=(f(E+o,v,v)-T)/o,C=(f(E,S+o,v)-T)/o,k=(f(E,S,v+o)-T)/o;s.setXYZ(N,C,k);var L=y/r*T,A=-(s.dot(d)+L)/(g+r*s.normSquared()/m);i.set(s.mult(r*A)),p.applyImpulse(i)}},n.exports=s}),define("famous/physics/constraints/Walls.js",["require","exports","module","./Constraint","./Wall","famous/math/Vector"],function(e,t,n){function o(e){this.options=Object.create(o.DEFAULT_OPTIONS),e&&this.setOptions(e),f.call(this,e.sides||this.options.sides),r.call(this)}function a(e,t,n){var r,i=o.SIDES;switch(parseInt(e)){case i.LEFT:r=t[0]*n[0];break;case i.TOP:r=t[1]*n[1];break;case i.FRONT:r=t[2]*n[2];break;case i.RIGHT:r=t[0]*(1-n[0]);break;case i.BOTTOM:r=t[1]*(1-n[1]);break;case i.BACK:r=t[2]*(1-n[2])}return r}function f(e){this.components={};var t=this.components;for(var n=0;n<e.length;n++){var r=e[n];t[n]=new i({normal:u[r].clone(),distance:a(r,this.options.size,this.options.origin)})}}function l(e){this.forEach(function(t){t.setOptions(e)});for(var t in e)this.options[t]=e[t]}var r=e("./Constraint"),i=e("./Wall"),s=e("famous/math/Vector");o.prototype=Object.create(r.prototype),o.prototype.constructor=o,o.ON_CONTACT=i.ON_CONTACT,o.SIDES={LEFT:0,RIGHT:1,TOP:2,BOTTOM:3,FRONT:4,BACK:5,TWO_DIMENSIONAL:[0,1,2,3],THREE_DIMENSIONAL:[0,1,2,3,4,5]},o.DEFAULT_OPTIONS={sides:o.SIDES.TWO_DIMENSIONAL,size:[window.innerWidth,window.innerHeight,0],origin:[.5,.5,.5],drift:.5,slop:0,restitution:.5,onContact:o.ON_CONTACT.REFLECT};var u={0:new s(1,0,0),1:new s(-1,0,0),2:new s(0,1,0),3:new s(0,-1,0),4:new s(0,0,1),5:new s(0,0,-1)};o.prototype.setOptions=function(t){var n=!1;t.restitution!==undefined&&l.call(this,{restitution:t.restitution}),t.drift!==undefined&&l.call(this,{drift:t.drift}),t.slop!==undefined&&l.call(this,{slop:t.slop}),t.onContact!==undefined&&l.call(this,{onContact:t.onContact}),t.size!==undefined&&(n=!0),t.sides!==undefined&&(this.options.sides=t.sides),t.origin!==undefined&&(n=!0),n&&this.setSize(t.size,t.origin)},o.prototype.setSize=function(t,n){n=n||this.options.origin,n.length<3&&(n[2]=.5),this.forEach(function(e,r){var i=a(r,t,n);e.setOptions({distance:i})}),this.options.size=t,this.options.origin=n},o.prototype.applyConstraint=function(t,n,r){this.forEach(function(e){e.applyConstraint(t,n,r)})},o.prototype.forEach=function(t){var n=this.options.sides;for(var r in this.sides)t(n[r],r)},o.prototype.rotateZ=function(t){this.forEach(function(e){var n=e.options.normal;n.rotateZ(t).put(n)})},o.prototype.rotateX=function(t){this.forEach(function(e){var n=e.options.normal;n.rotateX(t).put(n)})},o.prototype.rotateY=function(t){this.forEach(function(e){var n=e.options.normal;n.rotateY(t).put(n)})},n.exports=o}),define("famous/physics/forces/Repulsion.js",["require","exports","module","./Force","famous/math/Vector"],function(e,t,n){function s(e){this.options=Object.create(s.DEFAULT_OPTIONS),e&&this.setOptions(e),this.disp=new i,r.call(this)}var r=e("./Force"),i=e("famous/math/Vector");s.prototype=Object.create(r.prototype),s.prototype.constructor=s,s.DECAY_FUNCTIONS={LINEAR:function(e,t){return Math.max(1-1/t*e,0)},MORSE:function(e,t){var n=t===0?100:t,r=e+n*(1-Math.log(2));return Math.max(1-Math.pow(1-Math.exp(r/n-1),2),0)},INVERSE:function(e,t){return 1/(1-t+e)},GRAVITY:function(e,t){return 1/(1-t+e*e)}},s.DEFAULT_OPTIONS={strength:1,anchor:undefined,range:[0,Infinity],cutoff:0,cap:Infinity,decayFunction:s.DECAY_FUNCTIONS.GRAVITY},s.prototype.setOptions=function(t){t.anchor!==undefined&&(t.anchor.position instanceof i&&(this.options.anchor=t.anchor.position),t.anchor instanceof Array&&(this.options.anchor=new i(t.anchor)),delete t.anchor);for(var n in t)this.options[n]=t[n]},s.prototype.applyForce=function(t,n){var r=this.options,i=this.force,s=this.disp,o=r.strength,u=r.anchor||n.position,a=r.cap,f=r.cutoff,l=r.range[0],c=r.range[1],h=r.decayFunction;if(o===0)return;for(var p in t){var d=t[p];if(d===n)continue;var v=d.mass,m=d.position;s.set(m.sub(u));var g=s.norm();g<c&&g>l&&(i.set(s.normalize(o*v*h(g,f)).cap(a)),d.applyForce(i))}},n.exports=s}),define("famous/physics/forces/RotationalDrag.js",["require","exports","module","./Drag"],function(e,t,n){function i(e){r.call(this,e)}var r=e("./Drag");i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.DEFAULT_OPTIONS=r.DEFAULT_OPTIONS,i.FORCE_FUNCTIONS=r.FORCE_FUNCTIONS,i.FORCE_FUNCTIONS={LINEAR:function(e){return e},QUADRATIC:function(e){return e.mult(e.norm())}},i.prototype.applyForce=function(t){var n=this.options.strength,r=this.options.forceFunction,i=this.force;for(var s=0;s<t.length;s++){var o=t[s];r(o.angularVelocity).mult(-100*n).put(i),o.applyTorque(i)}},i.prototype.setOptions=function(t){for(var n in t)this.options[n]=t[n]},n.exports=i}),define("famous/physics/forces/RotationalSpring.js",["require","exports","module","./Spring"],function(e,t,n){function i(e){r.call(this,e)}var r=e("./Spring");i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.DEFAULT_OPTIONS=r.DEFAULT_OPTIONS,i.FORCE_FUNCTIONS=r.FORCE_FUNCTIONS,i.prototype.applyForce=function(t){var n=this.force,r=this.options,i=this.disp,s=r.stiffness,o=r.damping,u=r.length,a=r.anchor;for(var f=0;f<t.length;f++){var l=t[f];i.set(a.sub(l.orientation));var c=i.norm()-u;if(c===0)return;var h=l.mass;s*=h,o*=h,n.set(i.normalize(s*this.forceFunction(c,this.options.lMax))),o&&n.set(n.add(l.angularVelocity.mult(-o))),l.applyTorque(n)}},i.prototype.getEnergy=function(t){var n=this.options,r=n.length,i=n.anchor,s=n.stiffness,o=i.sub(t.orientation).norm()-r;return.5*s*o*o},n.exports=i}),define("famous/physics/forces/VectorField.js",["require","exports","module","./Force","famous/math/Vector"],function(e,t,n){function s(e){this.options=Object.create(s.DEFAULT_OPTIONS),e&&this.setOptions(e),o.call(this,this.options.field),r.call(this),this.evaluation=new i(0,0,0)}function o(e){var t=s.FIELDS;switch(e){case t.CONSTANT:this.options.direction||(this.options.direction=new i(0,1,0));break;case t.POINT_ATTRACTOR:this.options.position||(this.options.position=new i(0,0,0));break;case t.SPHERE_ATTRACTOR:this.options.radius||(this.options.radius=1)}}function u(e){var t=this.evaluation,n=this.options.field;return t.set(e),n(t,this.options)}var r=e("./Force"),i=e("famous/math/Vector");s.prototype=Object.create(r.prototype),s.prototype.constructor=s,s.FIELDS={CONSTANT:function(e,t){return e.set(t.direction)},LINEAR:function(e){return e},RADIAL:function(e){return e.set(e.mult(-1,e))},SPHERE_ATTRACTOR:function(e,t){return e.set(e.mult((t.radius-e.norm())/e.norm()))},POINT_ATTRACTOR:function(e,t){return e.set(t.position.sub(e))}},s.DEFAULT_OPTIONS={strength:1,field:s.FIELDS.CONSTANT},s.prototype.setOptions=function(t){for(var n in t)this.options[n]=t[n]},s.prototype.applyForce=function(t){var n=this.force;for(var r=0;r<t.length;r++){var i=t[r];n.set(u.call(this,i.position).mult(i.mass*this.options.strength)),i.applyForce(n)}},n.exports=s});